<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="roleManage">
<head>
	<meta name="referrer" content="no-referrer">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>角色管理页面</title>
<script src="../skeleton/includeJs_3rd.js"></script>
<script src="../skeleton/includeCss_3rd.js"></script>
<style type="text/css">
.blankDiv {
	margin-right: 20px;
	display: inline;
}
.null_tr {
	height: 30.2px;
}
</style>
</head>
<body ng-controller="manageController as roleCtrl" style="padding-right: 10px;" ng-cloak>
	<div class="form-inline" align="right">
		<label for="dept">角色编号：</label> 
		<div class="form-group">
			<input type="text" class="input-text" ng-model="searchId">
		</div>
		<div class="blankDiv"></div>
		<label for="dept">角色名称：</label> 
		<div class="form-group">
			<input type="text" class="input-text" ng-model="searchName">		
		</div>
		<div class="blankDiv"></div>
		<div class="form-group">
			<button class="btn btn-primary" type="button" ng-click="searchRole()"><i class="Hui-iconfont">&#xe709;</i> 查询</button>
        	<button class="btn btn-primary" type="button" ng-click="resetSearch()"><i class="Hui-iconfont">&#xe68f;</i> 重置</button>
		</div>
	</div>
	<div style="margin-top: 20px;">
		<table ng-table="roleCtrl.tableParams" class="table-condensed table-border table-hover" style="margin-bottom: 10px;">
			<tr ng-repeat="role in $data" ng-model="roleInfos" ng-click="selectRole(role)" ng-class="role.isNull">
				<td data-title="''">  
					<input type="checkbox" id="{{role.roleId}}" ng-checked="isSelected(role)">
				</td>
				<td data-title="'角色编号'">  
					{{role.roleId}}
				</td>
				<td data-title="'角色名称'">{{role.roleName}}</td>
				<td data-title="'角色状态'" ng-bind="getRoleStatusName(role.roleStatus)">
				</td>
				<td data-title="'角色描述'"><span title="{{role.roleDesc}}" ng-bind="parseRoleDesc(role.roleDesc)"></span></td>
				<td data-title="'创建时间'">{{role.createTime}}</td>
				<td data-title="'修改时间'">{{role.modifyTime}}</td>
				<td data-title="'操作工号'">{{role.modifyOperatorId}}</td>
			</tr>
		</table>
	</div>	
	<div class="f-r">
		<button class="btn btn-primary" ng-click="openModel('add')"><i class="Hui-iconfont">&#xe604;</i> 添加</button>
       	<button class="btn btn-primary" ng-click="openModel('modify')"><i class="Hui-iconfont">&#xe60c;</i> 修改</button>
       	<button class="btn btn-primary" data-toggle="modal" ng-click="roleDelete()"><i class="Hui-iconfont">&#xe60b;</i> 删除</button>
    </div>
	
	<!-- 模态编辑窗口 -->
	<script type="text/ng-template" id="modify.html"> 
		<div>
			<div class="modal-header">
				<h4 class="modal-title" align="center">修改角色</h4>
			</div>
			<div class="modal-body">
        		<div align="center">
					<form class="form-horizontal">
 					<div class="form-group">
    					<label for="roleId" class="col-sm-3 control-label">角色工号：</label>
    					<div class="col-sm-8">
      						<input type="text" id="roleId" class="form-control" ng-model="roleInfos[0].roleId" disabled="disabled">
    					</div>
  					</div>
  					<div class="form-group">
    					<label for="roleName" class="col-sm-3 control-label">角色名称：</label>
    					<div class="col-sm-8">
      						<input type="text" id="roleName" class="form-control" ng-model="roleInfos[0].roleName" placeholder="必填" maxlength="32">
    					</div>
  					</div>
					<div class="form-group">
    					<label for="roleStatus" class="col-sm-3 control-label">角色状态：</label>
    					<div class="col-sm-8">
      						<select ng-model="roleInfos[0].roleStatus" id="roleStatus" class="form-control" ng-options='x.entryId as x.entryName for x  in roleStatusDict'>
							</select>
    					</div>
  					</div>
					<div class="form-group">
    					<label for="roleDesc" class="col-sm-3 control-label">角色描述：</label>
    					<div id="orgTreeInput" class="col-sm-8">
							<textarea id="roleDesc" class="form-control" rows="3" ng-model="roleInfos[0].roleDesc" maxlength="128"></textarea>
						</div>
  					</div>
					</form>
        		</div>
    		</div>
			<div class="modal-footer">
        		<button class="btn btn-primary" ng-click="roleUpdate()"><i class="Hui-iconfont">&#xe6a7;</i> 确定</button>
        		<button class="btn btn-primary" ng-click="cancel()"><i class="Hui-iconfont">&#xe6a6;</i> 关闭</button>
    		</div>
		</div>
	</script>
	
	<!--模态增加窗口-->
	<script type="text/ng-template" id="add.html"> 
		<div>
			<div class="modal-header">
				<h4 class="modal-title" align="center">添加角色</h4>
			</div>
			<div class="modal-body">
        		<div align="center">
					<form class="form-horizontal">
  					<div class="form-group">
    					<label for="roleName" class="col-sm-3 control-label">角色姓名：</label>
    					<div class="col-sm-8">
      						<input type="text" id="roleName" class="form-control" ng-model="roleInfo.roleName" placeholder="必填" maxlength="32">
    					</div>
  					</div>
					<div class="form-group">
    					<label for="roleStatus" class="col-sm-3 control-label">角色状态：</label>
    					<div class="col-sm-8">
      						<select ng-model="roleInfo.roleStatus" id="roleStatus" class="form-control" ng-options='x.entryId as x.entryName for x  in roleStatusDict'>
							</select>
    					</div>
  					</div>
					<div class="form-group">
    					<label for="roleDesc" class="col-sm-3 control-label">角色描述</label>
    					<div id="orgTreeInput" class="col-sm-8">
							<textarea id="roleDesc" class="form-control" rows="3" ng-model="roleInfo.roleDesc" maxlength="128"></textarea>
						</div>
  					</div>
					</form>
        		</div>
    		</div>
			<div class="modal-footer">
        		<button class="btn btn-primary" ng-click="addRole()"><i class="Hui-iconfont">&#xe6a7;</i> 确定</button>
        		<button class="btn btn-primary" ng-click="cancel()"><i class="Hui-iconfont">&#xe6a6;</i> 关闭</button>
    		</div>
		</div>
	</script>
	<script type="text/javascript" src="../resources/admin/controller/manageRole.js"></script>
</body>
</html>