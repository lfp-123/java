/*
  filename: angular.integralui.treegrid.min.js
  version : 4.1.0
  Copyright © 2014-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUITreeGridService",["$rootScope",function(c){var f=null;return{addColumn:function(n,g){c.$broadcast(n+"-add-column",g)},clearColumns:function(n){c.$broadcast(n+"-clear-columns")},insertColumnAt:function(n,g,f){c.$broadcast(n+"-insert-column-at",g,f)},insertColumnBefore:function(n,g,f){c.$broadcast(n+"-insert-column-before",g,f)},insertColumnAfter:function(n,g,f){c.$broadcast(n+"-insert-column-after",g,f)},removeColumn:function(n,g){c.$broadcast(n+"-remove-column",
g)},removeColumnAt:function(n,g){c.$broadcast(n+"-remove-column-at",g)},addRow:function(n,g,f){c.$broadcast(n+"-add-row",g,f)},clearRows:function(n,g){c.$broadcast(n+"-clear-rows",g)},insertRowAt:function(n,g,f,k){c.$broadcast(n+"-insert-row-at",g,f,k)},insertRowBefore:function(n,g,f){c.$broadcast(n+"-insert-row-before",g,f)},insertRowAfter:function(n,g,f){c.$broadcast(n+"-insert-row-after",g,f)},removeRow:function(n,g){c.$broadcast(n+"-remove-row",g)},removeRowAt:function(n,g,f){c.$broadcast(n+"-remove-row-at",
g,f)},exportToJSON:function(n,g,f,k,V){c.$broadcast(n+"-export-json",g,f,k,V);n=this.getTempData();this.clearTempData();return n?n:""},loadData:function(n,g,f,k,V){c.$broadcast(n+"-load-data",g,f,k,V)},openEditor:function(n,g){c.$broadcast(n+"-open-editor",g)},closeEditor:function(n,g){c.$broadcast(n+"-close-editor",g)},collapse:function(n,g){c.$broadcast(n+"-collapse",g)},expand:function(n,g){c.$broadcast(n+"-expand",g)},expandColIndex:function(n,g){c.$broadcast(n+"-expand-col-index",g)},toggle:function(n,
g){c.$broadcast(n+"-toggle",g)},filter:function(n,g,f){c.$broadcast(n+"-filter",g,f)},findRowById:function(n,g){c.$broadcast(n+"-find-row-by-id",g);var f=this.getTempData();this.clearTempData();return f?f:null},findRowByPath:function(n,g,f){c.$broadcast(n+"-find-row-by-path",g,f);n=this.getTempData();this.clearTempData();return n?n:null},findRowByText:function(n,g){c.$broadcast(n+"-find-row-by-text",g);var f=this.getTempData();this.clearTempData();return f?f:null},getCellAt:function(n,g){c.$broadcast(n+
"-get-cell-at",g);var f=this.getTempData();this.clearTempData();return f?f:null},getRowAt:function(n,g){c.$broadcast(n+"-get-row-at",g);var f=this.getTempData();this.clearTempData();return f?f:null},getRowParent:function(n,g){c.$broadcast(n+"-get-row-parent",g);var f=this.getTempData();this.clearTempData();return f?f:null},focus:function(n,g){c.$broadcast(n+"-focus",g)},clearTempData:function(){f=null},ensureVisible:function(n,g){c.$broadcast(n+"-ensure-visible",g)},getTempData:function(){return f},
getRowLevel:function(n,g){c.$broadcast(n+"-get-row-level",g);var f=this.getTempData();this.clearTempData();return f?f:0},getFlatList:function(n,g){c.$broadcast(n+"-get-flat-list",g);var f=this.getTempData();this.clearTempData();return f?f:[]},getFullPath:function(n,g){c.$broadcast(n+"-get-full-path",g);var f=this.getTempData();this.clearTempData();return f?f:""},getHoverColumn:function(n,g){c.$broadcast(n+"-get-hover-column",g);var f=this.getTempData();this.clearTempData();return f?f:null},getList:function(n,
g){c.$broadcast(n+"-get-list",g);var f=this.getTempData();this.clearTempData();return f?f:[]},setTempData:function(c){f=c},topRow:function(f,g){if(g)c.$broadcast(f+"-set-top-row",g);else return c.$broadcast(f+"-get-top-row"),g=this.getTempData(),this.clearTempData(),g?g:null},beginLoad:function(f,g,A){c.$broadcast(f+"-begin-load",g,A)},endLoad:function(f,g){c.$broadcast(f+"-end-load",g)},moveColumn:function(f,g,A){c.$broadcast(f+"-move-column",g,A)},moveRow:function(f,g,A,k,V){c.$broadcast(f+"-move-row",
g,A,k,V)},getScrollPos:function(f){c.$broadcast(f+"-get-scroll-pos");f=this.getTempData();this.clearTempData();return f?f:{x:0,y:0}},getMaxScrollPos:function(f){c.$broadcast(f+"-get-max-scroll-pos");f=this.getTempData();this.clearTempData();return f?f:{x:0,y:0}},setScrollPos:function(f,g){c.$broadcast(f+"-set-scroll-pos",g)},scrollTo:function(f,g,A){c.$broadcast(f+"-scroll-to",g,A)},currentPage:function(f,g){if(void 0!=g&&null!=g)c.$broadcast(f+"-set-current-page",g);else{c.$broadcast(f+"-get-current-page");
var n=this.getTempData();this.clearTempData();return void 0!=n?n:-1}},firstPage:function(f){c.$broadcast(f+"-first-page")},lastPage:function(f){c.$broadcast(f+"-last-page")},nextPage:function(f){c.$broadcast(f+"-next-page")},prevPage:function(f){c.$broadcast(f+"-prev-page")},clearSelection:function(f){c.$broadcast(f+"-clear-selection")},selectedColumn:function(f,g){if(g)c.$broadcast(f+"-set-selected-column",g);else{c.$broadcast(f+"-get-selected-column");var n=this.getTempData();this.clearTempData();
return n?n:null}},selectedColumns:function(f,g){if(g)c.$broadcast(f+"-set-selected-columns",g);else{c.$broadcast(f+"-get-selected-columns");var n=this.getTempData();this.clearTempData();return n?n:null}},selectedRow:function(f,g){if(g)c.$broadcast(f+"-set-selected-row",g);else{c.$broadcast(f+"-get-selected-row");var n=this.getTempData();this.clearTempData();return n?n:null}},selectedRows:function(f,g){if(g)c.$broadcast(f+"-set-selected-rows",g);else{c.$broadcast(f+"-get-selected-rows");var n=this.getTempData();
this.clearTempData();return n?n:null}},sort:function(f,g,A,k){c.$broadcast(f+"-sort",g,A,k)},refresh:function(f,g,A){c.$broadcast(f+"-refresh",g,A)},resumeLayout:function(f,g){c.$broadcast(f+"-resume-layout",g)},suspendLayout:function(f,g){c.$broadcast(f+"-suspend-layout",g)},updateCurrentLayout:function(f){c.$broadcast(f+"-update-current-layout")},updateLayout:function(f,g){c.$broadcast(f+"-update-layout",g)},updateView:function(f){c.$broadcast(f+"-update-view")}}}]).controller("IntegralUITreeGridController",
["$scope","$element","$timeout","$window","$interval","IntegralUIInternalService","IntegralUIDataService","IntegralUITreeGridService","IntegralUIDragDrop","IntegralUIFilter",function(c,f,n,g,A,k,V,m,q,sc){var a=this;this.suppressProcess=!1;this.hoverCell=this.hoverRow=this.hoverColumn=null;a.defaultCheckBoxStyle={general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}};
a.defaultStyle={general:"iui-treegrid",column:{general:{content:"iui-treegrid-column-cell-content",disabled:"iui-treegrid-column-disabled",normal:"iui-treegrid-column",hovered:"iui-treegrid-column-hovered",selected:"iui-treegrid-column-selected"},header:{content:"iui-treegrid-column-header-cell-content",disabled:"iui-treegrid-column-header-disabled",normal:"iui-treegrid-column-header",hovered:"iui-treegrid-column-header-hovered",selected:"iui-treegrid-column-header-selected"},body:{content:"iui-treegrid-column-body-cell-content",
disabled:"iui-treegrid-column-body-disabled",normal:"iui-treegrid-column-body",hovered:"iui-treegrid-column-body-hovered",selected:"iui-treegrid-column-body-selected"},footer:{content:"iui-treegrid-column-footer-cell-content",disabled:"iui-treegrid-column-footer-disabled",normal:"iui-treegrid-column-footer",hovered:"iui-treegrid-column-footer-hovered",selected:"iui-treegrid-column-footer-selected"}},row:{general:{disabled:"iui-treegrid-row-disabled",focused:"iui-treegrid-row-focused",normal:"iui-treegrid-row",
hovered:"iui-treegrid-row-hovered",selected:"iui-treegrid-row-selected"},checkBox:{general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}},expandBox:{general:"iui-treegrid-expand-box",animated:"iui-treegrid-expand-box-load",expanded:"iui-treegrid-expand-box-open",collapsed:"iui-treegrid-expand-box-close"},cell:{content:"iui-treegrid-row-cell-content",general:"iui-treegrid-row-cell",
disabled:"iui-treegrid-row-cell-disabled",focused:"iui-treegrid-row-cell-focused",normal:"iui-treegrid-row-cell",hovered:"iui-treegrid-row-cell-hovered",selected:"iui-treegrid-row-cell-selected"},fixed:{disabled:"iui-treegrid-row-fixed-disabled",normal:"iui-treegrid-row-fixed",hovered:"iui-treegrid-row-fixed-hovered"}},cell:{content:"iui-treegrid-row-cell-content",general:"iui-treegrid-row-cell",disabled:"iui-treegrid-row-cell-disabled",focused:"iui-treegrid-row-cell-focused",normal:"iui-treegrid-row-cell",
hovered:"iui-treegrid-row-cell-hovered",selected:"iui-treegrid-row-cell-selected"}};this.updatePaging=function(b){a.options.paging=b?{enabled:k.isFieldAvailable(b.enabled,!1),showControlPanel:k.isFieldAvailable(b.showControlPanel,!0),pageSize:k.isFieldAvailable(b.pageSize,100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};this.updateShowScroll=function(b){a.options.showScroll=b?{horizontal:k.isFieldAvailable(b.horizontal,!0),vertical:k.isFieldAvailable(b.vertical,!0)}:{horizontal:!0,vertical:!0}};
this.updateOptions=function(b){b?(a.options={allowAnimation:k.isFieldAvailable(b.allowAnimation,!0),allowCellFocus:k.isFieldAvailable(b.allowCellFocus,!0),allowColumnReorder:k.isFieldAvailable(b.allowColumnReorder,!1),allowDrag:k.isFieldAvailable(b.allowDrag,!1),allowDrop:k.isFieldAvailable(b.allowDrop,!0),allowFilter:k.isFieldAvailable(b.allowFilter,!1),allowFocus:k.isFieldAvailable(b.allowFocus,!0),animationSpeed:200,autoExpand:k.isFieldAvailable(b.autoExpand,!0),autoSize:k.isFieldAvailable(b.autoSize,
!1),autoUpdate:k.isFieldAvailable(b.autoUpdate,!0),controlStyle:a.defaultStyle,displayMode:k.isFieldAvailable(b.displayMode,"normal"),editorSettings:{activate:"click"},enabled:k.isFieldAvailable(b.enabled,!0),expandColIndex:k.isFieldAvailable(b.expandColIndex,void 0!=a.options.expandColIndex?a.options.expandColIndex:0),fillSpace:k.isFieldAvailable(b.fillSpace,!1),gridLines:k.isFieldAvailable(b.gridLines,"both"),hoverSelection:k.isFieldAvailable(b.hoverSelection,!1),indent:k.isFieldAvailable(b.indent,
15),labelEdit:k.isFieldAvailable(b.labelEdit,!1),loadRows:[],maxRows:k.isFieldAvailable(b.maxRows,0),mouseWheelSpeed:k.isFieldAvailable(b.mouseWheelSpeed,"normal"),pathSeparator:k.isFieldAvailable(b.pathSeparator,"\\"),rowHeight:k.isFieldAvailable(b.rowHeight,-1),rtl:k.isFieldAvailable(b.rtl,!1),selectedColumn:k.isFieldAvailable(b.selectedColumn,a.options.selectedColumn?a.options.selectedColumn:null),selectedColumns:a.options.selectedColumns?a.options.selectedColumns:[],selectedIndex:-1,selectedRow:k.isFieldAvailable(b.selectedRow,
a.options.selectedRow?a.options.selectedRow:null),selectedRows:a.options.selectedRows?a.options.selectedRows:[],selectionMode:k.isFieldAvailable(b.selectionMode,"one"),showExpandBoxes:k.isFieldAvailable(b.showExpandBoxes,!0),showFooter:k.isFieldAvailable(b.showFooter,!0),showHeader:k.isFieldAvailable(b.showHeader,!0),showIcons:k.isFieldAvailable(b.showIcons,!0),sorting:k.isFieldAvailable(b.sorting,"none")},a.updatePaging(b.paging),a.updateShowScroll(b.showScroll),a.updateDataFields(b.dataFields),
a.updateControlStyle(b.controlStyle)):(a.options={allowAnimation:!0,allowCellFocus:!0,allowColumnReorder:!1,allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!0,animationSpeed:200,autoExpand:!0,autoSize:!1,autoUpdate:!0,controlStyle:a.defaultStyle,displayMode:"normal",editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],maxRows:0,mouseWheelSpeed:"normal",pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,
selectedColumns:[],selectedIndex:-1,selectedRow:null,selectedRows:[],selectionMode:"one",showExpandBoxes:!0,showFooter:!0,showHeader:!0,showIcons:!0,sorting:"none"},a.updatePaging(),a.updateShowScroll(),a.updateDataFields())};a.options={};this.updateColumnFields=function(b){a.options.columnFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFilter:b.allowFilter?b.allowFilter:"allowFilter",cellTemplateUrl:b.cellTemplateUrl?b.cellTemplateUrl:"cellTemplateUrl",
columns:b.columns?b.columns:"columns",comparer:b.comparer?b.comparer:"comparer",contentAlignment:b.contentAlignment?b.contentAlignment:"contentAlignment",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",editorType:b.editorType?b.editorType:"editorType",editorSettings:b.editorSettings?b.editorSettings:"editorSettings",editorTemplate:b.editorTemplate?b.editorTemplate:"editorTemplate",filterParams:b.filterParams?b.filterParams:"filterParams",filterTemplate:b.filterTemplate?b.filterTemplate:"filterTemplate",
fixed:b.fixed?b.fixed:"fixed",fixedWidth:b.fixedWidth?b.fixedWidth:"fixedWidth",footerAlignment:b.footerAlignment?b.footerAlignment:"footerAlignment",footerContent:b.footerContent?b.footerContent:"footerContent",footerTemplate:b.footerTemplate?b.footerTemplate:"footerTemplate",footerTemplateModel:b.footerTemplateModel?b.footerTemplateModel:"footerTemplateModel",footerText:b.footerText?b.footerText:"footerText",footerTooltip:b.footerTooltip?b.footerTooltip:"footerTooltip",headerAlignment:b.headerAlignment?
b.headerAlignment:"headerAlignment",headerContent:b.headerContent?b.headerContent:"headerContent",headerTemplate:b.headerTemplate?b.headerTemplate:"headerTemplate",headerTemplateModel:b.headerTemplateModel?b.headerTemplateModel:"headerTemplateModel",headerText:b.headerText?b.headerText:"headerText",headerTooltip:b.headerTooltip?b.headerTooltip:"headerTooltip",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.columns?b.columns:"columns",pid:b.pid?b.pid:"pid",minWidth:b.minWidth?b.minWidth:"minWidth",
maxWidth:b.maxWidth?b.maxWidth:"maxWidth",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateSettings:b.templateSettings?b.templateSettings:"templateSettings",visible:b.visible?b.visible:"visible",width:b.width?b.width:"width"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFilter:"allowFilter",cellTemplateUrl:"cellTemplateUrl",columns:"columns",comparer:"comparer",contentAlignment:"contentAlignment",contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",
editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",footerTemplate:"footerTemplate",footerTemplateModel:"footerTemplateModel",footerText:"footerText",footerTooltip:"footerTooltip",headerAlignment:"headerAlignment",headerContent:"headerContent",headerTemplate:"headerTemplate",headerTemplateModel:"headerTemplateModel",headerText:"headerText",headerTooltip:"headerTooltip",
icon:"icon",id:"id",objects:"columns",pid:"pid",minWidth:"minWidth",maxWidth:"maxWidth",selected:"selected",style:"style",templateSettings:"templateSettings",visible:"visible",width:"width"};a.columnsObj&&a.columnsObj.updateDataFields(a.options.columnFields)};this.updateRowFields=function(b){a.options.rowFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFocus:b.allowFocus?b.allowFocus:"allowFocus",cells:b.cells?b.cells:"cells",content:b.content?
b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",expanded:b.expanded?b.expanded:"expanded",fixed:b.fixed?b.fixed:"fixed",hasChildren:b.hasChildren?b.hasChildren:"hasChildren",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.rows?b.rows:"rows",pid:b.pid?b.pid:"pid",rows:b.rows?b.rows:"rows",selected:b.selected?b.selected:"selected",statusIcon:b.statusIcon?b.statusIcon:"statusIcon",style:b.style?b.style:"style",subobjects:b.cells?b.cells:
"cells",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",visible:b.visible?b.visible:"visible"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",cells:"cells",content:"content",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",fixed:"fixed",hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",pid:"pid",rows:"rows",selected:"selected",statusIcon:"statusIcon",style:"style",subobjects:"cells",text:"text",tooltip:"tooltip",visible:"visible"};a.rowsObj&&
a.rowsObj.updateDataFields(a.getRowFields(a.options.rowFields))};this.updateCellFields=function(b){a.options.cellFields=b?{allowEdit:b.allowEdit?b.allowEdit:"allowEdit",cid:b.cid?b.cid:"cid",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",labelEdit:b.labelEdit?b.labelEdit:"labelEdit",rid:b.rid?b.rid:"rid",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateObj:b.templateObj?b.templateObj:
"templateObj",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",value:b.value?b.value:"value"}:{allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",enabled:"enabled",labelEdit:"labelEdit",rid:"rid",selected:"selected",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value"}};this.updateDataFields=function(b){b?(a.updateColumnFields(b.column),a.updateRowFields(b.row),a.updateCellFields(b.cell)):(a.updateColumnFields(),a.updateRowFields(),
a.updateCellFields())};a.updateOptions();c.$on(c.name+"-add-column",function(b,d){a.columnsObj.insertAt(d,-1,null,a.columnIsAdded)});c.$on(c.name+"-clear-columns",function(b){a.columnsObj.clear(null,a.columnsAreCleared)});c.$on(c.name+"-insert-column-at",function(b,d,c){a.columnsObj.insertAt(d,c,null,a.columnIsAdded)});c.$on(c.name+"-insert-column-after",function(b,d,c){a.columnsObj.insertByRef(d,c,!0,a.columnIsAdded)});c.$on(c.name+"-insert-column-before",function(b,d,c){a.columnsObj.insertByRef(d,
c,!1,a.columnIsAdded)});c.$on(c.name+"-remove-column",function(b,d){a.columnsObj.removeAt(d,-1,null,a.columnIsRemoved)});c.$on(c.name+"-remove-column-at",function(b,d){a.columnsObj.removeAt(null,d,null,a.columnIsRemoved)});this.columnsAreCleared=function(){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.updateLayout()};a.columnIsAdded=function(){a.updateLayout()};a.columnIsRemoved=function(){a.updateLayout()};c.$on(c.name+"-add-row",
function(b,d,c){a.rowsObj.insertAt(d,-1,c,a.rowIsAdded)});c.$on(c.name+"-clear-rows",function(b,d){a.rowsObj.clear(d,a.rowsAreCleared)});c.$on(c.name+"-insert-row-at",function(b,d,c,t){a.rowsObj.insertAt(d,c,t,a.rowIsAdded)});c.$on(c.name+"-insert-row-after",function(b,d,c){a.rowsObj.insertByRef(d,c,!0,a.rowIsAdded)});c.$on(c.name+"-insert-row-before",function(b,d,c){a.rowsObj.insertByRef(d,c,!1,a.rowIsAdded)});c.$on(c.name+"-remove-row",function(b,d){a.rowsObj.removeAt(d,-1,null,a.rowIsRemoved)});
c.$on(c.name+"-remove-row-at",function(b,d,c){a.rowsObj.removeAt(null,d,c,a.rowIsRemoved)});this.rowsAreCleared=function(b){b||(a.clearPrevSelection(),a.options.selectedRow=null,a.setScrollPos({x:0,y:0}));a.updateCurrentLayout()};this.rowIsAdded=function(){a.updateCurrentLayout()};this.rowIsRemoved=function(){a.updateCurrentLayout()};this.objIsRemoved=function(){a.updateCurrentLayout()};a.columnList=[];a.columnFilterList=[];a.completeColumnList=[];a.currentColumnList=[];a.maxColumnLevels=0;a.relatedColumns=
[];a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var Vc=function(b,d){if(b&&0!=b.length)for(var c=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&(a.maxColumnLevels<d&&(a.maxColumnLevels=d),Vc(b[c][a.options.columnFields.columns],d+1))},M=function(b){var d=0;if(!b[a.options.columnFields.columns]||0==b[a.options.columnFields.columns].length)return 1;for(var c=0;c<b[a.options.columnFields.columns].length;c++)d+=M(b[a.options.columnFields.columns][c]);return d};this.isColumnWithChildenVisible=
function(b){var d=!1;if(b&&(d=a.isColumnVisible(b))&&(b=b[a.options.columnFields.columns])&&0<b.length){for(var c=d=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&d++;d=0<d?!0:!1}return d};var Da=function(b,d,c){if(b)for(var r=0;r<b.length;){if(a.isColumnWithChildenVisible(b[r])){c&&(b[r][a.options.columnFields.pid]=c);var f={colSpan:b[r][a.options.columnFields.columns]?M(b[r]):0,column:b[r],isRoot:0==d?!0:!1,rowSpan:b[r][a.options.columnFields.columns]&&0!=b[r][a.options.columnFields.columns].length?
0:a.maxColumnLevels-d};a.completeColumnList[d].push(f);Da(b[r][a.options.columnFields.columns],d+1,b[r][a.options.columnFields.id])}r++}};this.updateColumnCompleteList=function(){Vc(a.currentColumnList,1);for(var b=1;b<=a.maxColumnLevels;b++)a.completeColumnList.push([]);Da(a.currentColumnList,0)};var P=function(b){b.type="column";b[a.options.columnFields.id]||(b[a.options.columnFields.id]=k.getUniqueId());if(a.isColumnWithChildenVisible(b))if(b[a.options.columnFields.columns])for(var d=0;d<b[a.options.columnFields.columns].length;d++)P(b[a.options.columnFields.columns][d]);
else d=(d=b[a.options.columnFields.filterParams])?sc.createTree(d.conditions,d.formula):null,a.columnFilterList.push({cid:b[a.options.columnFields.id],tree:d}),a.columnList.push(b)};this.updateColumnList=function(){a.columnList.length=0;a.columnFilterList.length=0;a.completeColumnList.length=0;a.currentColumnList.length=0;a.maxColumnLevels=0;a.relatedColumns.length=0;a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var b=a.columnsObj.getList();if(b){for(var d=0;d<b.length;d++){var c=b[d];
c.type="column";c[a.options.columnFields.id]||(c[a.options.columnFields.id]=k.getUniqueId());if(a.isColumnWithChildenVisible(c))switch(a.currentColumnList.push(c),c[a.options.columnFields.fixed]){case "left":a.isThereLeftFixedColumns||(a.isThereLeftFixedColumns=!0);break;case "right":a.isThereRightFixedColumns||(a.isThereRightFixedColumns=!0)}}a.updateColumnCompleteList();for(d=0;d<a.currentColumnList.length;d++)P(a.currentColumnList[d])}b=a.columnRelationsObj.getList();C(b)};var C=function(b,d){if(b)for(var c=
0;c<b.length;c++)a.isRootColumn(b[c].column)&&(b[c].id||(b[c].id=k.getUniqueId()),d&&(b[c].pid=d),a.relatedColumns.push(b[c]),b[c].children&&C(b[c].children,b[c].id))};this.isRootColumn=function(b){var d=!1;if(b&&a.completeColumnList&&0<a.completeColumnList.length)for(var c=0;c<a.completeColumnList[0].length;c++){var t=a.completeColumnList[0][c].column;if(t==b||k.isEqual(t[a.options.columnFields.id],b[a.options.columnFields.id])){d=!0;break}}return d};this.isColumnRelated=function(b){var d=!1;if(b&&
a.relatedColumns)for(var c=0;c<a.relatedColumns.length;c++){var t=a.relatedColumns[c].column;if(t&&(t==b||k.isEqual(t[a.options.columnFields.id],b[a.options.columnFields.id]))){d=!0;break}}return d};this.getColumnRelatedObject=function(b){for(var d=null,c=0;c<a.relatedColumns.length;c++){var t=a.relatedColumns[c];if(t.column&&(t.column==b||k.isEqual(t.column[a.options.columnFields.id],b[a.options.columnFields.id]))){d=t;break}}return d};this.isTherePrevRelatedColumn=function(b){var d=a.relatedColumns.indexOf(b);
return 0<d&&(a.relatedColumns[d-1].id==b.pid||b.pid&&b.pid==a.relatedColumns[d-1].pid)?!0:!1};this.isThereNextRelatedColumn=function(b){var d=a.relatedColumns.indexOf(b);return 0<=d&&d<a.relatedColumns.length-1&&(b.children&&0<b.children.length||b.pid&&b.pid==a.relatedColumns[d+1].pid)?!0:!1};var cb=function(b){for(var d=null,c=0;c<a.columnFilterList.length;c++)if(a.columnFilterList[c].cid==b){d=a.columnFilterList[c].tree;break}return d},Ka=function(b,d){if(0==b[a.options.rowFields.visible])return!1;
if(0==a.options.allowFilter)return!0;var c=!0;if(b)for(var t,f,g,k=0;k<b[a.options.rowFields.cells].length;k++){c=!0;g=b[a.options.rowFields.cells][k];t=g[a.options.cellFields.cid];f=a.getColumnById(t);!f&&k<a.columnList.length&&(f=a.columnList[k]);if(f&&f[a.options.columnFields.filterParams]){f=f[a.options.columnFields.filterParams];var m=g[a.options.cellFields.value]?g[a.options.cellFields.value]:g[a.options.cellFields.text];if(f)if(f.callback)c=f.callback(m,g,b);else if(c=sc.match(m,f.conditions,
f.formula,cb(t),f.caseSensitive),!c&&f.allowParent&&(c=!1,t=b[a.options.rowFields.rows]))for(g=0;g<t.length&&!(c=Ka(t[g],flag));g++);}if(!c)break}return c},ra=a.options.indent;a.currentPageList=[];a.pageList=[];a.onlyCurrentPage=!1;a.currentList=[];a.fullIndentList=[];a.fullList=[];a.indentList=[];a.longestRow=null;a.isThereChildRows=!1;a.pageRowCount=0;a.pageNumber=0;a.currentPageNumber=1;a.currentTopList=[];a.currentBottomList=[];this.isThereVisibleChildren=function(b){var d=!1;if(b&&(b=b[a.options.rowFields.rows])&&
0<b.length)for(var c=0;c<b.length;c++)if(Ka(b[c])&&!a.isRowFixed(b[c])){d=!0;break}return d};var hb=function(b,d,c,t){b.type="row";b[a.options.rowFields.id]||(b[a.options.rowFields.id]=k.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var r=b[a.options.rowFields.cells];if(r&&0<r.length){c=Ka(b,t);for(var f,g,m,n=0;n<a.columnList.length;n++){m=a.columnList[n];f=m[a.options.columnFields.id];g=m[a.options.columnFields.editorType];m=m[a.options.columnFields.editorSettings];var q=n;f&&(q=a.getCellIndexById(r,
n,f));0<=q&&q<r.length&&(r[q].type="cell",r[q][a.options.cellFields.rid]=b[a.options.rowFields.id],a.setDefaultCellValue(r[q],g,m))}}if(c)if(t)a.fullList.push(b),a.fullIndentList.push(d);else if(a.options.paging.enabled)a.onlyCurrentPage?a.currentPageList.push({row:b,indent:d}):(b[a.options.rowFields.pid]||a.pageRowCount++,a.pageRowCount>a.options.paging.pageSize&&(a.pageRowCount=1,a.pageNumber++,a.pageList.push([])),a.pageList[a.pageNumber].push({row:b,indent:d}));else switch(b[a.options.rowFields.fixed]){case "top":a.currentTopList.push(b);
break;case "bottom":a.currentBottomList.push(b);break;default:a.currentList.push(b),a.indentList.push(d)}return c},ib=function(b,d,c,t){if(!b[a.options.rowFields.rows])return c=hb(b,d,c,t);if((c=hb(b,d,c,t))&&!a.isRowFixed(b)){var r=0,f;if(t||a.isRowExpanded(b)){var g=b[a.options.rowFields.rows];if(g){a.applySorting(g);for(var k=0;k<g.length;k++)(f=ib(g[k],d+ra,b[a.options.rowFields.id],t))&&r++}}t||a.isThereChildRows||!(0<r||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&
a.isThereVisibleChildren(b))||(a.isThereChildRows=!0)}return c};this.getFullList=function(){a.fullList.length=0;a.fullIndentList.length=0;for(var b=a.rowsObj.getList(),d=0;d<b.length;d++)ib(b[d],0,null,!0);return a.fullList};this.getCurrentList=function(){return a.currentList};this.updateCurrentList=function(){a.currentList.length=0;a.indentList.length=0;a.currentTopList.length=0;a.currentBottomList.length=0;ra=a.options.indent;if(a.options.paging.enabled){if(1<=a.currentPageNumber&&a.currentPageNumber<=
a.pageList.length)for(var b=0;b<a.pageList[a.currentPageNumber-1].length;b++)a.currentList.push(a.pageList[a.currentPageNumber-1][b].row),a.indentList.push(a.pageList[a.currentPageNumber-1][b].indent)}else{a.isThereChildRows=!1;var d=a.rowsObj.getList();if(d)for(a.applySorting(d),b=0;b<d.length;b++)ib(d[b],0,null,!1)}};this.isRowFixed=function(b){return!b||"top"!=b[a.options.rowFields.fixed]&&"bottom"!=b[a.options.rowFields.fixed]?!1:!0};this.updateCurrentPageList=function(){a.currentPageList.length=
0;a.isThereChildRows=!1;a.onlyCurrentPage=!0;ra=a.options.indent;if(1<a.currentPageNumber){var b=a.pageList[a.currentPageNumber-1];if(b&&0<b.length){a.applySorting(b);for(var d=0;d<b.length;d++)ib(b[d],0,null,!1)}a.pageList[a.currentPageNumber-1]=a.currentPageList}a.onlyCurrentPage=!1};this.updatePageList=function(){a.pageList.length=0;a.pageRowCount=0;a.pageNumber=0;a.isThereChildRows=!1;ra=a.options.indent;var b=a.rowsObj.getList();if(b&&0<b.length){a.applySorting(b);a.pageList.push([]);for(var d=
0;d<b.length;d++)ib(b[d],0,null,!1);0<a.pageList.length&&0==a.pageList[a.pageList.length-1].length&&a.pageList.splice(a.pageList.length-1,1)}};this.columnEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearColumns?c.events.clearColumns({parent:a.e.parent}):c.clearColumns(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.columnAdded?c.events.columnAdded({column:a.e.column}):c.columnAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.columnAdding?
c.events.columnAdding({column:a.e.column}):c.columnAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.columnRemoved?c.events.columnRemoved({column:a.e.column}):c.columnRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.columnRemoving?c.events.columnRemoving({column:a.e.column}):c.columnRemoving(a)}};this.rowEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearRows?c.events.clearRows({parent:a.e.parent}):c.clearRows(a)},
objAdded:function(a){return angular.isDefined(c.events)&&c.events.rowAdded?c.events.rowAdded({row:a.e.row}):c.rowAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.rowAdding?c.events.rowAdding({row:a.e.row}):c.rowAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.rowRemoved?c.events.rowRemoved({row:a.e.row}):c.rowRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.rowRemoving?c.events.rowRemoving({row:a.e.row}):c.rowRemoving(a)}};
this.getRowFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",pid:a.pid?a.pid:"pid",objects:a.rows?a.rows:"rows",subobjects:a.cells?a.cells:"cells",text:a.text?a.text:"text"}};a.columnsObj=new V({objects:c.columns,events:a.columnEvents,fields:a.options.columnFields});a.rowsObj=new V({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.columnRelationsObj=new V({objects:c.columnRelations,fields:a.options.columnFields});
c.$on(c.name+"-load-data",function(b,d,c,t,f){a.loadData(d,c,t,f)});c.$on(c.name+"-export-json",function(b,d,c,t,f){m.setTempData(a.exportToJSON(d,c,t,f))});this.exportToJSON=function(b,d,c,t){var r=t;r=r?r:null;var f=a.columnsObj.getList();b=JSON.stringify(f,b?b:[a.options.columnFields.allowDrag,a.options.columnFields.allowDrop,a.options.columnFields.allowFilter,a.options.columnFields.cellTemplateUrl,a.options.columnFields.columns,a.options.columnFields.contentAlignment,a.options.columnFields.contextMenu,
a.options.columnFields.editorType,a.options.columnFields.editorSettings,a.options.columnFields.editorTemplate,a.options.columnFields.filterParams,a.options.columnFields.filterTemplate,a.options.columnFields.fixed,a.options.columnFields.fixedWidth,a.options.columnFields.footerAlignment,a.options.columnFields.footerContent,a.options.columnFields.footerTemplate,a.options.columnFields.footerTooltip,a.options.columnFields.footerText,a.options.columnFields.headerAlignment,a.options.columnFields.headerContent,
a.options.columnFields.headerTemplate,a.options.columnFields.headerText,a.options.columnFields.headerTooltip,a.options.columnFields.icon,a.options.columnFields.id,a.options.columnFields.pid,a.options.columnFields.selected,a.options.columnFields.style,a.options.columnFields.templateSettings,a.options.columnFields.visible,a.options.columnFields.width],r);t=t?t:null;r=!1!==c?a.getFullList():a.rowsObj.getList();d=d?d:[a.options.rowFields.allowCellFocus,a.options.rowFields.allowDrag,a.options.rowFields.allowDrop,
a.options.rowFields.allowFocus,a.options.rowFields.cells,a.options.rowFields.content,a.options.rowFields.contextMenu,a.options.rowFields.enabled,a.options.rowFields.expanded,a.options.rowFields.fixed,a.options.rowFields.hasChildren,a.options.rowFields.icon,a.options.rowFields.id,a.options.rowFields.pid,a.options.rowFields.selected,a.options.rowFields.statusIcon,a.options.rowFields.style,a.options.rowFields.text,a.options.rowFields.tooltip,a.options.rowFields.visible,a.options.cellFields.rid];0==c&&
d.push(a.options.rowFields.rows);c=JSON.stringify(r,d,t);return'[\n{ "columns": '+b+' },\n{ "rows": '+c+" }\n]"};this.loadData=function(b,d,r,t){a.suspendLayout();a.updateDataFields(r);var f=[],g=a.options.rowFields;a.rowsObj.clear(d,a.rowsAreCleared);if(b)if(!1!==t){var k=[];b.forEach(function(a,b){a[g.rows]=[];var d=a[g.pid];k[d]?(k[d][g.rows]||(k[d][g.rows]=[]),k[a[g.id]]=a,k[d][g.rows].push(a)):(k[a[g.id]]=a,f.push(a))});k.length=0}else f=b;if(d)for(d[a.options.rowFields.rows]=f,b=0;b<d[a.options.rowFields.rows].length;b++)d[a.options.rowFields.rows][b][a.options.rowFields.pid]=
d[a.options.rowFields.id];else if(angular.isDefined(c.rows))for(b=c.rows.length=0;b<f.length;b++)c.rows.push(f[b]);a.rowsObj=new V({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.resumeLayout()};this.updateData=function(){a.options.rowFields.dataSource&&(a.loadData(a.options.rowFields.dataSource),a.rowsObj=new V({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))};var F=!1;this.dragDropStatus=function(a){if(void 0!=a)F=a;else return F};
this.getDnDSource=function(a){return{text:a.dataTransfer?a.dataTransfer.getData("text"):a.originalEvent.dataTransfer?a.originalEvent.dataTransfer.getData("text"):""}};this.getTouchData=function(a){return a.changedTouches?a.changedTouches:a.originalEvent?a.originalEvent.changedTouches:null};var Wc=angular.element('<div class="iui-drop-marker" data-element="dropmark"></div>');this.getDropMarkLine=function(){return dropMarkLine};a.getMousePos=function(a){return{x:a.pageX?a.pageX:a.originalEvent?a.originalEvent.pageX:
0,y:a.pageY?a.pageY:a.originalEvent?a.originalEvent.pageY:0}};this.getCtrlName=function(){return angular.isDefined(c.name)?c.name:""};f.bind("dragenter",function(b){b.preventDefault();if(a.options.enabled){var d=q.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragEnter(b)}});f.bind("dragover",function(b){b.preventDefault();if(a.options.enabled&&
a.isDropInRange(b)){var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d)if(b.dataTransfer?b.dataTransfer.dropEffect=a.options.allowDrop?"move":"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=a.options.allowDrop?"move":"none"),d=q.getData(),d.source||(d.source=a.getDnDSource(b)),q.setData({source:d.source,sourceCtrl:d.sourceCtrl,
target:null,dropPos:-1}),d={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)},0==a.callDragOver(d))b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark();else{d=a.getMousePos(b);b=d.y+16;d=d.x+20;var r=a.getDropMarkWindow();r.empty();r.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+
(c.name?c.name:"TreeGrid")+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:d});a.dropMark(!0)}}else a.dropMark(),b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none")});f.bind("drop",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();if(a.isDropInRange(b)){var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===
b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d&&(d=q.getData(),d.source||(d.source=a.getDnDSource(b)),d.source)){var r={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)};!1!==a.callDragDrop(r)&&(a.drop(d),c.$$phase||c.$apply())}}q.clearData()}b.stopPropagation()});f.bind("dragleave",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();
var d=q.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragLeave(b)}a.cancelScrollTimer()});f.bind("dragend",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),q.getData().source||q.clearData(),a.dragDropStatus(!1))});f.bind("mouseleave",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),a.hoverColumn=null,a.hoverRow=
null,a.hoverCell=null)});this.containsMousePos=function(a,d){return q.hitTest(a,d,{left:0,top:0,right:f[0].clientWidth,bottom:f[0].clientHeight})};this.isPopupActive=function(){return!1};var Eb=function(b,d){var c=a.options.rowFields;if(!b[c.cells]){b[c.cells]=[];var t={};t[a.options.cellFields.text]=b[d.text];b[c.cells].push(t)}b[c.rows]||(b[c.rows]=[]);b[c.rows].length=0;if(b[d.items]&&0<b[d.items].length)for(t=0;t<b[d.items].length;t++)b[c.rows].push(Eb(b[d.items][t],d));return b},N=function(b,
d){var c=!1;d.sourceCtrl&&(c=d.sourceCollection.removeAt(b,-1,null,d.sourceCtrl.objIsRemoved));c&&("item"==b.type&&(b=Eb(b,d.sourceCtrl.options.dataFields)),0===d.dropPos?a.rowsObj.insertAt(b,-1,d.target,a.rowIsAdded):1===d.dropPos||2===d.dropPos?1===d.dropPos?a.rowsObj.insertByRef(b,d.target,!1,a.rowIsAdded):a.rowsObj.insertByRef(b,d.target,!0,a.rowIsAdded):a.rowsObj.insertAt(b,-1,null,a.rowIsAdded))};this.setDropSelection=function(b,d){var c=b;!c&&0<=d&&d<a.currentList.length&&(c=a.currentList[d]);
a.clearPrevSelection(c);a.rowSelection(c)};this.drop=function(b){if(b&&b.sourceCtrl){b.sourceCtrl.suppressProcess=!0;a.allowUpdate=!1;b.sourceCtrl.allowUpdate=!1;var d=b.source,c=-1;if(Array.isArray(b.source)){0<b.source.length&&(c=b.sourceCtrl.getObjCurrentIndex(b.source[b.source.length-1]));for(var t=[],f=0;f<b.source.length;f++){for(var g=!1,k=b.sourceCollection.getParent(b.source[f]);k;){if(b.sourceCtrl.isObjInSelList(k)){g=!0;break}k=b.sourceCollection.getParent(k)}g||t.push(b.source[f])}if(0<
t.length)if(d=t[t.length-1],f=b.sourceCtrl.getObjCurrentIndex(t[0]),g=b.sourceCtrl.getObjCurrentIndex(d),f<=g)for(f=0;f<t.length;f++)N(t[f],b);else for(f=t.length-1;0<=f;f--)N(t[f],b)}else c=b.sourceCtrl.getObjCurrentIndex(b.source),N(b.source,b);b.sourceCtrl!==a?(a.allowUpdate=!0,b.sourceCtrl.allowUpdate=!0,a.updateCurrentLayout(),b.sourceCtrl.updateCurrentLayout()):(a.allowUpdate=!0,a.updateCurrentLayout());a.updateAutoLayout();b.sourceCtrl.multiSelection(!1);var m=n(function(){b.sourceCtrl!==a&&
b.sourceCtrl.setDropSelection(null,c);a.setDropSelection(d);a.updateFocus(a.getObjCurrentIndex(d),0);n.cancel(m)},1);b.sourceCtrl.suppressProcess=!1}};this.isDragAllowed=function(b){return a.options.allowDrag?b&&(b[a.options.rowFields.allowDrag]||void 0===b[a.options.rowFields.allowDrag])?!0:!1:!1};this.isChildOf=function(b,d){var c=!1;if(b&&d){var f=d[a.options.rowFields.rows];if(f&&0<f.length)for(var g=0;g<f.length;g++){if(k.isEqual(b[a.options.rowFields.id],f[g][a.options.rowFields.id])){c=!0;
break}else c=a.isChildOf(b,f[g]);if(c)break}}return c};this.isParentOf=function(b,d){var c=a.rowsObj.getParent(d);return b&&d&&c&&k.isEqual(b[a.options.rowFields.id],c[a.options.rowFields.id])?!0:!1};this.isDropAllowed=function(b,d,c){var r=a.options.allowDrop;if(r&&b&&d&&(r=a.isRowFixed(d)||!d[a.options.rowFields.allowDrop]&&void 0!==d[a.options.rowFields.allowDrop]?!1:!0))if(Array.isArray(b))for(var f=0;f<b.length;f++){if(k.isEqual(b[f][a.options.rowFields.id],d[a.options.rowFields.id])||0===c&&
a.isParentOf(d,b[f])||a.isChildOf(d,b[f])){r=!1;break}if(!r)break}else if(k.isEqual(b[a.options.rowFields.id],d[a.options.rowFields.id])||0===c&&a.isParentOf(d,b)||a.isChildOf(d,b))r=!1;return r};this.getDropMarkWindow=function(){for(var a=Wc,d=angular.element(document.body).children(),c=0;c<d.length;c++){var f=angular.element(d[c]);if(f[0].attributes&&f[0].attributes["data-element"]&&"dropmark"===f[0].attributes["data-element"].value){a=f;break}}return a};this.dropMark=function(b,d){d||(d=a.getDropMarkWindow());
if(d){var c="none";this.options.allowDrop&&(c=b?"block":"none");angular.element(d).css("display",c)}};this.updateDropMarkElem=function(a,d){a&&d&&(a.css("top",d.top+"px"),a.css("left",d.left+"px"),a.css("width",d.width+"px"))};c.$on(c.name+"-open-editor",function(b,d){a.openEditor(d)});c.$on(c.name+"-close-editor",function(b,d){a.closeEditor(d)});this.updateEditorSettings=function(b){a.options.editorSettings=b?{activate:k.isFieldAvailable(b.activate,"click")}:{activate:"click"}};this.allowEvents=
!0;this.callAfterCollapse=function(a){angular.isDefined(c.events)&&c.events.afterCollapse&&c.events.afterCollapse({row:a});c.afterCollapse({e:{row:a}})};this.callAfterExpand=function(a){angular.isDefined(c.events)&&c.events.afterExpand&&c.events.afterExpand({row:a});c.afterExpand({e:{row:a}})};this.callAfterEdit=function(a){angular.isDefined(c.events)&&c.events.afterEdit&&c.events.afterEdit({cell:a});c.afterEdit({e:{cell:a}})};this.callAfterLabelEdit=function(a){angular.isDefined(c.events)&&c.events.afterLabelEdit&&
c.events.afterLabelEdit({cell:a});c.afterLabelEdit({e:{cell:a}})};this.callAfterSelect=function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({object:a}):c.afterSelect({e:{object:a}});angular.isDefined(c.events)&&c.events.selectionChanged?c.events.selectionChanged({object:a}):c.selectionChanged({e:{object:a}})};this.callBeforeCollapse=function(a){return angular.isDefined(c.events)&&c.events.beforeCollapse?c.events.beforeCollapse({row:a}):c.beforeCollapse({e:{row:a}})};
this.callBeforeExpand=function(a){return angular.isDefined(c.events)&&c.events.beforeExpand?c.events.beforeExpand({row:a}):c.beforeExpand({e:{row:a}})};this.callBeforeEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeEdit?c.events.beforeEdit({cell:a}):c.beforeEdit({e:{cell:a}})};this.callBeforeLabelEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeLabelEdit?c.events.beforeLabelEdit({cell:a}):c.beforeLabelEdit({e:{cell:a}})};this.callCellValueChanging=function(b,
d,r){var f=!0;a.allowEvents&&(f=angular.isDefined(c.events)&&c.events.cellvalueChanging?c.events.cellvalueChanging({row:b,cell:d,value:r}):c.cellvalueChanging({e:{row:b,cell:d,value:r}}));return f};this.callCellValueChanged=function(b,d,r){a.allowEvents&&(angular.isDefined(c.events)&&c.events.cellvalueChanged?c.events.cellvalueChanged({row:b,cell:d,value:r}):c.cellvalueChanged({e:{row:b,cell:d,value:r}}))};this.callChange=function(){angular.isDefined(c.events)&&c.events.change?c.events.change():c.change()};
this.callColumnClick=function(a,d){angular.isDefined(c.events)&&c.events.columnClick&&c.events.columnClick({column:a,mousePos:d});c.columnClick({e:{column:a,mousePos:d}})};this.callColumnDblClick=function(a,d){angular.isDefined(c.events)&&c.events.columnDblclick&&c.events.columnDblclick({column:a,mousePos:d});c.columnDblclick({e:{column:a,mousePos:d}})};this.callColumnHover=function(a){angular.isDefined(c.events)&&c.events.columnHover&&c.events.columnHover({column:a});c.columnHover({e:{column:a}})};
this.callColumnPosChanging=function(a,d){return angular.isDefined(c.events)&&c.events.columnPoschanging?c.events.columnPoschanging({sourceColumn:a,targetColumn:d}):c.columnPoschanging({e:{sourceColumn:a,targetColumn:d}})};this.callColumnPosChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnPoschanged&&c.events.columnPoschanged({sourceColumn:a,targetColumn:d});c.columnPoschanged({e:{sourceColumn:a,targetColumn:d}})};this.callColumnRightClick=function(a,d){angular.isDefined(c.events)&&
c.events.columnRightclick&&c.events.columnRightclick({column:a,mousePos:d});c.columnRightclick({e:{column:a,mousePos:d}})};this.callColumnSizeChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnSizechanged&&c.events.columnSizechanged({column:a});c.columnSizechanged({e:{column:a}})};this.callDragEnter=function(a){angular.isDefined(c.events)&&c.events.dragEnter?c.events.dragEnter({event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}):
c.dragEnter({e:{event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callDragOver=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragOver?c.events.dragOver({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragOver({e:{event:b.event,
sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragDrop=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragDrop?c.events.dragDrop({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):
c.dragDrop({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragLeave=function(a){angular.isDefined(c.events)&&c.events.dragLeave?c.events.dragLeave({event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragLeave({e:{event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,
targetRow:a.targetRow,mousePos:a.mousePos}})};this.callCellClick=function(a,d,r,f){angular.isDefined(c.events)&&c.events.cellClick&&c.events.cellClick({event:a,row:d,cell:r,mousePos:f});c.cellClick({e:{event:a,row:d,cell:r,mousePos:f}})};this.callCellDblClick=function(a,d,r){return angular.isDefined(c.events)&&c.events.cellDblClick?c.events.cellDblClick({row:a,cell:d,mousePos:r}):c.cellDblclick({e:{row:a,cell:d,mousePos:r}})};this.callCellHover=function(a,d){angular.isDefined(c.events)&&c.events.cellHover?
c.events.cellHover({event:a,cell:d}):c.cellHover({e:{event:a,cell:d}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&c.events.enabledChanged?c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callRowClick=function(a,d,r){angular.isDefined(c.events)&&c.events.rowClick?c.events.rowClick({event:a,row:d,mousePos:r}):c.rowClick({e:{event:a,row:d,mousePos:r}})};this.callRowDblClick=function(a,d){return angular.isDefined(c.events)&&c.events.rowDblClick?c.events.rowDblClick({row:a,
mousePos:d}):c.rowDblclick({e:{row:a,mousePos:d}})};this.callRowHover=function(a,d){angular.isDefined(c.events)&&c.events.rowHover?c.events.rowHover({event:a,row:d}):c.rowHover({e:{event:a,row:d}})};this.callRowRightClick=function(a,d){angular.isDefined(c.events)&&c.events.rowRightClick&&c.events.rowRightClick({row:a,mousePos:d});c.rowRightclick({e:{row:a,mousePos:d}})};this.callKeyDown=function(a,d){angular.isDefined(c.events)&&c.events.keyDown?c.events.keyDown({event:a,row:d}):c.keyDown({e:{event:a,
row:d}})};this.callKeyPress=function(a,d){angular.isDefined(c.events)&&c.events.keyPress?c.events.keyPress({event:a,row:d}):c.keyPress({e:{event:a,row:d}})};this.callKeyUp=function(a,d){angular.isDefined(c.events)&&c.events.keyUp?c.events.keyUp({event:a,row:d}):c.keyUp({e:{event:a,row:d}})};this.callScrollPosChanged=function(){angular.isDefined(c.events)&&c.events.scrollPosChanged?c.events.scrollPosChanged({scrollPos:a.scrollPos}):c.scrollposChanged({e:{scrollPos:a.scrollPos}})};f.bind("click",function(b){a.options.enabled&&
1===b.which&&a.callRowClick(b,null,a.getMousePos(b))});f.bind("dblclick",function(b){b.preventDefault();a.options.enabled&&1===b.which&&a.callRowDblClick(null,a.getMousePos(b));b.stopPropagation()});f.bind("mousedown",function(b){a.options.enabled&&3===b.which&&a.callRowRightClick(null,a.getMousePos(b));a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b.stopPropagation()});this.expandList=[];this.expandIndentList=[];var Xb=function(b,d,c){b.type="row";b[a.options.rowFields.id]||(b[a.options.rowFields.id]=
k.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var r=b[a.options.rowFields.cells];if(r&&0<r.length){c=Ka(b);for(var f,g,m,n=0;n<a.columnList.length;n++){m=a.columnList[n];f=m[a.options.columnFields.id];g=m[a.options.columnFields.editorType];m=m[a.options.columnFields.editorSettings];var q=n;f&&(q=a.getCellIndexById(r,n,f));0<=q&&q<r.length&&(r[q].type="cell",a.setDefaultCellValue(r[q],g,m))}}c&&(a.expandList.push(b),a.expandIndentList.push(d));return c},D=function(b,d,c){if(!b[a.options.rowFields.rows])return c=
Xb(b,d+ra,c);if(c=Xb(b,d+ra,c)){var r=0,f;if(a.isRowExpanded(b)){var g=b[a.options.rowFields.rows];if(g){a.applySorting(g);for(var k=0;k<g.length;k++)(f=D(g[k],d+ra,b[a.options.rowFields.id]))&&r++}}!a.isThereChildRows&&(0<r||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(a.isThereChildRows=!0)}return c};this.expand=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(!a.isRowExpanded(b)){var d=a.getRowCurrentIndex(b);
if(b=a.getList(b)){a.applySorting(b);for(var c=0;c<b.length;c++)D(b[c],a.indentList[d],null)}if(0<a.expandList.length){a.allowEvents=!1;d++;Array.prototype.splice.apply(a.currentList,[d,0].concat(a.expandList));Array.prototype.splice.apply(a.indentList,[d,0].concat(a.expandIndentList));a.options.autoSize?a.updateAutoLayout():a.getRowScope()?a.updateView():a.updateLayout();var f=n(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();n.cancel(f);a.allowEvents=
!0},1)}}};this.collapse=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(a.isRowExpanded(b)){var d=null,c=!1,f=b,g=-1,k=a.getRowCurrentIndex(b);for(b=a.getParent(b);b&&!c;){d=a.getList(b);for(g=d.indexOf(f)+1;!c&&g<d.length;)f=d[g],0<a.getRowCurrentIndex(f)&&(c=!0),g++;c||(f=b);b=a.getParent(b)}if(!c&&f)for(d=a.getList(),g=d.indexOf(f)+1;g<d.length;)if(f=d[g],0<a.getRowCurrentIndex(f)){c=!0;break}else g++;k++;d=a.currentList.length-k;c&&(d=a.getRowCurrentIndex(f)-k);if(0<d){a.currentList.splice(k,
d);a.indentList.splice(k,d);a.options.autoSize?a.updateAutoLayout():a.getRowScope()?a.updateView():a.updateLayout();var m=n(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();n.cancel(m);a.allowEvents=!0},1)}}};this.toggle=function(b,d){if(b){if((b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0!=b[a.options.rowFields.rows].length)&&!(d&&0!=b[a.options.rowFields.expanded]||!1===d&&0==b[a.options.rowFields.expanded])){a.updateType="view";
var c=void 0!==d?d:!1!==b[a.options.rowFields.expanded]?!0:!1;!1!==(void 0!==d?d?a.callBeforeExpand(b):a.callBeforeCollapse(b):c?a.callBeforeCollapse(b):a.callBeforeExpand(b))&&(c=void 0!=d?d:!c,c!=b[a.options.rowFields.expanded]&&(0!=c?a.expand(b):a.collapse(b),b[a.options.rowFields.expanded]=c),a.isRowExpanded(b)?a.callAfterExpand(b):a.callAfterCollapse(b))}}else{c=a.getFullList();for(var f=0;f<c.length;f++)c[f][a.options.rowFields.expanded]=d;a.updateCurrentLayout()}};c.$on(c.name+"-collapse",
function(b,d){a.toggle(d,!1)});c.$on(c.name+"-expand",function(b,d){a.toggle(d,!0)});c.$on(c.name+"-expand-col-index",function(b,d){0<=d&&d<a.columnList.length&&(a.options.expandColIndex=d)});c.$on(c.name+"-toggle",function(b,d){a.toggle(d)});this.isFilteringAllowed=function(b){return b&&b[a.options.columnFields.allowFilter]};c.$on(c.name+"-filter",function(b,d,c){a.filter(d,c)});this.filter=function(b,d){if(b)b[a.options.columnFields.filterParams]=d;else for(var c=0;c<a.columnList.length;c++)a.columnList[c][a.options.columnFields.filterParams]=
null;a.closeFilterWindow();a.updateCurrentLayout();a.callChange()};this.callGotFocus=function(a,d,f,t,g){angular.isDefined(c.events)&&c.events.gotFocus?c.events.gotFocus({event:a,row:d,cell:f,edit:void 0!=t?!0:!1,editValue:g}):c.gotFocus({e:{event:a,row:d,cell:f,edit:void 0!=t?!0:!1,editValue:g}})};this.callLostFocus=function(a,d,f,t,g){angular.isDefined(c.events)&&c.events.lostFocus?c.events.lostFocus({event:a,row:d,cell:f,edit:void 0!=t?!0:!1,editValue:g}):c.lostFocus({e:{event:a,row:d,cell:f,edit:void 0!=
t?!0:!1,editValue:g}})};this.getTabIndex=function(){return f[0].attributes&&f[0].attributes.tabindex?f[0].attributes.tabindex.value:""};this.updateFocus=function(b,d){if(1==a.options.allowFocus)var c=n(function(){if(a.isRowIndexInRange(b)){var r="none";0<=d&&d<a.columnList.length&&(r=a.columnList[d][a.options.columnFields.fixed]);var g=a.getElemFromRow(a.currentList[b],r);g&&(1==a.options.allowCellFocus&&0<=d&&d<a.columnList.length?(r=a.getElemFromCell(b,d,r))&&r[0].focus():g[0].focus())}else f[0].focus();
n.cancel(c)},5)};c.$on(c.name+"-focus",function(b,d){if(d)switch(d.type){case "row":var c=a.getRowCurrentIndex(d);a.updateFocus(c);break;case "cell":c=a.getCellRowIndex(d);var f=a.getCellColumnIndex(d);a.updateFocus(c,f)}else a.updateFocus()});var E=!1;this.getCell=function(b,d,c){var f=a.currentList;switch(c){case "top":f=a.currentTopList;break;case "bottom":f=a.currentBottomList}return 0<=b&&b<f.length&&(b=f[b],c=a.getColumnRealIndex(d),0<=d&&d<a.columnList.length&&(c=a.getCellIndexById(b[a.options.rowFields.cells],
d,a.columnList[d].id)),b[a.options.rowFields.cells]&&0<=c&&c<b[a.options.rowFields.cells].length)?b[a.options.rowFields.cells][c]:null};this.getCellObject=function(b,d){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],f=a.getColumnRealIndex(d);0<=d&&d<a.columnList.length&&(f=a.getCellIndexById(c[a.options.rowFields.cells],d,a.columnList[d].id));if(c[a.options.rowFields.cells]&&0<=f&&f<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][f]}return null};this.getCellIndexById=
function(b,d,c){var f=-1;if(b){d=a.getColumnRealIndex(d);for(var r=0;r<b.length;r++)if(void 0==b[r][a.options.cellFields.cid]){f=d;break}else if(b[r][a.options.cellFields.cid]==c){f=r;break}}return f};this.getCellIndexFromRow=function(b,d){var c=-1;if(b&&d&&d[a.options.rowFields.cells])for(var f=0;f<d[a.options.rowFields.cells].length;f++)if(d[a.options.rowFields.cells][f]==b){c=f;break}return c};this.getCellColumnIndex=function(b){if(b)if(b[a.options.cellFields.cid]){if(b=a.getColumnById(b[a.options.cellFields.cid]))return a.getColumnCurrentIndex(b)}else return a.getCellColumnIndexFromRow(b);
return-1};this.getCellColumnIndexFromRow=function(b){if(b&&b[a.options.cellFields.rid]){var d=a.findRowById(b[a.options.cellFields.rid]);if(d&&(d=d[a.options.rowFields.cells])&&0<d.length)return d.indexOf(b)}return-1};this.getCellRowIndex=function(b){return b&&b[a.options.cellFields.rid]&&(b=a.findRowById(b[a.options.cellFields.rid]))?a.getRowCurrentIndex(b):-1};this.getColumnById=function(b){for(var d=null,c=0;c<a.columnList.length;c++)if(a.columnList[c][a.options.columnFields.id]==b){d=a.columnList[c];
break}return d};this.getColumnObject=function(b){return 0<=b&&b<a.columnList.length?a.columnList[b]:null};this.getRowObject=function(b){return 0<=b&&b<a.currentList.length?a.currentList[b]:null};this.isRowExpanded=function(b){return b?b[a.options.rowFields.expanded]||void 0===b[a.options.rowFields.expanded]?!0:!1:!0};this.getContentElement=function(a,d){var b=null;d||(d="cell-content");if(a&&0<a.children().length)for(var c=a.children(),f=0;f<c.length;f++){var g=angular.element(c.eq(f));if(g[0].attributes&&
g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==d){b=g;break}}return b};this.getElement=function(a,d){var b=null;d||(d="cell-content");if(a&&0<a.children().length){a=a.children().eq(0);for(var c=a.children(),f=0;f<c.length;f++){var g=angular.element(c.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==d){b=g;break}}}return b};this.getChildElement=function(a,d){var b=null;d||(d="content");if(a&&0<a.children().length)for(var c=
a.children(),f=0;f<c.length;f++){var g=angular.element(c.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==d){b=g;break}}return b};this.getElemFromColumn=function(b,d,c){var f=null;if(b){b=a.getColumnCurrentIndex(b);var r=a.getHeaderElem(d);"footer"==c&&(r=a.getFooterElem(d));if(r&&(d=r.find("td"))&&0<d.length)for(c=0;c<d.length;c++)if(r=angular.element(d[c]),r[0].attributes["data-index"]&&r[0].attributes["data-index"].value.toString()===b.toString()){f=
r;break}}return f};this.getElemFromRow=function(b,d,c){var f=null;if(b&&(b=a.getRowCurrentIndex(b,c),(d=a.getRowElems(d,c))&&0<d.length))for(c=0;c<d.length;c++){var r=angular.element(d[c]);if(r[0].attributes["data-index"]&&r[0].attributes["data-index"].value.toString()===b.toString()){f=r;break}}return f};this.getElemFromCell=function(b,d,c,f){var r=null;if(a.isRowIndexInRange(b,f)){switch(f){case "top":b=a.getElemFromRow(a.currentTopList[b],c,f);break;case "bottom":b=a.getElemFromRow(a.currentBottomList[b],
c,f);break;default:b=a.getElemFromRow(a.currentList[b],c,f)}if(b&&(b=b.find("td"))&&0<b.length)for(c=0;c<b.length;c++)if(f=angular.element(b[c]),f[0].attributes["data-index"]&&f[0].attributes["data-index"].value.toString()===d.toString()){r=f;break}}return r};this.getElemFromColumnCell=function(b,d,c,f,g){var r=null;b=a.getColumnCompleteIndex(b);if((d=c?a.getFooterElem(d):a.getHeaderElem(d))&&(d=d.find("td"))&&0<d.length)for(c=0;c<d.length;c++){var k=angular.element(d[c]);switch(f){case "column-expand-cell":k[0].attributes["data-element"]&&
k[0].attributes["data-element"].value.toString()==f&&k[0].attributes["data-level"]&&k[0].attributes["data-level"].value.toString()===b.level.toString()&&k[0].attributes["data-index"]&&k[0].attributes["data-index"].value.toString()===b.index.toString()&&(r=k);break;case "column-footer":k[0].attributes["data-index"]&&k[0].attributes["data-index"].value.toString()===g.toString()&&(r=k);break;default:k[0].attributes["data-level"]&&k[0].attributes["data-level"].value.toString()===b.level.toString()&&k[0].attributes["data-index"]&&
k[0].attributes["data-index"].value.toString()===b.index.toString()&&(r=k)}}return r};this.getIndent=function(b){var d=0;if(b)for(parent=a.rowsObj.getParent(b);parent;)d+=a.options.indent,parent=a.rowsObj.getParent(parent);return d};this.getObjState=function(b){if(b)switch(b.type){case "column":if(0==a.options.enabled)return"disabled";if(1==b[a.options.columnFields.selected])return"selected";if(b==a.hoverColumn)return"hovered";break;case "row":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";
if(1==b[a.options.rowFields.selected])return"selected";if(b==a.hoverRow)return"hovered";break;case "cell":if(0==a.options.enabled||0==b[a.options.cellFields.enabled])return"disabled";if(1==b[a.options.cellFields.selected])return"selected";if(b==a.hoverCell)return"hovered"}return"normal"};this.getColumnAt=function(b,d){if(void 0==b||void 0==d)return a.hoverColumn;var c=null;var f="left";for(var g=0;!c&&3>g;){if(f=a.getHeaderElem(f)){var m=f.find("td");if(m&&0<m.length)for(var n=0;n<m.length;n++){f=
angular.element(m[n]);var q=k.getPageRect(f);if(k.checkHit(b,d,q)){c=a.getColumnFromElem(f);break}}}g++;f=1==g?"right":"none"}return c};this.getCellAt=function(b,d){var c=null,f=a.getRowAt(b,d);if(f){var g=a.getElemFromRow(f).find("td");if(g&&0<g.length)for(var m=0;m<g.length;m++){var n=angular.element(g[m]);var q=k.getPageRect(n);if(k.checkHit(b,d,q)&&(c=a.getRowCurrentIndex(f),n=a.getIndexFromElem(n),c=a.getCellObject(c,n)))break}}return c};this.getRowAt=function(b,d){var c=null;var f="none";for(var g=
0;!c&&3>g;){var m=a.getRowElems(f);if(m&&0<m.length)for(var n=0;n<m.length;n++){f=angular.element(m[n]);var q=k.getPageRect(f);if(k.checkHit(b,d,q)){c=a.getRowFromElem(f);break}}g++;f=1==g?"left":"right"}return c};this.getRowCurrentIndex=function(b){if(b){switch(b[a.options.rowFields.fixed]){case "top":return a.currentTopList?a.currentTopList.indexOf(b):-1;case "bottom":return a.currentBottomList?a.currentBottomList.indexOf(b):-1}return a.currentList?a.currentList.indexOf(b):-1}return-1};this.getObjCurrentIndex=
function(b){return a.getRowCurrentIndex(b)};this.getRowFromChildElem=function(b){if(b&&(b=angular.element(b))){for(b=b.parent();b&&b[0].tagName&&"tr"!==b[0].tagName.toLowerCase();)b=b.parent();return b?a.getRowFromElem(b):null}return null};this.getColumnCompleteIndex=function(b){var d={level:-1,index:-1};if(b&&a.completeColumnList)for(var c=0;c<a.completeColumnList.length;c++){for(var f=0;f<a.completeColumnList[c].length;f++){var g=a.completeColumnList[c][f];if(g.column==b||k.isEqual(g.column[a.options.columnFields.id],
b[a.options.columnFields.id])){d={level:c,index:f};break}}if(0<=d.index)break}return d};this.getColumnCurrentIndex=function(b){return b&&a.columnList?a.columnList.indexOf(b):-1};this.getFullColumnList=function(){return a.columnsObj.getList()};this.getColumnRealIndex=function(b){var d=a.getFullColumnList();return 0<=b&&b<d.length&&b<a.columnList.length?d.indexOf(a.columnList[b]):-1};this.getColumnFromChildElem=function(b){return b?a.getColumnFromElem(b):null};this.getColumnFromElem=function(b){if(b&&
(b=angular.element(b))&&b[0].attributes["data-level"]&&b[0].attributes["data-index"]){var d=b[0].attributes["data-level"].value;b=b[0].attributes["data-index"].value;if(0<=d&&d<a.completeColumnList.length&&0<=b&&b<a.completeColumnList[d].length)return a.completeColumnList[d][b].column}return null};this.getIndexFromElem=function(a){return a&&(a=angular.element(a))&&a[0].attributes["data-index"]?a[0].attributes["data-index"].value:-1};this.getRowFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-index"]){var d=
b[0].attributes["data-index"].value,c="none";b&&b[0].attributes["data-fixed"]&&(c=b[0].attributes["data-fixed"].value);switch(c){case "top":if(a.isRowIndexInRange(d,c))return a.currentTopList[d];break;case "bottom":if(a.isRowIndexInRange(d,c))return a.currentBottomList[d];break;default:if(a.isRowIndexInRange(d))return a.currentList[d]}}};this.isColumnVisible=function(b){return b&&0!=b[a.options.columnFields.visible]?!0:!1};this.isColumnIndexInRange=function(b){return 0<=b&&b<a.columnList.length};
this.isRowIndexInRange=function(b,c){switch(c){case "top":return 0<=b&&b<a.currentTopList.length;case "bottom":return 0<=b&&b<a.currentBottomList.length}return 0<=b&&b<a.currentList.length};this.isColIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowEnabled=function(b){return b&&1==a.options.enabled&&k.isEnabled(b[a.options.rowFields.enabled])};this.mouseButtonStatus=function(a){E=a};c.$on(c.name+"-ensure-visible",function(b,c){a.ensureVisible(c)});c.$on(c.name+"-find-row-by-id",
function(b,c){m.setTempData(a.findRowById(c))});c.$on(c.name+"-find-row-by-path",function(b,c,f){m.setTempData(a.findRowByPath(c,f))});c.$on(c.name+"-find-row-by-text",function(b,c){m.setTempData(a.findRowByText(c))});c.$on(c.name+"-get-full-path",function(b,c){m.setTempData(a.getFullPath(c))});c.$on(c.name+"-get-cell-at",function(b,c){c?m.setTempData(a.getCellAt(c.x,c.y)):m.setTempData(null)});c.$on(c.name+"-get-row-at",function(b,c){c?m.setTempData(a.getRowAt(c.x,c.y)):m.setTempData(null)});c.$on(c.name+
"-get-row-level",function(b,c){m.setTempData(a.getLevel(c))});c.$on(c.name+"-get-row-parent",function(b,c){m.setTempData(a.getParent(c))});c.$on(c.name+"-get-flat-list",function(b,c){c?m.setTempData(a.getFullList()):m.setTempData(a.currentList)});c.$on(c.name+"-get-list",function(b,c){m.setTempData(a.getList(c))});c.$on(c.name+"-get-top-row",function(b){m.setTempData(a.getTopRow())});c.$on(c.name+"-set-top-row",function(b,c){a.ensureVisible(c)});this.ensureVisible=function(b,c){if(b){for(var d=[],
f=a.getParent(b);f;)d.push(f),f=a.getParent(f);for(f=d.length-1;0<=f;f--)d[f][a.options.rowFields.expanded]=!0;a.updateCurrentLayout();var g=n(function(){c=void 0!=c?c:"center";a.scrollTo(b,c);n.cancel(g)},100)}};this.findRowById=function(b){return a.rowsObj.findObjectById(b)};this.findRowByText=function(b){return a.rowsObj.findObjectByText(b)};this.findRowByPath=function(b,c){var d=null;c||(c=a.getFullList());for(var f=0;f<c.length;f++)if(a.getFullPath(c[f])==b){d=c[f];break}return d};this.getFullPath=
function(b){var c="";if(b)for(c=b[a.options.rowFields.text],b=a.getParent(b);b;)c=[b[a.options.rowFields.text],a.options.pathSeparator,c].join(""),b=a.getParent(b);return c};this.getLevel=function(a){var b=0;for(a=this.getParent(a);a;)b++,a=this.getParent(a);return b};this.getParent=function(b){return a.rowsObj.getParent(b)};this.getList=function(b){return a.rowsObj.getList(b)};this.findParentColumn=function(b){var c=null;if(b)for(var f=0;f<a.completeColumnList.length;f++){for(var g=0;g<a.completeColumnList[f].length;g++){var k=
a.completeColumnList[f][g].column;if(k[a.options.columnFields.id]&&b[a.options.columnFields.pid]&&k[a.options.columnFields.id].toString()===b[a.options.columnFields.pid].toString()){c=k;break}}if(c)break}return c};this.getParentColumn=function(b){return b?a.findParentColumn(b):null};this.getColumnLevel=function(b){var c=-1;if(b)for(var f=0;f<a.completeColumnList.length;f++){for(var g=0;g<a.completeColumnList[f].length;g++){var m=a.completeColumnList[f][g].column;if(m==b||k.isEqual(m[a.options.columnFields.id],
b[a.options.columnFields.id])){c=f;break}}if(0<=c)break}return c};this.getFirstRow=function(){for(var b=null,c=0;c<a.currentList.length;c++)if(k.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.getPrevRow=function(b){var c=null;if(0<=b&&b<a.currentList.length)for(--b;0<=b;b--)if(k.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getNextRow=function(b){var c=null;for(b+=1;b<a.currentList.length;b++)if(k.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=
a.currentList[b];break}return c};this.getLastRow=function(){for(var b=null,c=a.currentList.length-1;0<=c;c--)if(k.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.updateSelectionStatus=function(b){switch(b){case "shift":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}break;case "ctrl":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);
break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}}};f.bind("keydown",function(b){if(a.options.enabled)switch(b.keyCode){case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}});this.allowUpdate=!0;this.updateType="all";this.suspendLayout=function(b){a.allowUpdate=!1};this.resumeLayout=function(b){a.allowUpdate=!0;b?a.updateCurrentLayout():
a.updateLayout()};c.$on(c.name+"-refresh",function(b,c,f){a.refresh(c,f)});c.$on(c.name+"-resume-layout",function(b,c){a.resumeLayout(c)});c.$on(c.name+"-suspend-layout",function(b,c){a.suspendLayout(c)});c.$on(c.name+"-update-current-layout",function(b){a.updateCurrentLayout()});c.$on(c.name+"-update-layout",function(b,c){c?a.updateCurrentLayout():a.updateLayout()});c.$on(c.name+"-update-view",function(b){a.updateView()});c.$on(c.name+"-begin-load",function(b,c,f){c?(0>a.options.loadRows.indexOf(c)&&
a.options.loadRows.push(c),a.updateView()):a.beginLoad(f)});c.$on(c.name+"-end-load",function(b,c){a.endLoad(c)});this.callLoadComplete=function(a){angular.isDefined(c.events)&&c.events.loadComplete?c.events.loadComplete():c.loadComplete()};this.callUpdateComplete=function(){angular.isDefined(c.events)&&c.events.updateComplete?c.events.updateComplete():c.updateComplete()};c.$on(c.name+"-get-current-page",function(b){m.setTempData(a.currentPageNumber)});c.$on(c.name+"-set-current-page",function(b,
c){a.setCurrentPage(c)});c.$on(c.name+"-first-page",function(b){a.firstPage()});c.$on(c.name+"-last-page",function(b){a.lastPage()});c.$on(c.name+"-next-page",function(b){a.nextPage()});c.$on(c.name+"-prev-page",function(b){a.prevPage()});this.setCurrentPage=function(b){a.currentPageNumber!=b&&1<=b&&b<=a.pageList.length&&(a.currentPageNumber=b,a.updateCurrentLayout())};this.firstPage=function(){1!=a.currentPageNumber&&(a.currentPageNumber=1,a.updateCurrentLayout())};this.lastPage=function(){a.currentPageNumber!=
a.pageList.length&&(a.currentPageNumber=a.pageList.length,a.updateCurrentLayout())};this.nextPage=function(){a.currentPageNumber<a.pageList.length&&(a.currentPageNumber++,a.updateCurrentLayout())};this.prevPage=function(){1<a.currentPageNumber&&(a.currentPageNumber--,a.updateCurrentLayout())};c.$on(c.name+"-get-max-scroll-pos",function(b){m.setTempData(a.getMaxScrollPos())});c.$on(c.name+"-get-scroll-pos",function(b){m.setTempData(a.getScrollPos())});c.$on(c.name+"-set-scroll-pos",function(b,c){a.setScrollPos(c)});
c.$on(c.name+"-scroll-to",function(b,c,f){a.scrollTo(c,f)});var G=!1;this.shiftFirstSelectedRow=this.shiftFirstSelectedColumn=null;this.multiSelection=function(a){if(void 0!=a)G=a;else return G};this.columnSelection=function(b,d){if(b){var f=a.columnSelection(),g=!0,k=!0;k=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(g&&!1!==k)if(k=d&&(d.shiftKey||d.ctrlKey||d.metaKey)?!0:!1,g){(g=(g=!a.isColumnInSelList(b)||!k||d&&d.shiftKey)&&
!(a.isColumnInSelList(b)&&d&&3==d.which))&&(d&&d.shiftKey||!k)&&a.clearPrevColumnSelection();a.options.selectedColumn=b;if(d&&d.shiftKey){if(a.shiftFirstSelectedColumn||(a.shiftFirstSelectedColumn=f),g=a.getColumnCurrentIndex(a.shiftFirstSelectedColumn),f=a.getColumnCurrentIndex(b),g>f&&(k=g,g=f,f=k),a.isColumnIndexInRange(g)&&a.isColumnIndexInRange(f))for(;g<=f;g++)a.columnList[g][a.options.columnFields.selected]=!0,a.options.selectedColumns.push(a.columnList[g])}else k?(f=null===b[a.options.columnFields.selected]||
"undefined"===b[a.options.columnFields.selected]?!1:b[a.options.columnFields.selected],b[a.options.columnFields.selected]=!f,b[a.options.columnFields.selected]?a.isColumnInSelList(b)||a.options.selectedColumns.push(b):a.options.selectedColumns=a.options.selectedColumns.filter(function(a){return a!=b})):(b[a.options.columnFields.selected]=!0,a.isColumnInSelList(b)||a.options.selectedColumns.push(b)),a.shiftFirstSelectedColumn=null;angular.isDefined(c.selectedColumn)&&(c.selectedColumn=b);a.callAfterSelect(b);
a.refreshColumns()}else k?(f=null===b[a.options.columnFields.selected]||"undefined"===b[a.options.columnFields.selected]?!1:b[a.options.columnFields.selected],value&&"undefined"!==value&&(f=value),b[a.options.columnFields.selected]=!f,b[a.options.columnFields.selected]?a.isColumnInSelList(b)||a.options.selectedColumns.push(b):a.options.selectedColumns=a.options.selectedColumns.filter(function(a){return a!=b}),a.shiftFirstSelectedColumn=null,a.callAfterSelect(b),a.refreshColumns()):k||(k||1!=a.options.selectedColumns.length&&
a.isColumnInSelList(b)||a.clearPrevColumnSelection(b),a.shiftFirstSelectedColumn=null)}else return a.options.selectedColumn};this.clearPrevColumnSelection=function(b){for(var c=0;c<a.options.selectedColumns.length;c++)b&&!k.isEqual(a.options.selectedColumns[c][a.options.columnFields.id],b[a.options.columnFields.id])?a.options.selectedColumns[c][a.options.columnFields.selected]=!1:b||(a.options.selectedColumns[c][a.options.columnFields.selected]=!1);a.options.selectedColumns.length=0;b&&a.options.selectedColumns.push(b);
a.refreshColumns()};this.isColumnInSelList=function(b){var c=!1,f=a.options.selectedColumns;if(b&&f)for(var g=0;g<f.length;g++)if(k.isEqual(f[g][a.options.columnFields.id],b[a.options.columnFields.id])){c=!0;break}return c};this.updateColumnSelection=function(b,c){var d=c&&(c.shiftKey||c.ctrlKey||c.metaKey)?!0:!1;0<a.options.selectedColumns.length&&!d&&(a.clearPrevColumnSelection(),b[a.options.columnFields.selected]=!0,a.options.selectedColumns.push(b),a.callAfterSelect(b),a.refreshColumns())};this.isRowSelected=
function(a){return k.isSelected(a)};this.clearPrevSelection=function(b){for(var c=0;c<a.options.selectedRows.length;c++)b&&!k.isEqual(a.options.selectedRows[c][a.options.rowFields.id],b[a.options.rowFields.id])?a.options.selectedRows[c][a.options.rowFields.selected]=!1:b||(a.options.selectedRows[c][a.options.rowFields.selected]=!1);a.options.selectedRows.length=0;b&&0!=b[a.options.rowFields.enabled]&&a.options.selectedRows.push(b);a.refreshRows()};this.markSelColumn=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b])};
this.updateSelectionList=function(){for(var b=a.options.selectedRows.length-1;0<=b;)0==a.options.selectedRows[b][a.options.rowFields.enabled]&&a.options.selectedRows.splice(b,1),b--};this.rowSelection=function(b,d,f,g,m,n){if(b){if("none"!=a.options.selectionMode)if(a.isRowEnabled(b)){var r=a.rowSelection(),q=!0;r&&(q=!k.isEqual(r[a.options.rowFields.id],b[a.options.rowFields.id])||f||g);var t=!0;t=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});
if(!1!==t)if(f=d||f||g?!0:!1,q){q=!0;"multi-extended"==a.options.selectionMode&&(q=(q=!a.isObjInSelList(b)||!f||d)&&!(a.isObjInSelList(b)&&n));q&&("one"==a.options.selectionMode?a.clearPrevSelection():E&&d?a.clearPrevSelection():G||f||"multi-simple"===a.options.selectionMode||a.clearPrevSelection());a.options.selectedRow=b;if(E&&d&&"one"!=a.options.selectionMode){if(a.shiftFirstSelectedRow||(a.shiftFirstSelectedRow=r),d=a.getRowCurrentIndex(a.shiftFirstSelectedRow),m=a.getRowCurrentIndex(b),d>m&&
(n=d,d=m,m=n),a.isRowIndexInRange(d)&&a.isRowIndexInRange(m))for(;d<=m;d++)a.currentList[d][a.options.rowFields.selected]=!0,a.options.selectedRows.push(a.currentList[d])}else E&&(G||f||"multi-simple"===a.options.selectionMode)?(d=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],b[a.options.rowFields.selected]=!d,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=
b})):(b[a.options.rowFields.selected]=!0,a.isObjInSelList(b)||a.options.selectedRows.push(b)),a.shiftFirstSelectedRow=null;angular.isDefined(c.selectedRow)&&(c.selectedRow=b);a.callAfterSelect(b);a.refresh(null,null,!0)}else G||f||"multi-simple"===a.options.selectionMode?(d=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],m&&"undefined"!==m&&(d=m),b[a.options.rowFields.selected]=!d,b[a.options.rowFields.selected]?a.isObjInSelList(b)||
a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b}),a.shiftFirstSelectedRow=null,a.callAfterSelect(b),a.refresh(null,null,!0)):G||f||"multi-simple"===a.options.selectionMode||(f||1!=a.options.selectedRows.length&&a.isObjInSelList(b)||a.clearPrevSelection(b),a.shiftFirstSelectedRow=null)}else a.clearPrevSelection()}else return a.options.selectedRow};this.updateSelection=function(b,c,f){b=b&&(b.shiftKey||b.ctrlKey||b.metaKey)?!0:!1;"multi-extended"==
a.options.selectionMode&&0<a.options.selectedRows.length&&!f&&!G&&!b&&(a.clearPrevSelection(),c[a.options.rowFields.selected]=!0,a.options.selectedRows.push(c),a.callAfterSelect(c),a.refresh(null,null,!0))};this.isObjInSelList=function(b){var c=!1,f=a.options.selectedRows;if(b&&f)for(var g=0;g<f.length;g++)if(k.isEqual(f[g][a.options.rowFields.id],b[a.options.rowFields.id])){c=!0;break}return c};c.$on(c.name+"-clear-selection",function(b){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=
!1);a.options.selectedColumn=null;a.clearPrevSelection();a.options.selectedRow=null});c.$on(c.name+"-get-hover-column",function(b,c){a.hoverColumn?m.setTempData(a.hoverColumn):c&&m.setTempData(a.getColumnAt({x:c.x,y:c.y}))});c.$on(c.name+"-get-selected-column",function(b){m.setTempData(a.columnSelection())});c.$on(c.name+"-set-selected-column",function(b,c){a.columnSelection(c)});c.$on(c.name+"-get-selected-columns",function(b){m.setTempData(a.options.selectedColumns)});c.$on(c.name+"-set-selected-columns",
function(b,c){c&&Array.isArray(c)&&n(function(){for(var b=0;b<a.options.selectedColumns.length;b++)a.options.selectedColumns[b][a.options.columnFields.selected]=!1;for(b=a.options.selectedColumns.length=0;b<c.length;b++)c[b][a.options.columnFields.selected]=!0,a.options.selectedColumns.push(c[b]);0<c.length?(a.options.selectedColumn=c[c.length-1],a.callAfterSelect(a.options.selectedColumn)):a.options.selectedColumn=null;a.refreshColumns()},1)});c.$on(c.name+"-get-selected-row",function(b){m.setTempData(a.rowSelection())});
c.$on(c.name+"-set-selected-row",function(b,c){var d=n(function(){a.rowSelection(c);n.cancel(d)},1)});c.$on(c.name+"-get-selected-rows",function(b){m.setTempData(a.options.selectedRows)});c.$on(c.name+"-set-selected-rows",function(b,c){c&&Array.isArray(c)&&n(function(){for(var b=a.options.selectedRows.length=0;b<c.length;b++)c[b][a.options.rowFields.selected]=!0,a.options.selectedRows.push(c[b]);0<c.length?(a.options.selectedRow=c[c.length-1],a.callAfterSelect(a.options.selectedRow)):a.options.selectedRow=
null;a.refresh(null,null,!0)},1)});c.$on(c.name+"-move-column",function(b,c,f){a.moveColumn(c,f)});c.$on(c.name+"-move-row",function(b,c,f,g,k){a.moveRow(c,f,g,k)});c.$watch("options",function(b,c){b!==c&&(a.updateOptions(b),a.updateLayout())},!0);c.$watch("allowCellFocus",function(b,c){b!==c&&(a.options.allowCellFocus=b)});c.$watch("allowColumnReorder",function(b,c){b!==c&&(a.options.allowColumnReorder=b)});c.$watch("allowFilter",function(b,c){b!==c&&(a.options.allowFilter=b)});c.$watch("allowFocus",
function(b,c){b!==c&&(a.options.allowFocus=b)});c.$watch("allowDrag",function(b,c){b!==c&&(a.options.allowDrag=b,a.updateView())});c.$watch("allowDrop",function(b,c){b!==c&&(a.options.allowDrop=b,a.updateView())});c.$watch("autoExpand",function(b,c){b!==c&&(a.options.autoExpand=b)});c.$watch("autoSize",function(b,c){b!==c&&(a.options.autoSize=b,a.updateLayout())});c.$watch("autoUpdate",function(b,c){b!==c&&(a.options.autoUpdate=b,a.updateLayout())});c.$watch("columns",function(b,d){b!==d&&(a.columnsObj=
new V({objects:c.columns,events:a.columnEvents,fields:a.options.columnFields}))});c.$watch("columnRelations",function(b,d){b!==d&&(a.columnRelationsObj=new V({objects:c.columnRelations,fields:a.options.columnFields}))});c.$watch("controlStyle",function(b,c){b!==c&&a.updateControlStyle(b)});c.$watch("displayMode",function(b,c){b!==c&&(a.options.displayMode=b,a.updateLayout())});c.$watch("editorSettings",function(b,c){b!==c&&a.updateEditorSettings(b)});c.$watch("enabled",function(b,c){b!==c&&(a.options.enabled=
b,a.updateView(),a.options.paging.enabled&&a.options.paging.showControlPanel&&a.updatePaginationPanel(),a.callEnabledChanged(b))});c.$watch("expandingColumnIndex",function(b,c){b!==c&&(a.options.expandColIndex=b)});c.$watch("fields",function(b,c){b!==c&&(a.updateDataFields(b),a.UpdateData())});c.$watch("fillSpace",function(b,c){b!==c&&(a.options.fillSpace=b)});c.$watch("gridLines",function(b,c){b!==c&&(a.options.gridLines=b,a.updateView())});c.$watch("hoverSelection",function(b,c){b!==c&&(a.options.hoverSelection=
b)});c.$watch("indent",function(b,c){b!==c&&(a.options.indent=b,a.updateLayout())});c.$watch("mouseWheelSpeed",function(b,c){b!==c&&(a.options.mouseWheelSpeed=b)});c.$watch("labelEdit",function(b,c){b!==c&&(a.options.labelEdit=b)});c.$watch("maxRows",function(b,c){b!==c&&(a.options.maxRows=b,a.updateLayout())});c.$watch("paging",function(b,c){b!==c&&(a.updatePaging(b),a.resetPageNumber(),a.updateCurrentLayout())},!0);c.$watch("pathSeparator",function(b,c){b!==c&&(a.options.pathSeparator=b)});c.$watch("rows",
function(b,d){b!==d&&(a.rowsObj=new V({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))});c.$watch("rtl",function(b,c){b!==c&&(a.options.rtl=b,a.updateLayout())});c.$watch("rowHeight",function(b,c){b!==c&&(a.options.rowHeight=b,a.updateLayout())});c.$watch("rowIcon",function(b,c){b!==c&&(a.options.rowIcon=b,a.updateLayout())});a.resetSelection=function(){switch(a.options.selectionMode){case "none":a.clearPrevSelection();break;default:a.clearPrevSelection(a.rowSelection())}};
c.$watch("selectionMode",function(b,c){b!==c&&(a.options.selectionMode=b,a.resetSelection())});c.$watch("showExpandBoxes",function(b,c){b!==c&&(a.options.showExpandBoxes=b,a.updateLayout())});c.$watch("showFooter",function(b,c){b!==c&&(a.options.showFooter=b,a.updateLayout())});c.$watch("showHeader",function(b,c){b!==c&&(a.options.showHeader=b,a.updateLayout())});c.$watch("showIcons",function(b,c){b!==c&&(a.options.showIcons=b,a.updateLayout())});c.$watch("showScroll",function(b,c){b!==c&&(a.updateShowScroll(b),
a.updateScrollVisibility(),a.updateScrollView())},!0);c.$watch("selectedRow",function(b,c){b!==c&&(c&&(c[a.options.rowFields.selected]=!1),a.options.selectedRow=b,a.callAfterSelect(b))});this.sortComparer=this.sortColumn=null;c.$watch("sorting",function(b,c){b!==c&&(a.options.sorting=b)});c.$on(c.name+"-sort",function(b,c,f,g){a.sort(c,f,g)});this.sort=function(b,c,f){a.sortColumn=b;a.sortComparer=f;if("ascending"==c||"descending"==c||"none"==c)a.options.sorting=c;a.updateCurrentLayout();a.callChange()};
this.getCellIndexInCollection=function(b,c,f){var d=-1;if(b)for(var g=0;g<b.length;g++)if(void 0==b[g][a.options.cellFields.cid]){d=c;break}else if(b[g][a.options.cellFields.cid]==f){d=g;break}return d};this.isSortingAllowed=function(){return"ascending"==a.options.sorting||"descending"==a.options.sorting};this.applySorting=function(b){if(b&&(!a.sortColumn||0!=a.sortColumn[a.options.columnFields.visible])){var c=a.getColumnCurrentIndex(a.sortColumn),f=0<=c?c:a.options.expandColIndex;if(f<a.columnList.length){var g=
a.columnList[f][a.options.columnFields.id];a.sortColumn&&a.sortColumn[a.options.columnFields.comparer]?b.sort(a.sortColumn[a.options.columnFields.comparer]):a.sortComparer?b.sort(a.sortComparer):a.isSortingAllowed()&&b.sort(function(b,c){var d=null,m=null;if(b[a.options.rowFields.cells]){var r=a.getCellIndexInCollection(b[a.options.rowFields.cells],f,g);0<=r&&((d=b[a.options.rowFields.cells][r][a.options.cellFields.value])||(d=b[a.options.rowFields.cells][r][a.options.cellFields.text]),k.isObject(d)&&
(d=d.value?d.value:d.text))}c[a.options.rowFields.cells]&&(r=a.getCellIndexInCollection(c[a.options.rowFields.cells],f,g),0<=r&&((m=c[a.options.rowFields.cells][r][a.options.cellFields.value])||(m=c[a.options.rowFields.cells][r][a.options.cellFields.text]),k.isObject(m)&&(m=m.value?m.value:m.text)));d=void 0!=d?d:null;m=void 0!=m?m:null;switch(a.options.sorting){case "ascending":if(d<m)return-1;if(d>m)return 1;break;case "descending":if(d>m)return-1;if(d<m)return 1;break;default:return 0}})}}};var jb=
function(b){if(b){var c=k.isFieldAvailable(b.general,"iui-treegrid-column");var f=(f=b.header)?{content:k.isFieldAvailable(f.content,"iui-treegrid-column-header-cell-content"),disabled:k.isFieldAvailable(f.disabled,"iui-treegrid-column-header-disabled"),normal:k.isFieldAvailable(f.normal,"iui-treegrid-column-header"),hovered:k.isFieldAvailable(f.hovered,"iui-treegrid-column-header-hovered"),selected:k.isFieldAvailable(f.selected,"iui-treegrid-column-header-selected")}:a.options.controlStyle.column.header;
b=(b=b.footer)?{content:k.isFieldAvailable(b.content,"iui-treegrid-column-footer-cell-content"),disabled:k.isFieldAvailable(b.disabled,"iui-treegrid-column-footer-disabled"),normal:k.isFieldAvailable(b.normal,"iui-treegrid-column-footer"),hovered:k.isFieldAvailable(b.hovered,"iui-treegrid-column-footer-hovered"),selected:k.isFieldAvailable(b.selected,"iui-treegrid-column-footer-selected")}:a.options.controlStyle.column.footer;return{general:c,header:f,footer:b}}return a.options.controlStyle.column};
this.getExpandBoxStyle=function(b){return b?{general:k.isFieldAvailable(b.general,"iui-treegrid-expand-box"),animated:k.isFieldAvailable(b.animated,"iui-treegrid-expand-box-load"),expanded:k.isFieldAvailable(b.expanded,"iui-treegrid-expand-box-open"),collapsed:k.isFieldAvailable(b.collapsed,"iui-treegrid-expand-box-close")}:a.options.controlStyle.row.expandBox};var Ea=function(b){if(b){var c=(c=b.general)?{disabled:k.isFieldAvailable(c.disabled,"iui-treegrid-row-disabled"),focused:k.isFieldAvailable(c.focused,
"iui-treegrid-row-focused"),normal:k.isFieldAvailable(c.normal,"iui-treegrid-row"),hovered:k.isFieldAvailable(c.hovered,"iui-treegrid-row-hovered"),selected:k.isFieldAvailable(c.selected,"iui-treegrid-row-selected")}:a.options.controlStyle.row.general;var f=b.checkBox;if(f){var g=k.isFieldAvailable(f.general,"iui-checkbox");f=(f=f.box)?{general:k.isFieldAvailable(f.general,"iui-checkbox-box"),disabled:k.isFieldAvailable(f.disabled,"iui-checkbox-disabled"),checked:k.isFieldAvailable(f.checked,"iui-checkbox-checked"),
indeterminate:k.isFieldAvailable(f.indeterminate,"iui-checkbox-indeterminate"),unchecked:k.isFieldAvailable(f.unchecked,"iui-checkbox-unchecked")}:a.options.controlStyle.row.checkBox.box;g={general:g,box:f}}else g=a.options.controlStyle.row.checkBox;f=a.getExpandBoxStyle(b.expandBox);var m=(m=b.cell)?{content:k.isFieldAvailable(m.content,"iui-treegrid-row-cell-content"),general:k.isFieldAvailable(m.general,"iui-treegrid-row-cell"),disabled:k.isFieldAvailable(m.disabled,"iui-treegrid-row-cell-disabled"),
focused:k.isFieldAvailable(m.focused,"iui-treegrid-row-cell-focused"),normal:k.isFieldAvailable(m.normal,"iui-treegrid-row-cell"),hovered:k.isFieldAvailable(m.hovered,"iui-treegrid-row-cell-hovered"),selected:k.isFieldAvailable(m.selected,"iui-treegrid-row-cell-selected")}:a.options.controlStyle.row.cell;b=(b=b.fixed)?{disabled:k.isFieldAvailable(b.disabled,"iui-treegrid-row-fixed-disabled"),normal:k.isFieldAvailable(b.normal,"iui-treegrid-row-fixed"),hovered:k.isFieldAvailable(b.hovered,"iui-treegrid-row-fixed-hovered")}:
a.options.controlStyle.row.fixed;return{general:c,checkBox:g,expandBox:f,cell:m,fixed:b}}return a.options.controlStyle.row},kb=function(b){return b?{content:k.isFieldAvailable(b.content,"iui-treegrid-row-cell-content"),general:k.isFieldAvailable(b.general,"iui-treegrid-row-cell"),disabled:k.isFieldAvailable(b.disabled,"iui-treegrid-row-cell-disabled"),focused:k.isFieldAvailable(b.focused,"iui-treegrid-row-cell-focused"),normal:k.isFieldAvailable(b.normal,"iui-treegrid-row-cell"),hovered:k.isFieldAvailable(b.hovered,
"iui-treegrid-row-cell-hovered"),selected:k.isFieldAvailable(b.selected,"iui-treegrid-row-cell-selected")}:a.options.controlStyle.cell};this.updateControlStyle=function(b){a.options.controlStyle=b?{general:k.isFieldAvailable(b.general,"iui-treegrid"),column:jb(b.column),row:Ea(b.row),cell:kb(b.cell)}:{general:k.isFieldAvailable(a.defaultStyle.general,"iui-treegrid"),column:jb(a.defaultStyle.column),row:Ea(a.defaultStyle.row),cell:kb(a.defaultStyle.cell)}};this.getCurrentColumnStyle=function(b,c,f){var d=
a.options.controlStyle.column;b&&b.style&&(d=b.style);b=a.options.controlStyle.column.body;var g=d.body;switch(c){case "header":b=a.options.controlStyle.column.header;g=d.header;break;case "footer":b=a.options.controlStyle.column.footer,g=d.footer}if(f)switch(f){case "content":return g&&g.content?g.content:b.content;case "disabled":return g&&g.disabled?g.disabled:b.disabled;case "hovered":return g&&g.hovered?g.hovered:b.hovered;case "selected":return g&&g.selected?g.selected:b.selected;default:return g&&
g.normal?g.normal:b.normal}else return c?g?g:b:d?d:a.options.controlStyle.column};this.getCurrentRowStyle=function(b,c){var d=a.options.controlStyle.row;if(b)switch(b[a.options.rowFields.style]){case "initial":break;case "parent":return a.getCurrentRowStyle(a.getParent(b),c);default:null!=b.style&&(d=b.style)}if(c){if(k.isString(d.general))return d.general;if(a.isRowFixed(b))switch(c){case "disabled":return d.fixed&&d.fixed.disabled?d.fixed.disabled:a.options.controlStyle.row.fixed.disabled;case "hovered":return d.fixed&&
d.fixed.hovered?d.fixed.hovered:a.options.controlStyle.row.fixed.hovered;default:return d.fixed&&d.fixed.normal?d.fixed.normal:a.options.controlStyle.row.fixed.normal}else switch(c){case "disabled":return d.general&&d.general.disabled?d.general.disabled:a.options.controlStyle.row.general.disabled;case "focused":return d.general&&d.general.focused?d.general.focused:a.options.controlStyle.row.general.focused;case "hovered":return d.general&&d.general.hovered?d.general.hovered:a.options.controlStyle.row.general.hovered;
case "selected":return d.general&&d.general.selected?d.general.selected:a.options.controlStyle.row.general.selected;default:return d.general&&d.general.normal?d.general.normal:a.options.controlStyle.row.general.normal}}else return d?d:a.options.controlStyle.row};this.getDefaultCellContentClass=function(){return"iui-treegrid-row-cell-content"};this.getDefaultCellLabelClass=function(){return"iui-treegrid-row-cell-label"};this.getDefaultCellBorderClass=function(){return"iui-treegrid-lines-both"};this.getCurrentCellStyle=
function(b,c,f){var d=a.options.controlStyle.row.cell;if(c)switch(c[a.options.cellFields.style]){case "initial":break;case "parent":b&&(d=kb(a.getCurrentRowStyle(b)));break;default:c.style&&(d=c.style)}if(f)switch(f){case "content":return d.content?d.content:a.options.controlStyle.cell.content;case "disabled":return d.disabled?d.disabled:a.options.controlStyle.cell.disabled;case "focused":return d.focused?d.focused:a.options.controlStyle.cell.focused;case "hovered":return d.hovered?d.hovered:a.options.controlStyle.cell.hovered;
case "selected":return d.selected?d.selected:a.options.controlStyle.cell.selected;default:return d.normal?d.normal:a.options.controlStyle.cell.normal}else return d?d:a.options.controlStyle.row.cell}}]).directive("iuiTreegrid",["$compile","$timeout","$interval","IntegralUIInternalService","IntegralUIDragDrop","$window","IntegralUIListCtrlService",function(c,f,n,g,A,k,V){return{restrict:"EA",controller:"IntegralUITreeGridController",transclude:!0,replace:!0,template:'<div class="iui-treegrid" data-element="treegrid"><div class="iui-treegrid-block"></div></div>',
scope:{allowAnimation:"=",allowCellFocus:"=",allowColumnReorder:"=",allowFilter:"=",allowFocus:"=",allowDrag:"=",allowDrop:"=",animationSpeed:"=",autoExpand:"=",autoSize:"=",autoUpdate:"=",columns:"=",columnRelations:"=",controlStyle:"=",displayMode:"@",editorSettings:"=",enabled:"=",expandingColumnIndex:"=",fields:"=",fillSpace:"=",gridLines:"=",hoverSelection:"=",indent:"=",labelEdit:"=",maxRows:"=",mouseWheelSpeed:"@",name:"@",options:"=?",paging:"=?",pathSeparator:"@",rowHeight:"=",rowIcon:"=",
rows:"=",selectedIndex:"=",selectedRow:"=",selectionMode:"@",showExpandBoxes:"=",showFooter:"=",showHeader:"=",showIcons:"=",showScroll:"=",sorting:"@",afterCollapse:"&",afterEdit:"&",afterExpand:"&",afterLabelEdit:"&",afterSelect:"&",beforeCollapse:"&",beforeEdit:"&",beforeExpand:"&",beforeLabelEdit:"&",beforeSelect:"&",cellClick:"&",cellDblclick:"&",cellHover:"&",cellvalueChanged:"&",cellvalueChanging:"&",change:"&",clearColumns:"&",clearRows:"&",columnAdded:"&",columnAdding:"&",columnClick:"&",
columnDblclick:"&",columnHover:"&",columnPoschanging:"&",columnPoschanged:"&",columnRemoved:"&",columnRemoving:"&",columnRightclick:"&",columnSizechanged:"&",dragDrop:"&",dragEnter:"&",dragLeave:"&",dragOver:"&",enabledChanged:"&",events:"=?",gotFocus:"&",keyDown:"&",keyPress:"&",keyUp:"&",loadComplete:"&",lostFocus:"&",rowAdded:"&",rowAdding:"&",rowClick:"&",rowDblclick:"&",rowHover:"&",rowRemoved:"&",rowRemoving:"&",rowRightclick:"&",scrollposChanged:"&",selectionChanged:"&",updateComplete:"&"},
link:function(m,q,sc,a,Vc){var M=this,Da=q.children().eq(0),P=angular.element('<div class="iui-scrollbar-vertical"><div class="iui-scroll-button-thumb-vertical"></div></div>'),C=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),cb=angular.element('<div class="iui-scrollbar-corner"></div>'),Ka=null,ra=null,hb=null,ib=!1,F=angular.element('<input type="text" class="iui-label-editor" draggable="false" />');a.labelEditStatus=function(a){if(void 0!=
a)ib=a;else return ib};var Wc=function(){var e="iui-treegrid-block";a.options.showStatusIcons&&(e+=" "+e+"-shift-left");a.options.rtl&&(e+=" "+e+"-rtl");return e};m.$on("$destroy",function(a){M.s2t();db&&(f.cancel(db),db=null);eb&&(f.cancel(eb),eb=null);Fa&&Fa.unbind("mousedown");q.unbind("click dblclick dragenter dragleave dragend drop keydown mousedown mouseleave mousemove mousewheel scroll touchstart touchmove touchend");angular.element(k).unbind("dragenter",Jd);angular.element(k).unbind("dragover",
Kd);angular.element(k).unbind("dragend",Ld);angular.element(k).unbind("keyup",Md);angular.element(k).unbind("mousemove",Nd);angular.element(k).unbind("mousedown",Od);angular.element(k).unbind("mouseup",Pd);angular.element(k).unbind("click",Qd);angular.element(k).unbind("contextmenu",Rd);angular.element(k).unbind("keydown",Sd);F&&F.unbind("blur focus keydown mousedown");Td();Yb();z&&z.$destroy();v&&v.$destroy();W&&W.$destroy()});a.dragIcon=document.createElement("img");a.dragIcon.width=1;q.append(a.getDropMarkWindow());
a.dropMark();var Eb=function(){Ka&&(f.cancel(Ka),Ka=null)};a.addDropMark=function(){var e=q[0];for(var b=null;e;){if(e===document.getElementsByTagName("body")[0]){b=e;break}e=e.offsetParent}if(e=b)angular.element(e).append(a.getDropMarkWindow()),a.dropMark()};a.removeDropMark=function(){a.getDropMarkWindow().remove()};a.isDropInRange=function(e){e=a.getMousePos(e);var b=q[0].getBoundingClientRect();e.x-=angular.element(k)[0].pageXOffset;e.y-=angular.element(k)[0].pageYOffset;var c=b.top+y;b=b.bottom-
H;O&&C&&(b-=C[0].offsetHeight);return e.y<c||e.y>b?!1:!0};var N=angular.element('<div style="opacity:0.75;position:absolute;z-index:999"></div>'),Xb=function(){N&&(N.remove(),N.css("top","-9999999px"),N.css("left","-9999999px"))};a.getCellElemFromRow=function(e){return e&&(e=a.getElemFromRow(e))?a.getChildElement(e,"cell"):null};a.openEditor=function(e,b){if(e)switch(e.type){case "cell":b||(b=a.getColumnById(e[a.options.cellFields.cid]));if(!b){var c=a.getCellColumnIndex(e),l=a.columnsObj.getList();
l&&0<=c&&c<l.length&&(b=l[c])}if(b){c=a.getCellType(e,a.getColumnRealIndex(b));l=a.getCellRowIndex(e);var x=a.getCellColumnIndex(e);if(l=a.getElemFromCell(l,x,b[a.options.columnFields.fixed]))switch(c){case "checkbox":break;case "combobox":break;case "incell":a.openInCellEditor(l,e,b);break;case "dropdown":a.openDropDownEditor(l,e,b);break;default:0!=e[a.options.cellFields.allowEdit]&&Zb(null,l,0)}}}};a.closeEditor=function(e,b,c){if(e)switch(e.type){case "cell":if(b||(b=a.getColumnById(e[a.options.cellFields.cid])),
b)switch(a.getCellType(e,a.getColumnRealIndex(b))){case "incell":a.closeActiveEditor(e);break;case "dropdown":a.closeActiveEditor(e)}else a.closeActiveEditor()}else a.closeActiveEditor();c||"optimal"!=a.options.displayMode||a.updateView();G=null};var D=null,E=!1,G=null,jb=null,Ea=angular.element('<span class="iui-edit-mark"></span>');a.openInCellEditor=function(e,b,h){E&&a.closeActiveEditor(b,!0);kb();if(b&&h&&(G=b,h='<div ng-include="'+h[a.options.columnFields.editorTemplate]+'"></div>',D=angular.element('<div class="iui-incell-editor"></div>'),
D.append(c(h)(m.$parent)),0!=a.callBeforeEdit(b))){e.children().eq(0).append(D);E=!0;jb="incell";d();D.bind("mousedown",function(a){a.stopPropagation()});D.bind("mouseup",function(a){a.stopPropagation()});D.bind("click",function(a){a.stopPropagation()});D.bind("keydown",function(e){switch(e.keyCode){case 27:a.closeActiveEditor(G)}e.stopPropagation()});D.bind("keypress",function(a){a.stopPropagation()});D.bind("keyup",function(a){a.stopPropagation()});var l=f(function(){var a=g.getPadding(e[0]),b=
parseInt(getComputedStyle(e[0]).width,10)-(a.left+a.right);a=parseInt(getComputedStyle(e[0]).height,10)+2;D.css("width",b+"px");D.css("height",a+"px");D.css("top",e[0].offsetTop+"px");m.$apply();D.children&&1==D.children().length&&(b=D.children().eq(0),b.children&&1==b.children().length&&b.children().eq(0).css("height",a+"px"));f.cancel(l)},1)}};a.openDropDownEditor=function(e,b,h){E&&a.closeActiveEditor(b,!0);kb();if(b&&h&&(G=b,h='<div ng-include="'+h[a.options.columnFields.editorTemplate]+'"></div>',
D=angular.element('<div class="iui-dropdown-editor"></div>'),D.append(c(h)(m.$parent)),0!=a.callBeforeEdit(b)))var l=f(function(){angular.element(tb).append(D);D.bind("mousedown",function(a){a.stopPropagation()});D.bind("mouseup",function(a){a.stopPropagation()});D.bind("click",function(a){a.stopPropagation()});E=!0;jb="dropdown";var a=e[0].getBoundingClientRect(),b=angular.element(k)[0].pageXOffset,c=angular.element(k)[0].pageYOffset,h=f(function(){var l=g.getPadding(e[0]);l=parseInt(getComputedStyle(e[0]).width,
10)+(l.left+l.right);var p=g.getPadding(D[0]);l-=p.left+p.right;p=parseInt(getComputedStyle(D[0]).width,10);l<p&&(l=p);p=a.right-(l+3)+b;D.css("top",a.bottom+c+"px");D.css("left",p+"px");D.css("width",l+"px");m.$apply();f.cancel(h)},1);f.cancel(l)},1)};a.closeActiveEditor=function(e,b){E=!1;kb();D&&D.remove();jb=G=null;b||a.callAfterEdit(e)};var kb=function(){D&&D.unbind("click keydown keypress keyup mousedown mouseup")},b=function(a,b){a&&(Ea.addClass("iui-edit-mark iui-edit-mark-"+b),a.append(Ea),
Ea.css("left",a[0].offsetLeft+a[0].offsetWidth-Ea[0].offsetWidth-2+"px"),Ea.css("top",a[0].offsetTop+(a[0].offsetHeight-Ea[0].offsetHeight)/2+"px"))},d=function(){Ea&&("dropdown"!=jb||"dropdown"==jb&&!E)&&(Ea.removeAttr("class"),Ea.remove())},r=null,t=angular.element('<div class="iui-dropdown-mark"><span></span></div>'),tc=function(a,b){!a||ub&&!b||(a.append(t),t.css("top",a[0].offsetTop+"px"),t.css("left",a[0].offsetLeft+a[0].offsetWidth-t[0].offsetWidth+"px"),t.css("height",getComputedStyle(a[0]).height))},
Ja=function(a){!t||ub&&!a||t.remove()};a.getCellType=function(e,b){var c=null,l="label";e&&(c=a.getColumnById(e[a.options.cellFields.cid]));!c&&0<=b&&b<a.columnList.length&&(c=a.columnList[b]);c&&(l=c[a.options.columnFields.editorType]);return l};var tb=g.getBodyElem(q[0]),Wb=g.getUniqueId(4),sa=null,ub=!1,$b=0,af=function(e,b,h){if(tb&&e.items&&0<e.items.length){e=g.getUniqueId(4);var l=c('<iui-list name="'+e+'" style="position:absolute;top:-99px;height:100px" items="data[0]['+b+"].column."+a.options.columnFields.editorSettings+
'.items"></iui-list>')(z);angular.element(tb).append(l);V.updateLayout(e);var x=f(function(){if(0<l.children().length){var a=l.children().eq(0);0<a.children().length&&($b=angular.element(a.children().eq(0))[0].offsetHeight,h&&(h.avgItemHeight=$b))}l.remove();f.cancel(x)},1)}},wb=null,xb=function(e,b,h,p){var l=a.getCell(h,p);if(l!=r&&(r=l,sa&&sa.remove(),wb&&wb.$destroy(),tb)){wb=m.$new();wb.data=a.columnList[p];G=l;var d='<iui-list name="'+Wb+'" style="position:absolute;"';d+=' items="data.'+a.options.columnFields.editorSettings+
'.items"';d+=' item-icon="data.'+a.options.columnFields.editorSettings+'.itemIcon"';d+=' show-icons="data.'+a.options.columnFields.editorSettings+'.showIcons"';d+=' checkbox-settings="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings"';d+=' show-check-boxes="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings.showCheckBoxes"';sa=c(d+(' nav-selection="false" before-select="onCellValueChanging(e, '+h+", "+p+')" after-select="onCellValueChanged(e, '+h+", "+p+')"></iui-list>'))(wb);
$b=0;Fb&&p<Fb.length&&($b=Fb[p].avgItemHeight);var $e=f(function(){angular.element(tb).append(sa);var c=e[0].getBoundingClientRect(),h=angular.element(k)[0].pageXOffset,p=angular.element(k)[0].pageYOffset;p=c.bottom+p-1;c=c.left+h;h=e.children().eq(0);var x=g.getPadding(h[0]);h=parseInt(getComputedStyle(h[0]).width,10)+(x.left+x.right);x=g.getPadding(sa[0]);h-=x.left+x.right;void 0!=b.dropDownWidth&&h<b.dropDownWidth&&(h=b.dropDownWidth);x=void 0!=b.dropDownHeight?b.dropDownHeight:100;void 0!=b.maxDropDownItems&&
(x=$b*b.maxDropDownItems);sa.css("top",p+"px");sa.css("left",c+"px");sa.css("width",h+"px");sa.css("height",x+"px");sa.css("z-index","999");l&&l[a.options.cellFields.value]&&V.selectedItem(Wb,l[a.options.cellFields.value]);V.updateLayout(Wb);var d=f(function(){if(l&&l[a.options.cellFields.value]){V.ensureVisible(Wb,l[a.options.cellFields.value]);var e=f(function(){V.focus(Wb,l[a.options.cellFields.value]);f.cancel(e)},1)}f.cancel(d)},10);t&&(Ja(!0),tc(e,!0));ub=!0;bf();f.cancel($e)},1)}};a.removeDropDownList=
function(a){sa&&(r=null,sa.remove(),ub=!1,a||Ja(),sa.unbind("keydown"));wb&&wb.$destroy();G=null};var bf=function(){sa.bind("keydown",function(e){switch(e.keyCode){case 27:a.removeDropDownList(),Ja()}})},Zb=function(e,b,c){a.options.labelEdit&&(void 0===c&&(c=500),ra=f(function(){if(ra)var a=f(function(){uc(e,b,!0);f.cancel(a)},c);f.cancel(ra)},c/3))},ac=function(){ra&&(f.cancel(ra),ra=null)},Gb=null,Hb=null,uc=function(b,c,h){if(a.dragDropStatus())vb=F[0].value,a.labelEditStatus(!1),F.unbind("blur focus keydown mousedown"),
F.remove(),Hb=Gb=null;else{var e=a.getRowFromChildElem(c);if(e){var l=a.getRowCurrentIndex(e),d=a.getIndexFromElem(c),g=a.getCellObject(l,d),vb="";vb=c.children().eq(0);if(g)if(h){if(0!=a.callBeforeLabelEdit(g)){Gb=e;Hb=g;a.labelEditStatus(!0);F.unbind("blur focus keydown mousedown");b=parseInt(getComputedStyle(c[0]).width,10)-4;h=parseInt(getComputedStyle(c[0]).height,10)-3;F.css("top",c[0].offsetTop+"px");F.css("left",c[0].offsetLeft+"px");F.css("width",b+"px");F.css("height",h+"px");vb.append(F);
F[0].value=g[a.options.cellFields.text];F.bind("keydown",function(b){switch(b.keyCode){case 13:g[a.options.cellFields.text]=F[0].value?F[0].value:"null";uc(b,c,!1);break;case 27:uc(b,c,!1)}b.stopPropagation()});F.bind("focus",function(b){var e=angular.element(this);a.callGotFocus(b,Gb,Hb,!0,e[0].value)});F.bind("blur",function(a){uc(a)});F.bind("mousedown",function(a){a.stopPropagation()});var k=f(function(){F[0].focus();F[0].select();f.cancel(k)},10)}}else vb=F[0].value,a.labelEditStatus(!1),F.unbind("blur focus keydown mousedown"),
F.remove(),a.updateView(),a.updateFocus(l,d),a.callAfterLabelEdit(g),a.callLostFocus(b,e,g,!0,vb),Hb=Gb=null}else vb=F[0].value,a.labelEditStatus(!1),F.unbind("blur focus keydown mousedown"),F.remove(),a.callAfterLabelEdit(),a.updateView(),a.callLostFocus(b,Gb,Hb,!0,vb),Hb=Gb=null}},Ud=function(b){var e="";if(a.options.showExpandBoxes){var c=a.defaultStyle.row.expandBox.general;b[a.options.rowFields.style]&&b[a.options.rowFields.style].expandBox&&b[a.options.rowFields.style].expandBox.general!=c?
c+=" "+b[a.options.rowFields.style].expandBox.general:a.options.controlStyle.row.expandBox.general!=c&&(c+=" "+a.options.controlStyle.row.expandBox.general);var p=a.getCurrentRowStyle(b);p=a.getExpandBoxStyle(p.expandBox);if(a.isThereChildRows||b&&b[a.options.rowFields.hasChildren])e=c;c=b[a.options.rowFields.hasChildren]&&(a.isThereVisibleChildren(b)||!b[a.options.rowFields.rows]||b[a.options.rowFields.rows]&&0==b[a.options.rowFields.rows].length);b&&!a.isRowFixed(b)&&(c||a.isThereVisibleChildren(b))&&
(0<=a.options.loadRows.indexOf(b)?e+=" "+p.animated:(e=b[a.options.rowFields.hasChildren]&&void 0===b[a.options.rowFields.expanded]?e+(" "+p.expanded):!1!==b[a.options.rowFields.expanded]?e+(" "+p.collapsed):e+(" "+p.expanded),!0===a.options.rtl&&(e+="-rtl"),a.options.enabled&&a.isRowEnabled(b)||(e+="-disabled")))}return e};q.bind("mousemove",function(b){if(a.options.enabled&&0===b.button&&wa&&I){a.getColumnCurrentIndex(I);var e=a.getMousePos(b),c=e.y+16;e=e.x+20;Sa.empty();Sa.append("<span>"+I[a.options.columnFields.headerText]+
"</span>");Sa.css("top",c+"px");Sa.css("left",e+"px");Sa.css("display","block");Vd();b.stopPropagation()}});var Zd=function(){for(var b=0,c="none";3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var h=0;h<c.length;h++){var p=angular.element(c[h]);Wd(p);p=p.find("td");for(var x=0;x<p.length;x++){var d=angular.element(p[x]);Xd(a.getElement(d,"expandbox"));Yd(d)}}b++;c=1==b?"left":"right"}},$d=function(){Z&&Z.unbind("dragover");X&&X.unbind("dragover");ta&&ta.unbind("dragover");ua&&ua.unbind("dragover");
ia&&ia.unbind("dragover");ia&&ia.unbind("dragover")},Td=function(){$d();kb();for(var b=0,c="none";3>b;){var h=a.getRowElems(c);if(h&&0<h.length)for(var p=0;p<h.length;p++){var x=angular.element(h[p]);Wd(x);x=x.find("td");for(var d=0;d<x.length;d++){var f=angular.element(x[d]);Xd(a.getElement(f,"expandbox"));Yd(f)}}h=c;for(p=0;2>p;){rowFixed=0==p?"top":"bottom";if((x=a.getRowElems(h,rowFixed))&&0<x.length)for(d=0;d<x.length;d++){(f=angular.element(x[d]))&&f.unbind("mousedown mouseenter mouseleave");
f=f.find("td");for(var g=0;g<f.length;g++){var k=angular.element(f[g]);k&&k.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart")}}p++}if((h=a.getHeaderElem(c))&&0<h.length)for(p=0;p<h.length;p++)for(x=angular.element(h[p]),x=x.find("td"),d=0;d<x.length;d++)(f=angular.element(x[d]))&&(c=a.getChildElement(f,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&c.unbind("mousedown");b++;c=1==b?"left":"right"}},hf=function(){Zd();for(var b=0,c="none";3>b;){var h=a.getRowElems(c);
if(h&&0<h.length)for(var p,x=h.length-1,d=0;d<=x;d++){p=angular.element(h[d]);cf(p);for(var f=p.find("td"),g=0;g<f.length;g++){var k=angular.element(f[g]);df(a.getElement(k,"expandbox"));ef(k,a.getRowFromElem(p),g)}}for(h=0;2>h;){rowFixed=0==h?"top":"bottom";if((p=a.getRowElems(c,rowFixed))&&0<p.length)for(d=0;d<p.length;d++)for(x=angular.element(p[d]),ff(x),f=x.find("td"),g=0;g<f.length;g++)k=angular.element(f[g]),gf(k,a.getRowFromElem(x),g);h++}b++;c=1==b?"left":"right"}},wa=!1,I=null,yb=-1,vc=
function(b,c){if(b){var e=a.getColumnWidthFromData(b);return a.isColumnWithFixedWidth(b)||10<c.x&&c.x<e-10}return!1},Xc=function(b){b=b.find("td");for(var e=0;e<b.length;e++)currentElem=angular.element(b[e]),currentElem.bind("click",function(b){lb();if(a.options.enabled&&1===b.which){var e=g.getClientMousePos(b,this),c=a.getColumnFromElem(this);c&&vc(c,e)&&a.callColumnClick(c,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("dblclick",function(b){b.preventDefault();if(a.options.enabled&&1===
b.which){var e=g.getClientMousePos(b,this),c=a.getColumnFromElem(this);c&&vc(c,e)&&a.callColumnDblClick(c,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("contextmenu",function(b){var e=a.getColumnFromElem(this);e&&(La=e,e[a.options.columnFields.contextMenu]&&0<e[a.options.columnFields.contextMenu].length&&b.preventDefault(),ae(b,e),b.stopPropagation())}),currentElem.bind("mouseenter",function(b){if(a.options.enabled&&!aa&&!ma){var e=a.getColumnFromElem(this);e&&(a.hoverColumn=e,a.refresh(e),
a.callColumnHover(e));if(1===b.which&&wa&&I&&a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&ja&&(ja.remove(),a.hoverColumn!=I)){var c=angular.element(this);c.append(ja);b=parseInt(getComputedStyle(c[0]).height,10);e=parseInt(getComputedStyle(ja[0]).height,10);c=g.getPadding(c[0]);ja.css("top",(b+c.top+c.bottom-e)/2+"px")}}}),currentElem.bind("mouseleave",function(b){!a.options.enabled||aa||ma||(a.hoverColumn=null,(b=a.getColumnFromElem(this))&&a.refresh(b),ja&&ja.remove(),aa||
q.css("cursor","default"))}),currentElem.bind("mousemove",function(b){var e=angular.element(this);if((!e||!e[0].attributes["data-element"]||"column-expand-cell"!=e[0].attributes["data-element"].value.toString())&&a.options.enabled)if(e=angular.element(this),1===b.which&&wa&&I&&a.hoverColumn&&a.hoverColumn!=I&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&I[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]){var c=parseInt(getComputedStyle(e[0]).width,10),h=a.getColumnCompleteIndex(I),
l=a.getColumnCompleteIndex(a.hoverColumn);ja.empty();yb=-1;I[a.options.columnFields.pid]==a.hoverColumn[a.options.columnFields.pid]&&h.level==l.level&&(b.offsetX>c/2?(yb=2,ja.append('<span class="iui-treegrid-column-reorder-mark-right"></span>')):(yb=1,ja.append('<span class="iui-treegrid-column-reorder-mark-left"></span>')),h=e,b=yb,e=parseInt(getComputedStyle(h[0]).height,10),c=parseInt(getComputedStyle(ja[0]).height,10),h=g.getPadding(h[0]),ja.css("top",(e+h.top+h.bottom-c)/2+"px"),1==b?(ja.css("left",
"0"),ja.css("right","auto")):(ja.css("left","auto"),ja.css("right","0")))}else if(e=a.getColumnFromChildElem(this))b=g.getClientMousePos(b,this),c=a.getColumnWidthFromData(e),h=10,a.isFilteringAllowed(e)&&(h=0),10>b.x&&!a.isColumnWithFixedWidth(e)&&be(e,"left")?(q.css("cursor","ew-resize"),Ta="left"):b.x>c-h&&!a.isColumnWithFixedWidth(e)&&be(e,"right")?(q.css("cursor","ew-resize"),Ta="right"):aa||(q.css("cursor","default"),Ta="none")}),currentElem.bind("mouseup",function(b){var e=angular.element(this);
if((!e||!e[0].attributes["data-element"]||"column-expand-cell"!=e[0].attributes["data-element"].value.toString())&&a.options.enabled){if(1===b.which)if(wa&&I&&a.hoverColumn&&a.hoverColumn!=I&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&I[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]){if(0!=a.callColumnPosChanging(I,a.hoverColumn)&&(b=a.getColumnCompleteIndex(I),e=a.getColumnCompleteIndex(a.hoverColumn),I[a.options.columnFields.pid]==a.hoverColumn[a.options.columnFields.pid]&&
b.level==e.level)){b=a.columnsObj.getParent(I);b=a.columnsObj.getList(b);e=b.indexOf(I);var c=b.indexOf(a.hoverColumn);if(0<=e&&0<=c){var h=c;e<c?1==yb&&h--:e>c&&2==yb&&h++;a.moveObject(e,h,b);a.updateLayout();a.callColumnPosChanged(I,a.hoverColumn)}}}else e=a.getColumnFromChildElem(this),a.updateColumnSelection(e,b);I=null;yb=-1;aa=wa=!1;q.css("cursor","default")}}),currentElem.bind("mousedown",function(b){var e=angular.element(this);if(e&&e[0].attributes["data-element"]&&"column-expand-cell"==e[0].attributes["data-element"].value.toString()){if(1==
b.which&&(e=a.getColumnFromChildElem(this))&&a.isColumnRelated(e)&&(e=a.getColumnRelatedObject(e))&&e.children){e.expanded=!(void 0!=e.expanded?e.expanded:0!=e.expanded);for(var c=0;c<e.children.length;c++)e.children[c].column[a.options.columnFields.visible]=e.expanded;a.updateLayout()}}else if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(),e=a.getColumnFromChildElem(this))){g.getClientMousePos(b,this);var h=e;if(0===b.button&&!aa){c=h;var l=h[a.options.columnFields.fixed];
switch(Ta){case "left":"right"==l?c=h:(h=wc(h,l))?(c=h,h[a.options.columnFields.fixed]!=l?(c=null,aa=!1):aa=!0):aa=!1;c&&(aa=!0);break;case "right":"right"==l?(h=xc(h,l))?(c=h,h[a.options.columnFields.fixed]!=l?(c=null,aa=!1):aa=!0):aa=!1:(c=h,aa=!0)}!a.isColumnWithFixedWidth(c)&&aa?a.setColumnResizingParams(c,Ta,a.getMousePos(b).x):aa=!1}if(!aa)switch(c=g.getClientMousePos(b,this),vc(e,c)&&a.columnSelection(e,b),b.which){case 1:a.options.allowColumnReorder&&0!=e[a.options.columnFields.allowDrag]&&
0==wa&&0!=e[a.options.columnFields.allowGrouping]&&(I=e,a.getMousePos(b),wa=!0,(e=g.getBodyElem(q[0]))&&angular.element(e).append(Sa));break;case 3:vc(e,c)&&a.callColumnRightClick(e,a.getMousePos(b))}}b.stopPropagation()}),function(b){b&&(b=a.getChildElement(b,"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&b.bind("mousedown",function(a){1==a.which&&jf(this);a.stopPropagation()})}(currentElem)},Fa=null,jf=function(b){a.closeFilterWindow();var e=a.getColumnFromChildElem(b);if(e){var h=
angular.element(b),p=h.parent().parent();if(tb){b='<div ng-include="'+e[a.options.columnFields.filterTemplate]+'"></div>';Fa=angular.element('<div class="iui-filter-window"></div>');Fa.append(c(b)(m.$parent));var x=f(function(){angular.element(tb).append(Fa);Fa.bind("mousedown",function(a){a.stopPropagation()});h[0].getBoundingClientRect();var b=p[0].getBoundingClientRect(),c=angular.element(k)[0].pageXOffset,l=angular.element(k)[0].pageYOffset,d=f(function(){var h=b.bottom+l,p=b.right-(parseInt(getComputedStyle(Fa[0]).width,
10)+3)+c;e[a.options.columnFields.filterParams]&&"left"==e[a.options.columnFields.filterParams].templateAlignment&&(p=b.left+c);Fa.css("top",h+"px");Fa.css("left",p+"px");f.cancel(d)},1);f.cancel(x)},1)}}};a.closeFilterWindow=function(){Fa&&(Fa.unbind("mousedown"),Fa.remove())};var Wd=function(a){a&&a.unbind("click contextmenu blur dragover dragend focus keydown keyup keypress mousedown mouseenter mouseleave")},cf=function(b){b&&(b.bind("click",function(a){a.preventDefault();lb()}),b.bind("contextmenu",
function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&(La=e,e[a.options.rowFields.contextMenu]&&0<e[a.options.rowFields.contextMenu].length&&b.preventDefault(),ae(b,e),b.stopPropagation())}),b.bind("dragover",function(b){var e=a.getRowFromElem(this);if(e&&a.isRowEnabled(e)){if(a.isScrollBarVisible("vertical")){e=a.getMousePos(b);var c=q[0].getBoundingClientRect();e.x-=angular.element(k)[0].pageXOffset;e.y-=angular.element(k)[0].pageYOffset;var l=c.top+y+25;c=c.bottom-H-25;O&&C&&(c-=C[0].offsetHeight);
e.y<l?yc(!1):e.y>c?yc(!0):Ib()}else Ib();b.stopPropagation()}}),b.bind("dragend",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&(b.preventDefault(),a.dragDropStatus(!1),a.dropMark(),A.getData().source||A.clearData())}),b.bind("mouseenter",function(b){if(!ma){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&!wa&&(a.hoverRow=e,a.refresh(e),a.callRowHover(b,e),a.options.hoverSelection&&(hb=f(function(){hb&&a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0)},500)))}}),b.bind("mouseleave",
function(b){ma||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refresh(b),hb&&(f.cancel(hb),hb=null))}),b.bind("keydown",function(b){var e=a.getRowFromElem(this);if(e&&a.isRowEnabled(e)){var c=!0;a.callKeyDown(b,e);var l=a.getRowCurrentIndex(e);switch(b.keyCode){case 9:ce(b,e,l);break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:c=!1;break;case 33:de(b,l);break;case 34:ee(b,l);break;case 35:fe(b,l);break;case 36:ge(b,l);break;
case 37:he(b,e,l);break;case 32:ie(b,e);break;case 38:Yc(b,l);break;case 39:je(b,e,l);break;case 40:Zc(b,l);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}c&&b.stopPropagation()}}),b.bind("keyup",function(b){var e=a.getRowFromElem(this);if(e&&a.isRowEnabled(e)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,
e)}}),b.bind("keypress",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&a.callKeyPress(b,e)}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}),b.bind("focus",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)?a.callGotFocus(b,e):a.updateFocus()}),b.bind("blur",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&a.callLostFocus(b,e)}))},df=function(b){b&&(b.bind("dblclick",function(b){var e=a.getRowFromChildElem(this);
e&&a.isRowEnabled(e)&&(a.toggle(e),a.updateFocus(a.getRowCurrentIndex(e),a.options.expandColIndex),b.stopPropagation())}),b.bind("click",function(b){var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.toggle(e),a.updateFocus(a.getRowCurrentIndex(e),a.options.expandColIndex),b.stopPropagation())}),b.bind("touchend",function(b){b.preventDefault();var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.toggle(e),a.updateFocus(a.getRowCurrentIndex(e),a.options.expandColIndex),b.stopPropagation())}))},
Xd=function(a){a&&a.unbind("click dblclick touchend")},zc={x:0,y:0},Jb={x:0,y:0},Kb=!1,$c=!1,fb=null,ke=function(){return{x:angular.element(k)[0].pageXOffset,y:angular.element(k)[0].pageYOffset}},Lb=function(a){var b=ke();return{x:a.x-b.x,y:a.y-b.y}},ef=function(e,c,h){e&&(e.bind("dragstart",function(b){if(a.labelEditStatus())b.preventDefault();else{document.activeElement&&document.activeElement.blur();A.clearData();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e))if(ac(),a.isDragAllowed(e)){a.dragDropStatus(!0);
a.addDropMark();b.dataTransfer?(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text",e[a.options.rowFields.id]?e[a.options.rowFields.id].toString():"")):b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text",e[a.options.rowFields.id]?e[a.options.rowFields.id].toString():""));b={source:e,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":b.source=a.options.selectedRows;
break;case "multi-extended":b.source=a.options.selectedRows}A.setData(b)}else b.dataTransfer?b.dataTransfer.effectAllowed="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="none")}}),e.bind("dragover",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();var h=!0;b.dataTransfer?h="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(h="none"===b.originalEvent.dataTransfer.effectAllowed?
!1:!0);if(h&&(e=a.getRowFromChildElem(c))){h=c[0].getBoundingClientRect();var l=angular.element(k)[0].pageXOffset,p=angular.element(k)[0].pageYOffset,d=a.getMousePos(b);d.x-=h.left+l;d.y-=h.top+p;c=A.getDropPos(d,{x:0,y:0,width:c[0].offsetWidth,height:c[0].offsetHeight});l=A.getData();h=a.isDropAllowed(l.source,e,c);p={event:b,sourceTree:l.sourceCtrl?l.sourceCtrl.getCtrlName():"",dragRow:l.source,targetTree:a.getCtrlName(),targetRow:e,isDropAllowed:h,dropPos:c,mousePos:a.getMousePos(b)};p=a.callDragOver(p);
if(h&&!1!==p){p=a.getMousePos(b);b=p.y+16;p=p.x+20;d=a.getDropMarkWindow();d.empty();var f="iui-drop-marker-move-in";switch(c){case 1:f="iui-drop-marker-move-up";break;case 2:f="iui-drop-marker-move-down"}d.append("<span class='"+f+"'></span><span class='iui-drop-marker-title'>"+e[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:p});a.dropMark(h);A.setData({source:l.source,sourceList:l.sourceList,target:e,dropPos:c})}else b.dataTransfer?b.dataTransfer.dropEffect=
"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark()}}}),e.bind("drop",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();Eb();a.dropMark();e=!0;b.dataTransfer?e="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(e="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(e){var h=a.getRowFromChildElem(c);if(h){c=A.getData();
var l=c.source;l||(l=a.getDnDSource(b));if(e=a.isDropAllowed(l,h,c.dropPos)){a.toggle(h,!0);var p=a.getMousePos(b);l&&(e={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():"",dragRow:l,targetTree:a.getCtrlName(),targetRow:h,targetCell:a.getCellAt(p.x,p.y),isDropAllowed:e,dropPos:c.dropPos,mousePos:p},!1!==a.callDragDrop(e)&&(a.drop(c),m.$$phase||m.$apply()))}}}A.clearData();b.stopPropagation()}}),e.bind("dragenter",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){b.preventDefault();
if(a.options.autoExpand)var c=f(function(){Ka||(Ka=f(function(){Ka&&a.toggle(e,!0)},750));f.cancel(c)},1);var h=A.getData();h.source||(h.source=a.getDnDSource(b));h={event:b,sourceTree:h.sourceCtrl?h.sourceCtrl.getCtrlName():"",dragRow:h.source,targetTree:a.getCtrlName(),targetRow:h.target,mousePos:a.getMousePos(b)};a.callDragEnter(h);b.stopPropagation()}}),e.bind("dragleave",function(b){a.hoverRow=null;var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(b.preventDefault(),Eb(),e=A.getData(),
e.source||(e.source=a.getDnDSource(b)),e={event:b,sourceTree:e.sourceCtrl?e.sourceCtrl.getCtrlName():"",dragRow:e.source,targetTree:a.getCtrlName(),targetRow:e.target,mousePos:a.getMousePos(b)},a.callDragLeave(e),b.stopPropagation())}),e.bind("touchstart",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&(b.preventDefault(),(e=a.getTouchData(b))&&0<e.length)){$c=!0;var c=f(function(){$c=!1;f.cancel(c)},750);zc=Lb({x:e[0].pageX,y:e[0].pageY});a.closeFilterWindow();e=zc;if((e=a.getRowAt(e.x,
e.y))&&a.isRowEnabled(e)){var h=angular.element(this);a.mouseButtonStatus(!0);fb=e;var l=a.getRowCurrentIndex(e),p=parseInt(a.getIndexFromElem(this),10),d=a.getCell(l,p),g=a.getCellType(d,p),k=null,m=a.options.editorSettings;h[0].focus();a.updateFocus(l,p);d&&(k=a.getColumnById(d[a.options.cellFields.cid]));!k&&0<=p&&p<a.columnList.length&&(k=a.columnList[p]);var n="click"==a.options.editorSettings.activate;k&&k[a.options.columnFields.editorSettings]&&(m=k[a.options.columnFields.editorSettings],n=
void 0!=m.activate?"click"==m.activate:n);d&&d!=G?a.closeEditor(G):a.closeEditor();switch(g){case "checkbox":break;case "combobox":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);d&&0!=d[a.options.cellFields.allowEdit]&&k&&n?xb(angular.element(this),m,l,p):a.removeDropDownList();break;case "incell":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);!E&&d&&0!=d[a.options.cellFields.allowEdit]&&n&&a.openInCellEditor(h,d,k);break;case "dropdown":a.rowSelection(e,b.shiftKey,b.ctrlKey,
b.metaKey,null,void 0);!E&&d&&0!=d[a.options.cellFields.allowEdit]&&n&&a.openDropDownEditor(h,d,k);break;default:a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0),a.removeDropDownList(),d&&0!=d[a.options.cellFields.allowEdit]&&n&&Zb(b,angular.element(this))}}}}),e.bind("touchmove",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&(e=a.getTouchData(b))&&0<e.length){Jb=Lb({x:e[0].pageX,y:e[0].pageY});e=Math.abs(Jb.x-zc.x);var c=Math.abs(Jb.y-zc.y),h=q[0].getBoundingClientRect();
if(A.hitTest(Jb.x,Jb.y,h)){if(b.preventDefault(),N&&N.css("display","block"),!$c)if(!Kb&&(2<e||2<c)&&fb&&a.isRowEnabled(fb))if(angular.element(this),a.labelEditStatus())b.preventDefault();else{Kb=!0;A.clearData();if((e=a.getTouchData(b))&&0<e.length&&(Lb({x:e[0].pageX,y:e[0].pageY}),fb&&a.isRowEnabled(fb)&&(ac(),a.isDragAllowed(fb)))){a.dragDropStatus(!0);a.addDropMark();e={source:fb,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":e.source=a.options.selectedRows;
break;case "multi-extended":e.source=a.options.selectedRows}A.setData(e);if(e=a.getCellElemFromRow(fb))if(e=a.getContentElement(e))N.empty(),N.append(e.clone()),N.css("display","none"),q.append(N)}b.stopPropagation()}else if(Kb&&(angular.element(this),b.preventDefault(),(c=a.getTouchData(b))&&0<c.length)){e=ke();var l=Lb({x:c[0].pageX,y:c[0].pageY});if(c=a.getRowAt(l.x,l.y)){var p=a.getCellElemFromRow(c);if(p){h=p[0].getBoundingClientRect();p=A.getDropPos({x:l.x-h.left,y:l.y-h.top},{x:0,y:0,width:p[0].offsetWidth,
height:p[0].offsetHeight});h=A.getData();var d=a.isDropAllowed(h.source,c,p);b={event:b,sourceTree:h.sourceCtrl?h.sourceCtrl.getCtrlName():"",dragRow:h.source,targetTree:a.getCtrlName(),targetRow:c,isDropAllowed:d,dropPos:p,mousePos:l};var f=q[0].getBoundingClientRect();var g=l.x-f.left;f=l.y-f.top;N.css("top",f-16+"px");N.css("left",g+"px");N.css("display","block");b=a.callDragOver(b);if(d&&0!=b){b=l.y+e.y+16;e=l.x+e.x+20;l=a.getDropMarkWindow();l.empty();g="iui-drop-marker-move-in";switch(p){case 1:g=
"iui-drop-marker-move-up";break;case 2:g="iui-drop-marker-move-down"}l.append("<span class='"+g+"'></span><span class='iui-drop-marker-title'>"+c[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:e});a.dropMark(d);A.setData({source:h.source,sourceList:h.sourceList,target:c,dropPos:p})}else a.dropMark(),N&&N.css("display","none")}}else h=q[0].getBoundingClientRect(),c=h.top+y,h=h.bottom-H,O&&C&&(h-=C[0].offsetHeight),!a.options.allowDrop||l.y<c||l.y>h?(a.dropMark(),
N&&N.css("display","none")):(f=q[0].getBoundingClientRect(),g=l.x-f.left,f=l.y-f.top,N.css("top",f-16+"px"),N.css("left",g+"px"),N.css("display","block"),c=A.getData(),h={source:c.source,sourceCtrl:c.sourceCtrl,target:null,dropPos:-1},A.setData(h),b={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():"",dragRow:c.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:l},b=a.callDragOver(b),0==b?a.dropMark():(b=l.y+e.y+16,e=l.x+e.x+20,l=a.getDropMarkWindow(),
l.empty(),l.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(m.name?m.name:"TreeGrid")+"</span>"),a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:e}),a.dropMark(!0)))}}else b.preventDefault(),a.dropMark(),a.cancelScrollTimer(),N&&N.css("display","none")}}),e.bind("touchend",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){if((e=a.getTouchData(b))&&0<e.length){e=Lb({x:e[0].pageX,y:e[0].pageY});var c=q[0].getBoundingClientRect();
if(A.hitTest(e.x,e.y,c))if(Kb){angular.element(this);b.preventDefault();Eb();a.dropMark();Xb();if((e=a.getTouchData(b))&&0<e.length){e=Lb({x:e[0].pageX,y:e[0].pageY});var h=a.getRowAt(e.x,e.y);if(h){c=A.getData();var l=c.source,p=a.isDropAllowed(l,h,c.dropPos);p&&(a.toggle(h,!0),l&&(e={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():"",dragRow:l,targetTree:a.getCtrlName(),targetRow:h,isDropAllowed:p,dropPos:c.dropPos,mousePos:e},e=a.callDragDrop(e),!1!==e&&(a.drop(c),m.$$phase||m.$apply())))}else a.dropMark(),
h=q[0].getBoundingClientRect(),c=h.top+y,h=h.bottom-H,O&&C&&(h-=C[0].offsetHeight),e.y>=c&&e.y<=h&&(c=A.getData(),c.source&&(e={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():"",dragRow:c.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:e},e=a.callDragDrop(e),!1!==e&&(a.drop(c),m.$$phase||m.$apply())))}A.clearData();a.dragDropStatus(!1);b.stopPropagation()}else a.mouseButtonStatus(!1),(e=a.getRowFromChildElem(this))&&a.isRowEnabled(e)&&
a.updateSelection(b,e,b.shiftKey),ac()}e=Kb;a.removeDropMark();Xb();Jb={x:0,y:0};Kb=!1;fb=null;e&&b.stopPropagation()}}),e.bind("dblclick",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();if(1===b.which){var h=a.getRowCurrentIndex(e),l=parseInt(a.getIndexFromElem(this),10),p=a.getCell(h,l),d=a.getCellType(p,l),f=null,g=a.options.editorSettings;p&&(f=a.getColumnById(p[a.options.cellFields.cid]));!f&&0<=l&&l<a.columnList.length&&(f=
a.columnList[l]);var k="dblclick"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(g=f[a.options.columnFields.editorSettings],k=void 0!=g.activate?"dblclick"==g.activate:k);switch(d){case "checkbox":break;case "combobox":p&&0!=p[a.options.cellFields.allowEdit]&&f&&k?xb(angular.element(this),g,h,l):a.removeDropDownList();break;case "incell":!E&&p&&0!=p[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(c,p,f);break;case "dropdown":!E&&p&&0!=p[a.options.cellFields.allowEdit]&&
k&&a.openDropDownEditor(c,p,f);break;default:a.removeDropDownList(),p&&0!=p[a.options.cellFields.allowEdit]&&k&&Zb(b,angular.element(this),0)}0!=a.callCellDblClick(e,p,a.getMousePos(b))&&"checkbox"!=d&&0!=a.callRowDblClick(e,a.getMousePos(b))&&p&&!k&&(a.toggle(e),a.updateFocus(h,l))}b.stopPropagation()}}),e.bind("mouseenter",function(e){if(!ma){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!wa){var h=a.getRowCurrentIndex(c),l=parseInt(a.getIndexFromElem(this),10);if(h=a.getCell(h,l))if(a.hoverCell=
h,a.refresh(c),a.callCellHover(e,h),e=angular.element(this),h&&0!=h[a.options.cellFields.allowEdit])switch(l=a.getCellType(h,l),l){case "combobox":ub||tc(e);break;case "incell":E&&h==G||b(e,l);break;case "dropdown":E&&h!=G||b(e,l);break;default:Ja(),d()}else Ja()}}}),e.bind("mouseleave",function(b){if(!ma&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var e=parseInt(a.getIndexFromElem(this),10);a.getCell(b,e)&&(Ja(),d())}}),e.bind("keydown",function(b){var e=
a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=!0,h=angular.element(this);a.callKeyDown(b,e);var l=a.getRowCurrentIndex(e),p=parseInt(a.getIndexFromElem(this),10),d=a.getCell(l,p),f=a.getCellType(d,p),g=a.getColumnById(d[a.options.cellFields.cid]);!g&&0<=p&&p<a.columnList.length&&(g=a.columnList[p]);switch(b.keyCode){case 9:ce(b,e,l,p);break;case 13:switch(f){case "checkbox":le(d,p);break;case "combobox":d&&0!=d[a.options.cellFields.allowEdit]?g&&xb(angular.element(this),g[a.options.columnFields.editorSettings],
l,p):a.removeDropDownList();break;case "incell":!E&&d&&0!=d[a.options.cellFields.allowEdit]&&a.openInCellEditor(h,d,g);break;case "dropdown":!E&&d&&0!=d[a.options.cellFields.allowEdit]&&a.openDropDownEditor(h,d,g);break;default:d&&0!=d[a.options.cellFields.allowEdit]&&Zb(b,angular.element(this),0)}break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:c=!1;break;case 33:de(b,l,p);break;case 34:ee(b,l,p);break;case 35:fe(b,l,p);break;case 36:ge(b,
l,p);break;case 37:he(b,e,l,p);break;case 32:ie(b,e,d,p);break;case 38:Yc(b,l,p);break;case 39:je(b,e,l,p);break;case 40:Zc(b,l,p);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}c&&b.stopPropagation()}}),e.bind("keyup",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||
a.multiSelection(!1)}a.callKeyUp(b,e);b.stopPropagation()}}),e.bind("keypress",function(b){var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.callKeyPress(b,e),b.stopPropagation())}),e.bind("click",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){if(1===b.which){var c=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10);c=a.getCell(c,h);a.callCellClick(b,e,c,a.getMousePos(b));a.callRowClick(b,e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mousedown",function(b){a.closeFilterWindow();
var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);a.mouseButtonStatus(!0);switch(b.which){case 1:var h=a.getRowCurrentIndex(e),l=parseInt(a.getIndexFromElem(this),10),p=a.getCell(h,l),d=a.getCellType(p,l),f=null,g=a.options.editorSettings;p&&(f=a.getColumnById(p[a.options.cellFields.cid]));!f&&0<=l&&l<a.columnList.length&&(f=a.columnList[l]);var k="click"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(g=f[a.options.columnFields.editorSettings],
k=void 0!=g.activate?"click"==g.activate:k);p&&p!=G?a.closeEditor(G):a.closeEditor();switch(d){case "checkbox":break;case "combobox":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);p&&0!=p[a.options.cellFields.allowEdit]&&f&&k?xb(angular.element(this),g,h,l):a.removeDropDownList();break;case "dropdown":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);!E&&p&&0!=p[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(c,p,f);break;case "incell":a.rowSelection(e,b.shiftKey,
b.ctrlKey,b.metaKey,null,void 0);!E&&p&&0!=p[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(c,p,f);break;default:if("image"==d?0!=g.allowSelection:1)a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0),a.removeDropDownList(),p&&0!=p[a.options.cellFields.allowEdit]&&k&&Zb(b,angular.element(this))}break;case 3:a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,!0),a.callRowRightClick(e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mouseup",function(b){a.mouseButtonStatus(!1);if(1==
b.which){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10);c=a.getCell(c,h);var l=a.getCellType(c,h),p=null,d=a.options.editorSettings;c&&(p=a.getColumnById(c[a.options.cellFields.cid]));!p&&0<=h&&h<a.columnList.length&&(p=a.columnList[h]);p&&p[a.options.columnFields.editorSettings]&&(d=p[a.options.columnFields.editorSettings]);("image"==l?0!=d.allowSelection:1)&&a.updateSelection(b,e,b.shiftKey)}ac()}}),e.bind("focus",
function(e){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var h=a.getRowCurrentIndex(c),l=parseInt(a.getIndexFromElem(this),10);h=a.getCell(h,l);a.callGotFocus(e,c,h);if(h&&0!=h[a.options.cellFields.allowEdit])switch(e=angular.element(this),l=a.getCellType(h,l),l){case "combobox":ub||tc(e);break;case "incell":E||b(e,l);break;case "dropdown":E||b(e,l);break;default:Ja()}else Ja()}}),e.bind("blur",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=a.getRowCurrentIndex(e),
h=parseInt(a.getIndexFromElem(this),10);c=a.getCell(c,h);a.callLostFocus(b,e,c)}d()}))},Yd=function(a){a&&a.unbind("blur click dragstart dragover drop dragenter dragleave dblclick focus keydown keypress keyup mouseenter mouseleave mousemove mousedown mouseup touchstart touchmove touchend")},ff=function(b){b&&(b.bind("mouseenter",function(b){if(!ma){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&!wa&&(a.hoverRow=e,a.refreshHover(e),a.callRowHover(b,e))}}),b.bind("mouseleave",function(b){ma||(a.hoverRow=
null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refreshHover(b))}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}))},gf=function(e,c,h){e&&(e.bind("touchstart",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){b.preventDefault();a.closeFilterWindow();b=angular.element(this);var c=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10);e=a.getCell(c,h,e[a.options.rowFields.fixed]);var l=a.getCellType(e,h),p=null,d=a.options.editorSettings;
b[0].focus();e&&(p=a.getColumnById(e[a.options.cellFields.cid]));!p&&0<=h&&h<a.columnList.length&&(p=a.columnList[h]);var f="click"==a.options.editorSettings.activate;p&&p[a.options.columnFields.editorSettings]&&(d=p[a.options.columnFields.editorSettings],f=void 0!=d.activate?"click"==d.activate:f);e&&e!=G?a.closeEditor(G):a.closeEditor();switch(l){case "checkbox":break;case "combobox":e&&0!=e[a.options.cellFields.allowEdit]&&p&&f?xb(angular.element(this),d,c,h):a.removeDropDownList();break;case "incell":!E&&
e&&0!=e[a.options.cellFields.allowEdit]&&f&&a.openInCellEditor(b,e,p);break;case "dropdown":!E&&e&&0!=e[a.options.cellFields.allowEdit]&&f&&a.openDropDownEditor(b,e,p);break;default:a.removeDropDownList()}}}),e.bind("mouseenter",function(e){if(!ma){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!wa){var h=a.getRowCurrentIndex(c),l=parseInt(a.getIndexFromElem(this),10);if(h=a.getCell(h,l,c[a.options.rowFields.fixed]))if(a.hoverCell=h,a.refreshHover(c),a.callCellHover(e,h),e=angular.element(this),
h&&0!=h[a.options.cellFields.allowEdit])switch(l=a.getCellType(h,l),l){case "combobox":ub||tc(e);break;case "incell":E&&h==G||b(e,l);break;case "dropdown":E&&h!=G||b(e,l);break;default:Ja(),d()}else Ja()}}}),e.bind("mouseleave",function(b){if(!ma&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){var e=a.getRowCurrentIndex(b),c=parseInt(a.getIndexFromElem(this),10);a.getCell(e,c,b[a.options.rowFields.fixed])&&(Ja(),d())}}),e.bind("click",function(b){var e=a.getRowFromChildElem(this);
if(e&&a.isRowEnabled(e)){if(1===b.which){var c=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10);c=a.getCell(c,h,e[a.options.rowFields.fixed]);a.callCellClick(b,e,c,a.getMousePos(b));a.callRowClick(b,e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("dblclick",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();if(1===b.which){var h=a.getRowCurrentIndex(e),l=parseInt(a.getIndexFromElem(this),10),p=a.getCell(h,l,e[a.options.rowFields.fixed]),
d=a.getCellType(p,l),f=null,g=a.options.editorSettings;p&&(f=a.getColumnById(p[a.options.cellFields.cid]));!f&&0<=l&&l<a.columnList.length&&(f=a.columnList[l]);var k="dblclick"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(g=f[a.options.columnFields.editorSettings],k=void 0!=g.activate?"dblclick"==g.activate:k);switch(d){case "checkbox":break;case "combobox":p&&0!=p[a.options.cellFields.allowEdit]&&f&&k?xb(angular.element(this),g,h,l):a.removeDropDownList();break;
case "incell":!E&&p&&0!=p[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(c,p,f);break;case "dropdown":!E&&p&&0!=p[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(c,p,f);break;default:a.removeDropDownList()}a.callCellDblClick(e,p,a.getMousePos(b));a.callRowDblClick(e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mousedown",function(b){a.closeFilterWindow();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);a.mouseButtonStatus(!0);switch(b.which){case 1:var h=
a.getRowCurrentIndex(e),l=parseInt(a.getIndexFromElem(this),10);e=a.getCell(h,l,e[a.options.rowFields.fixed]);var p=a.getCellType(e,l),d=null,f=a.options.editorSettings;e&&(d=a.getColumnById(e[a.options.cellFields.cid]));!d&&0<=l&&l<a.columnList.length&&(d=a.columnList[l]);var g="click"==a.options.editorSettings.activate;d&&d[a.options.columnFields.editorSettings]&&(f=d[a.options.columnFields.editorSettings],g=void 0!=f.activate?"click"==f.activate:g);e&&e!=G?a.closeEditor(G):a.closeEditor();switch(p){case "checkbox":break;
case "combobox":e&&0!=e[a.options.cellFields.allowEdit]&&d&&g?xb(angular.element(this),f,h,l):a.removeDropDownList();break;case "dropdown":!E&&e&&0!=e[a.options.cellFields.allowEdit]&&g&&a.openDropDownEditor(c,e,d);break;case "incell":!E&&e&&0!=e[a.options.cellFields.allowEdit]&&g&&a.openInCellEditor(c,e,d);break;default:a.removeDropDownList()}break;case 3:a.callRowRightClick(e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mouseup",function(a){1==a.which&&ac()}))};a.getTopRow=function(){return a.isRowIndexInRange(w-
1)?a.currentList[w]:0<a.currentList.length?a.currentList[0]:null};a.getFooterElem=function(a){switch(a){case "left":return va;case "right":return ba}return Ua};a.getHeaderElem=function(a){switch(a){case "left":return ca;case "right":return Y}return na};a.getRowElems=function(a,b){switch(a){case "left":switch(b){case "top":return ta?ta.find("tr"):null;case "bottom":return ua?ua.find("tr"):null;default:return Va?Va.find("tr"):null}case "right":switch(b){case "top":return ia?ia.find("tr"):null;case "bottom":return Ga?
Ga.find("tr"):null;default:return Wa?Wa.find("tr"):null}default:switch(b){case "top":return Z?Z.find("tr"):null;case "bottom":return X?X.find("tr"):null;default:return ka?ka.find("tr"):null}}};var me=function(b){var e="";b.icon?e=b.icon:a.options.rowIcon&&(e=a.options.rowIcon);return e},ad=function(b){return b.icon||a.options.rowIcon},ce=function(b,c,h,p){var e=a.currentList.length;0<e&&(b.shiftKey?g.isEqual(c[a.options.rowFields.id],a.currentList[0][a.options.rowFields.id])||Yc(b,h,p):g.isEqual(c[a.options.rowFields.id],
a.currentList[e-1][a.options.rowFields.id])||Zc(b,h,p))},Zc=function(b,c,h){b.preventDefault();focusDelayTime=0;var e=c,l=w+B-2;l=l<a.currentList.length-1?l:a.currentList.length-1;e>=l&&T&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);if(e=a.getNextRow(e)){c=a.getRowCurrentIndex(e);c>l&&T&&(a.ensureVisible(e,"bottom"),focusDelayTime=100);a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var d=f(function(){a.updateFocus(c,h);f.cancel(d)},focusDelayTime)}},
Yc=function(b,c,h){b.preventDefault();focusDelayTime=0;var e=w;e=0<e?e:0;c==e&&T&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);var l=a.getPrevRow(c);if(l){c=a.getRowCurrentIndex(l);c<e&&T&&(a.ensureVisible(l,"bottom"),focusDelayTime=100);a.rowSelection(l,b.shiftKey,b.ctrlKey);var d=f(function(){a.updateFocus(c,h);f.cancel(d)},focusDelayTime)}},je=function(b,c,h,d){b.preventDefault();if((void 0===d||0<=d&&d==a.options.expandColIndex)&&!a.isRowExpanded(c)&&
c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,!0),a.updateFocus(h,d);else if(0<=d){focusDelayTime=0;var e=d+1;b=a.columnList.length-1;e===b&&(focusDelayTime=1);if(0<=e&&e<=b){b=g.getPageRect(q);c=a.getElemFromCell(h,e);c=g.getPageRect(c);c.left+c.width>b.left+b.width&&(b=a.scrollPos,b.x+=c.width,a.setScrollPos(b));var l=f(function(){a.updateFocus(h,e);f.cancel(l)},focusDelayTime)}}},he=function(b,c,h,d){b.preventDefault();if((void 0===d||0<=d&&d==a.options.expandColIndex)&&
a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,!1),a.updateFocus(h,d);else if(0<=d){focusDelayTime=0;var e=1<d?d-1:0;if(0<=e){b=g.getPageRect(q);c=a.getElemFromCell(h,e);c=g.getPageRect(c);c.left<b.left&&(b=a.scrollPos,b.x-=c.width,a.setScrollPos(b));var l=f(function(){a.updateFocus(h,e);f.cancel(l)},focusDelayTime)}}},de=function(b,c,h){b.preventDefault();var e=c-B;e=0<e?e:0;if(e!==c){focusDelayTime=1;var l=a.getPrevRow(e+1);if(l){a.scrollTo(l);a.rowSelection(l,
b.shiftKey,b.ctrlKey,b.metaKey);m.$apply();var d=f(function(){a.updateFocus(a.getRowCurrentIndex(l),h);f.cancel(d)},focusDelayTime)}}},ee=function(b,c,h){b.preventDefault();var e=c+B;a.options.showHeader&&e--;a.options.showFooter&&e--;e=e<a.currentList.length-1?e:a.currentList.length-1;if(e!==c){focusDelayTime=1;var l=a.getNextRow(e-1);if(l){a.scrollTo(l,"bottom");a.rowSelection(l,b.shiftKey,b.ctrlKey,b.metaKey);m.$apply();var d=f(function(){a.updateFocus(a.getRowCurrentIndex(l),h);f.cancel(d)},focusDelayTime)}}},
fe=function(b,c,h){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:Q.y});var e=a.getLastRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var l=f(function(){a.updateFocus(a.getRowCurrentIndex(e),h);f.cancel(l)},1)}},ge=function(b,c,h){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:0});var e=a.getFirstRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var l=f(function(){a.updateFocus(a.getRowCurrentIndex(e),h);f.cancel(l)},1)}},le=function(b,c){if(b&&0!=b[a.options.cellFields.allowEdit]){var e=
a.getColumnById(b[a.options.cellFields.cid]);!e&&0<=c&&c<a.columnList.length&&(e=a.columnList[c]);if(e){var l=b[a.options.cellFields.value];if((e=e[a.options.columnFields.editorSettings])&&1==e.threeState)switch(g.isString(l)||(l="unchecked"),l){case "checked":l="unchecked";break;case "indeterminate":l="checked";break;default:l="indeterminate"}else l=g.isBoolean(l)?!l:!0;b[a.options.cellFields.value]=l;m.$apply()}}},ie=function(b,c,h,d){b.preventDefault();le(h,d);a.rowSelection(c,b.shiftKey,b.ctrlKey,
b.metaKey,c.selected);m.$apply()},ka=null,Z=null,X=null,Xa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-top"></div>'),na=null,Ha=angular.element('<div class="iui-treegrid-block iui-treegrid-block-left"></div>'),J=0,Mb=0,ca=null,va=null,Va=null,ta=null,ua=null,xa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-right"></div>'),Ma=0,Nb=0,Y=null,ba=null,Wa=null,ia=null,Ga=null,Na=angular.element('<div class="iui-treegrid-block iui-treegrid-block-bottom"></div>'),
Ua=null,w=0,z=null,v=null,la=null,oa=null,B=100,R=0,K=0,mb=0,Ac=0,y=0,H=0,Ia=0,Bc=0,Ob=0,Cc=!1,ma=!1,bc=9,cc=9,Dc=0,Ya=0,nb=0,zb=1,Ec=0,Fc=0,ob=0,Pb=0,Gc=1,U=null,da=null,O=!1,T=!1;this.scrollMousePos=null;var Q={x:0,y:0},Fb=[];m.verScrollVisibility=!1;m.$watch("verScrollVisibility",function(b,c){b!=c&&a.updateCurrentLayout(!0)});a.getColumnWidth=function(b){var e=100;b&&b[a.options.columnFields.width]&&(e=b[a.options.columnFields.width],g.isPercent(e)?(b=q[0].clientWidth-2*a.columnList.length,T&&
P&&(b-=P[0].offsetWidth),e=Math.floor(parseInt(e,10)/100*b)):g.isString&&(e=parseInt(e,10)));return e};a.getColumnWidthFromData=function(b){var e=0;if(z){for(var c=null,d=0;d<z.data.length;d++)for(var f=0;f<z.data[d].length;f++){var k=z.data[d][f];if(k.column==b||g.isEqual(k.column[a.options.columnFields.id],b[a.options.columnFields.id])){c=k;break}if(c)break}c&&(e=c.width)}return e};var dc=function(b){var e=0;if((b=a.getRowElems(b))&&0<b.length&&(b=angular.element(b[0]))&&(b=b.find("td"))&&0<b.length)for(var c=
0;c<b.length;c++){var d=angular.element(b[c]);e+=d[0].offsetWidth}return e},kf=function(){var b=0;if(a.options.showHeader||a.options.showFooter){var c=a.options.showHeader?a.getHeaderElem():a.getFooterElem();if(c&&(c=c.find("td"))&&0<c.length)for(var h=0;h<c.length;h++){var d=angular.element(c[h]);d[0].attributes["data-element"]&&"column-header"==d[0].attributes["data-element"].value.toString()&&d[0].attributes["data-level"]&&"0"==d[0].attributes["data-level"].value.toString()&&(b+=d[0].offsetWidth)}a.isThereLeftFixedColumns&&
(ca?J=ca[0].offsetWidth:va&&(J=va[0].offsetWidth),b+=J);a.isThereRightFixedColumns&&(Y?Ma=Y[0].offsetWidth:ba&&(Ma=ba[0].offsetWidth),b+=Ma)}else 0<a.currentList.length&&(ka&&(b+=dc()),a.isThereLeftFixedColumns&&(b+=dc("left")),a.isThereRightFixedColumns&&(b+=dc("right")));return b};a.updateScrollVisibility=function(){var b=f(function(){O&&a.options.showScroll.horizontal?C.css("display","block"):(C.css("display","none"),Q.x=0);T&&a.options.showScroll.vertical?P.css("display","block"):(P.css("display",
"none"),Q.y=0);O&&a.options.showScroll.horizontal&&T&&a.options.showScroll.vertical?cb.css("display","block"):cb.css("display","none");f.cancel(b)},1)};q.append(C);q.append(P);q.append(cb);a.updateScrollVisibility();var ne=function(){return Z?Z[0].offsetHeight:ta?ta[0].offsetHeight:ia?ia[0].offsetHeight:0},oe=function(){return X?X[0].offsetHeight:ua?ua[0].offsetHeight:Ga?Ga[0].offsetHeight:0},ec=0,fc=999;a.updateViewSize=function(b){var e=f(function(){Ob=0;var b=q[0].clientWidth;T&&P&&(b-=P[0].offsetWidth);
O=!1;0<a.columnList.length&&(Ob+=kf(),Ob>b&&(C.unbind("mousedown"),C.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor(null,null,!0);b=g.getClientMousePos(b,this);var e=Math.floor(q[0].clientWidth);U&&(b.x<U[0].offsetLeft?a.setScrollPos({x:a.scrollPos.x-e,y:a.scrollPos.y}):b.x>U[0].offsetLeft+U[0].offsetWidth&&a.setScrollPos({x:a.scrollPos.x+e,y:a.scrollPos.y}))}}),U=angular.element(C.children().eq(0)),O=!0,U.bind("mousedown",function(b){a.options.enabled&&
(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which&&(M.scrollMousePos=a.getMousePos(b),Cc=!0));b.stopPropagation()})));T=!1;m.verScrollVisibility=!1;0<a.currentList.length&&!a.options.autoSize&&(b=0,a.options.paging.enabled&&ea&&(b=ea[0].offsetHeight),Ia=ne(),Bc=oe(),b=q[0].clientHeight-b-(y+H)-Ia-Bc,O&&C&&(b-=C[0].offsetHeight),B=0<R?Math.floor(b/R)+1:0<y?Math.floor(b/y):100,B<a.currentList.length+1&&(P.unbind("mousedown"),P.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor(null,null,!0);b=g.getClientMousePos(b,this);var e=Math.floor(q[0].clientHeight);da&&(b.y<da[0].offsetTop?(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-e}),yc(!1,e)):b.y>da[0].offsetTop+da[0].offsetHeight&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e}),yc(!0,e)))}}),da=angular.element(P.children().eq(0)),T=!0,m.verScrollVisibility=!0,da.bind("mousedown",function(b){if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,
!0),1===b.which)){M.scrollMousePos=a.getMousePos(b);ma=!0;ec=0;fc=999;for(var e=0,c=!1,h=!1,l=a.scrollPos.x+mb-(J+Ma),d=0;d<a.columnList.length;d++)if(!a.isColumnFixed(a.columnList[d])){var p=a.getColumnWidth(a.columnList[d])+4;e+=p;!c&&e>=a.scrollPos.x&&(ec=d,c=!0);!h&&e>=l&&(fc=d,h=!0);if(c&&h)break}}b.stopPropagation()})));O||(C.unbind("mousedown"),Q.x=0);T||(P.unbind("mousedown"),Q.y=0);f.cancel(e);!O&&0<a.scrollPos.x&&a.setScrollPos({x:0,y:a.scrollPos.y});!T&&0<a.scrollPos.y&&a.setScrollPos({x:a.scrollPos.x,
y:0})},1)};a.updateScrollView=function(){bd()};var bd=function(){var b=f(function(){var e=0;a.options.paging.enabled&&ea&&(e=ea[0].offsetHeight);mb=q[0].offsetWidth-2;Ac=q[0].offsetHeight-2-e;O&&a.options.showScroll.horizontal&&(Ac-=C[0].offsetHeight);T&&a.options.showScroll.vertical&&(mb-=P[0].offsetWidth);Da.css("width",mb+"px");Da.css("height",Ac+"px");O&&(C.css("left","0px"),C.css("bottom",e+"px"),C.css("width",mb-2+"px"));var c=2;a.options.paging.enabled&&ea&&(c=4);T&&(P.css("top","0px"),P.css("right",
"0px"),P.css("height",Ac-c+"px"));O&&T&&(cb.css("left","auto"),cb.css("right","0px"));var d=f(function(){Ia=ne();Bc=oe();var b=y+Ia;O&&mb<Ob&&(Ya=2,nb=C[0].clientWidth-4,Dc=0,nb>Ya&&(Dc=nb-Ya),bc=Math.floor(Dc*mb/Ob),9>bc&&(bc=9),U.css("width",bc+"px"),Q.x=Ob-mb,zb=Q.x/(Dc-bc-2));var c=a.currentList.length+1;T&&0<a.currentList.length&&B<c&&(ob=2,Pb=P[0].clientHeight-4,Ec=0,Pb>ob&&(Ec=Pb-ob),cc=Math.floor(Ec*B/c),9>cc&&(cc=9),da.css("height",cc+"px"),Gc=(c-B+1)/(Ec-cc-2),Q.y=Math.floor((c-B+1)*R),
0>Q.y&&(Q.y=0),0==w?da.css("top",ob+"px"):w+B-1==a.currentList.length&&da.css("top",Pb-da[0].offsetHeight+"px"));a.isThereLeftFixedColumns?(ca?J=ca[0].offsetWidth:va?J=va[0].offsetWidth:0<a.currentList.length&&(J=dc("left")),Mb=q[0].clientHeight-e-y-H,O&&(Mb-=C[0].offsetHeight),Ha.css("width",J+"px"),Ha.css("height",Mb+"px"),na&&na.css("left",J+"px"),ka&&ka.css("left",J+"px"),Z&&Z.css("left",J+"px"),X&&X.css("left",J+"px"),Ua&&Ua.css("left",J+"px")):Ha&&(Ha.css("width","0"),Ha.css("height","0"));
a.isThereRightFixedColumns?(Y?Ma=Y[0].offsetWidth:ba?Ma=ba[0].offsetWidth:0<a.currentList.length&&(Ma=dc("right")),Nb=q[0].clientHeight-e-y-H,O&&(Nb-=C[0].offsetHeight),c=0,T&&(c=P[0].offsetWidth),Y&&Y.css("right",c+"px"),xa.css("right",c+"px"),xa.css("width",Ma+"px"),xa.css("height",Nb+"px"),ba&&ba.css("right",c+"px")):xa&&(xa.css("width","0"),xa.css("height","0"));c=e;O&&C&&(c+=C[0].offsetHeight);Na.css("bottom",c+"px");ka&&ka.css("top",b+"px");X&&X.css("bottom",H+"px");Va&&Va.css("top",Ia+"px");
Wa&&Wa.css("top",Ia+"px");b=a.scrollPos.x;void 0!=b&&(0>b&&(b=0),b>Q.x&&(b=Q.x),a.scrollPos.x=b,b=!1!==a.options.rtl?Math.floor(a.scrollPos.x/zb)-(nb-U[0].offsetWidth-Ya):Math.floor(a.scrollPos.x/zb)+Ya,O&&U&&U.css("left",b+"px"),cd());a.updateAutoLayout();f.cancel(d)},1);f.cancel(b)},5)};a.updateColumnWidth=function(){if(a.options.fillSpace){for(var b=0,c=0;c<a.columnList.length;c++)b+=a.getColumnWidth(a.columnList[c])+4;if(b<q[0].clientWidth){b=(q[0].clientWidth-b)/a.columnList.length;for(c=0;c<
a.columnList.length;c++){var h=a.getColumnWidth(a.columnList[c])+b;a.columnList[c][a.options.columnFields.width]=h}return!0}}return!1};m.onCellValueChanging=function(b,c,h){var e=c+w,l=a.getCell(e,h);if(l&&0==l[a.options.cellFields.allowEdit])return!1;l=!0;var d=a.getColumnObject(h),f="label",g=null;d&&(f=d[a.options.columnFields.editorType],g=d[a.options.columnFields.editorSettings]);switch(f){case "checkbox":b=g&&1==g.threeState?b.checkState:b.checked;l=a.callCellValueChanging(a.getRowObject(e),
a.getCellObject(e,h),b);break;case "combobox":l=a.callCellValueChanging(a.getRowObject(c),a.getCellObject(c,h),b.item)}return l};m.onCellValueChanged=function(b,c,h){var e=c+w,l=a.getColumnObject(h),d="label",f=null;l&&(d=l[a.options.columnFields.editorType],f=l[a.options.columnFields.editorSettings]);switch(d){case "checkbox":b=f&&1==f.threeState?b.checkState:b.checked;a.callCellValueChanged(a.getRowObject(e),a.getCellObject(e,h),b);break;case "combobox":if(e=a.getCell(c,h))e[a.options.cellFields.value]=
b.item,m.$apply(),"optimal"==a.options.displayMode&&a.updateView();a.removeDropDownList(!0);a.updateFocus(c,h);a.callCellValueChanged(a.getRowObject(c),a.getCellObject(c,h),b.item)}};m.onEditorClick=function(b,c,h){c+=w;var e=a.getColumnObject(h),l="label";e&&(l=e[a.options.columnFields.editorType]);switch(l){case "checkbox":a.callCellClick(b,a.getRowObject(c),a.getCellObject(c,h),a.getMousePos(b))}};a.setDefaultCellValue=function(b,c,h){if(void 0==b[a.options.cellFields.value]){var e=void 0;switch(c){case "checkbox":e=
h&&1==h.threeState?"unchecked":!1;break;case "image":e=""}void 0!=e&&(b[a.options.cellFields.value]=e)}};a.getColumnTemplateUrl=function(b,c){return c?b[a.options.columnFields.templateSettings].footer?b[a.options.columnFields.templateSettings].footer.url:null:b[a.options.columnFields.templateSettings].header?b[a.options.columnFields.templateSettings].header.url:null};var dd=function(b){b=void 0==b?"none":b;var e='<table cellpadding="0" cellspacing="0" style="position:absolute;top:0;">';if(0<a.relatedColumns.length&&
0<a.completeColumnList.length){e+="<tr>";for(var c=0;c<a.completeColumnList[0].length;c++){var d=a.completeColumnList[0][c];e+='<td class="iui-treegrid-column-expand-cell" data-level="0" data-index="'+c+'" data-element="column-expand-cell" colspan="'+d.colSpan+'">';e+='<div class="iui-treegrid-column-expand-cell-content">';if(a.isColumnRelated(d.column)&&(d=a.getColumnRelatedObject(d.column))){var f=a.isTherePrevRelatedColumn(d),g=a.isThereNextRelatedColumn(d);if(d.children&&0<d.children.length){var k=
"iui-treegrid-column-expand-box";k=0!=d.expanded?k+" iui-treegrid-column-expand-box-close":k+" iui-treegrid-column-expand-box-open";e+='<span class="'+k+'"></span>'}else if(f||g)e+='<span class="iui-treegrid-column-expand-line-vertical"></span>';f&&(e+='<span class="iui-treegrid-column-expand-line-left"></span>');g&&0!=d.expanded&&(e+='<span class="iui-treegrid-column-expand-line-right"></span>')}e+="</div></td>"}e+="</tr>"}for(f=0;f<a.completeColumnList.length;f++){e+="<tr>";for(c=0;c<a.completeColumnList[f].length;c++)d=
a.completeColumnList[f][c],g=d.column[a.options.columnFields.fixed],g=void 0==g?"none":g,g==b&&(e+='<td iui-class="{{data['+f+"]["+c+'].style.header.general}}" data-level="'+f+'"  data-index="'+c+'" data-element="column-header"',0<d.colSpan&&(e+=' colspan="'+d.colSpan+'"'),0<d.rowSpan&&(e+=' rowspan="'+d.rowSpan+'"'),e+='><div iui-class="{{data['+f+"]["+c+'].style.header.cell}}" data-element="column-header-cell"',e+=' iui-contextmenu menu-items="data['+f+"]["+c+"].column."+a.options.columnFields.contextMenu+
'"',e+=' iui-style="overflow:hidden;width:{{data['+f+"]["+c+"].width}}px;text-align:{{data["+f+"]["+c+'].headerAlignment}};">',e+='<span iui-class="{{data['+f+"]["+c+'].style.header.content}}" data-element="cell-content"',e+=' iui-tooltip="data['+f+"]["+c+"].column."+a.options.columnFields.headerTooltip+'">',e+="{{data["+f+"]["+c+"].column."+a.options.columnFields.headerText+"}}</span>",e+='<span iui-class="{{data['+f+"]["+c+'].style.filtering}}" data-level="'+f+'" data-index="'+c+'" data-element="filter-button" ng-show="data['+
f+"]["+c+'].showFiltering"></span>',e+='<span iui-class="{{data['+f+"]["+c+'].style.sorting}}" data-level="'+f+'" data-index="'+c+'" data-element="sort-button" ng-show="data['+f+"]["+c+'].showSorting"></span>',e+="</div>",e+="</td>");e+="</tr>"}return e+"</table>"},ed=function(b){b=void 0==b?"none":b;var e='<table cellpadding="0" cellspacing="0" style="position:absolute;bottom:0;"><tr>';for(var c=0;c<a.columnList.length;c++){var d=a.columnList[c];var f=d[a.options.columnFields.fixed];f=void 0==f?
"none":f;f==b&&(e+='<td iui-class="{{dataFooter['+c+'].style.footer.general}}" data-index="'+c+'" data-element="column-footer">',e+='<div iui-class="{{dataFooter['+c+'].style.footer.cell}}" data-element="column-footer-cell"',e+=' iui-contextmenu menu-items="dataFooter['+c+"].column."+a.options.columnFields.contextMenu+'"',e+=' iui-style="overflow:hidden;width:{{dataFooter['+c+"].width}}px;text-align:{{dataFooter["+c+'].footerAlignment}};">',d[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(d,
!0)?(e+='<iui-item-content obj="dataFooter['+c+"].column."+a.options.columnFields.templateSettings+'.footer.templateObj" template-url="{{dataFooter['+c+"].column."+a.options.columnFields.templateSettings+'.footer.url}}"',e+=' data-element="footer-template-content" ng-cloak></iui-item-content>'):d[a.options.columnFields.footerContent]?e+=d[a.options.columnFields.footerContent]:d[a.options.columnFields.footerTemplate]?e+='<div ng-include="'+d[a.options.columnFields.footerTemplate]+'" style="margin:0;padding:0"></div>':
(e+='<span iui-class="{{dataFooter['+c+'].style.footer.content}}" data-element="cell-content"',e+=' iui-tooltip="dataFooter['+c+"].column."+a.options.columnFields.footerTooltip+'">',e+="{{dataFooter["+c+"].column."+a.options.columnFields.footerText+"}}</span>"),e+="</div>",e+="</td>")}return e+"</tr></table>"},ya=function(b,c,h,d){if("optimal"==a.options.displayMode){c=void 0==c?"none":c;d='<tr class="iui-treegrid-row" data-index="'+b+'" data-fixed="'+d+'"';h&&(d+=' style="position:absolute;top:-9999px"');
d+=">";for(var e=0;e<a.columnList.length;e++)h=a.columnList[e][a.options.columnFields.fixed],h=void 0==h?"none":h,h==c&&(d+='<td class="iui-treegrid-row-cell" data-element="cell" data-index="'+e+'">',d+="<div",d+=' class="iui-treegrid-row-cell-content" data-element="cell-content"',d+=' style="width:0px;text-align:left;opacity:0;',0<a.options.rowHeight&&(d+="height:"+a.options.rowHeight+"px;"),d=e==a.options.expandColIndex?d+'padding-left:0px;">':d+'">',d+=pe(b,e),d+="</div>",d+="</td>");return d+
"</tr>"}c=void 0==c?"none":c;d='<tr iui-class="{{data['+b+'].style.general}}" data-index="{{data['+b+'].index}}" data-fixed="'+d+'" tabindex="{{data['+b+'].tabindex}}"'+(' iui-refresh-style="{{data['+b+'].style.custom}}"');h&&(d+=' style="position:absolute;top:-9999px"');d+=">";for(e=0;e<a.columnList.length;e++)h=a.columnList[e][a.options.columnFields.fixed],h=void 0==h?"none":h,h==c&&(d+='<td iui-class="{{data['+b+"].cells["+e+'].style.cell}}" data-element="cell" data-index="'+e+'" draggable="{{data['+
b+'].draggable}}" tabindex="{{data['+b+"].cells["+e+'].tabindex}}"',d+=' iui-refresh-style="{{data['+b+"].cells["+e+'].style.custom}}">',d+='<div ng-show="data['+b+'].visible"',d+=' iui-class="{{data['+b+"].cells["+e+'].style.content}}" data-element="cell-content"',d+=' iui-style="width:{{data['+b+"].cells["+e+"].width}}px;text-align:{{data["+b+"].cells["+e+"].alignment}};",0<a.options.rowHeight&&(d+="height:"+a.options.rowHeight+"px;"),d=e==a.options.expandColIndex?d+("padding-left:{{data["+b+"].cells["+
e+'].indent}}px;">'):d+'">',d+=pe(b,e),d+="</div>",d+="</td>");return d+"</tr>"},pe=function(b,c){if("optimal"==a.options.displayMode){var e="";c===a.options.expandColIndex&&(e+='<span data-element="expandbox"></span><span data-element="icon"></span>');var l=a.columnList[c][a.options.columnFields.editorSettings],d=pb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+='<iui-checkbox name="cb-'+g.getUniqueId(4)+'"';l&&1==l.threeState?(e+=' check-state="data['+b+"].cells["+
c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';l&&l.style&&(e+=' control-style="data['+b+"].cells["+
c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="{{data["+b+"].cells["+c+"].related."+
a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:d&&""!=d?e+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+
b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(e=e+'<span class="iui-treegrid-row-cell-label" data-element="content"'+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+=".</span>")}return e}e="";c===a.options.expandColIndex&&(e=e+('<span iui-class="{{data['+b+'].expandBox}}" data-element="expandbox" ng-show="data['+b+'].expandBoxVisible"></span>')+('<span iui-class="{{data['+
b+'].icon}}" data-element="icon" ng-show="data['+b+'].iconVisible"></span>'));l=a.columnList[c][a.options.columnFields.editorSettings];d=pb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+='<iui-checkbox name="cb-'+g.getUniqueId(4)+'"';l&&1==l.threeState?(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+
' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';l&&l.style&&(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+
b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+
'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:d&&""!=d?e+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+
(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.text+"}}",e+="</span>")}return e};a.isObjIndexinRange=function(a,b){return 0<=a&&a<b.length?!0:!1};a.moveObject=function(b,c,h){a.isObjIndexinRange(b,h)&&a.isObjIndexinRange(c,h)&&h.splice(c,0,h.splice(b,1)[0])};var lf=function(){R=0;if(0<a.options.rowHeight){var b={top:0,bottom:0};if(a.options.controlStyle&&a.options.controlStyle.row&&a.options.controlStyle.row.cell&&
a.options.controlStyle.row.cell.content){var l=angular.element('<div class="'+a.options.controlStyle.row.cell.content+'" style="position:absolute;top:-9999999px;">Temp</div>');q.append(l);b=g.getPadding(l[0]);l.remove()}R=a.options.rowHeight+b.top+b.bottom+3}else if(0<a.currentList.length&&v){b=[];var h=[];l=[];for(var d=[],x=[],k=[],m=0,n=0;n<a.currentList.length&&10>n;n++)b.push(ya(n,"none",!0)),h.push(c(b[n])(v)),q.append(h[n]),a.isThereLeftFixedColumns&&(l.push(ya(n,"left",!0)),d.push(c(l[n])(v)),
q.append(d[n])),a.isThereRightFixedColumns&&(x.push(ya(n,"right",!0)),k.push(c(x[n])(v)),q.append(k[n])),m++;if(0<m)var r=f(function(){for(var b=0,e=0,c=0,l=0;l<m;l++)b+=h[l][0].offsetHeight,h[l].remove(),a.isThereLeftFixedColumns&&(e+=d[l][0].offsetHeight,d[l].remove()),a.isThereRightFixedColumns&&(c+=k[l][0].offsetHeight,k[l].remove());R=Math.floor(Math.max(Math.max(b,e),c)/m);f.cancel(r)},1)}},L=null,fd=0,gd=0,ea=angular.element('<div class="iui-pagination-panel"></div>'),mf=function(){L&&L.$destroy();
ea.empty();ea.remove();gd=fd=0;if(a.options.paging.showControlPanel){L=m.$new();L.currentPage=0;L.minPages=0;L.numPages=a.pageList.length;0<L.numPages&&0==L.currentPage&&(L.currentPage=1);L.onFirstPage=function(){a.options.enabled&&(a.firstPage(),L.currentPage=a.currentPageNumber)};L.onLastPage=function(){a.options.enabled&&(a.lastPage(),L.currentPage=a.currentPageNumber)};L.onNextPage=function(){a.options.enabled&&(a.nextPage(),L.currentPage=a.currentPageNumber)};L.onPrevPage=function(){a.options.enabled&&
(a.prevPage(),L.currentPage=a.currentPageNumber)};L.$watch("currentPage",function(b,e){a.options.enabled&&b!=e&&1<=b&&b<=a.pageList.length&&a.setCurrentPage(b)});fd=q[0].clientWidth;var b="iui-pagination-panel-button";a.options.enabled||(b+=" iui-pagination-panel-button-disabled");for(var l="",h=0;6>h;h++)switch(h){case 0:l+='<span class="'+b+' iui-pagination-first" ng-click="onFirstPage()"></span>';break;case 1:l+='<span class="'+b+' iui-pagination-prev" ng-click="onPrevPage()"></span>';break;case 2:l+=
'<input class="iui-pagination-panel-input" ng-model="currentPage" type="number" ng-attr-min="{{minPages}}" ng-attr-max="{{numPages}}" />';break;case 3:l+='<span class="iui-pagination-panel-label"> / {{numPages}}</span>';break;case 4:l+='<span class="'+b+' iui-pagination-next" ng-click="onNextPage()"></span>';break;case 5:l+='<span class="'+b+' iui-pagination-last" ng-click="onLastPage()"></span>'}b=c(l)(L);ea.append(b);q.append(ea);ea.css("width",fd+"px");b&&(g.getMargin(b[0]),l=g.getPadding(ea[0]),
gd=b[0].offsetHeight+(l.top+l.bottom)-2,ea.css("height",gd+"px"));a.updatePaginationPanel()}};a.updatePaginationPanel=function(){var b=1;a.options.enabled||(b=.5);if(ea){var c=ea.find("span");if(c&&0<c.length)for(var h=0;h<c.length;h++){var d=angular.element(c[h]);d.css("opacity",b)}(c=ea.find("input"))&&0<c.length&&(d=angular.element(c[0]),a.options.enabled?d.removeAttr("disabled"):d.attr("disabled","true"))}};a.resetPageNumber=function(){a.currentPageNumber=1;L&&(L.currentPage=0<L.numPages?1:0)};
a.updatePageNumber=function(){a.currentPageNumber>a.pageList.length&&(0==a.pageList.length?a.resetPageNumber():(a.currentPageNumber=a.pageList.length,L&&(L.currentPage=a.currentPageNumber)))};var Za=angular.element('<div class="iui-treegrid-block" style="position:absolute;top:-9999999px"></div>'),pa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-top" style="position:absolute;top:-9999999px"></div>'),za=angular.element('<div class="iui-treegrid-block iui-treegrid-block-bottom" style="position:absolute;top:-9999999px"></div>'),
Oa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-left" style="position:absolute;top:-9999999px"></div>'),Pa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-right" style="position:absolute;top:-9999999px"></div>');angular.element('<div class="iui-treegrid-block iui-treegrid-block-top" style="position:absolute;top:-9999999px"></div>');var qe=function(){Za&&(Za.empty(),Za.remove());pa&&(pa.empty(),pa.remove());za&&(za.empty(),za.remove());Oa&&(Oa.empty(),Oa.remove());
Pa&&(Pa.empty(),Pa.remove())},nf=function(){if(1<a.updateStatus)S("end");else var b=f(function(){if(0<a.columnList.length&&1==a.updateStatus){z=m.$new();z.data=re();for(var e=z,h=[],d=0;d<a.columnList.length;d++)h.push(se(null,a.columnList[d]));e.dataFooter=h;a.refreshColumns();z.$apply();for(e=H=y=0;e<a.columnList.length;e++)switch(h={columnID:void 0!=a.columnList[e][a.options.columnFields.id]?a.columnList[e][a.options.columnFields.id]:e,avgItemHeight:0},a.columnList[e][a.options.columnFields.editorType]){case "combobox":af(a.columnList[e].editorSettings,
e,h);Fb.push(h);break;default:Fb.push(h)}a.options.showHeader&&(q.append(pa),qa&&(Xa.css("opacity",fa.opacity),pa.css("opacity",fa.opacity)),pa.css("left","-9999999px"),e=dd(),na=angular.element(c(e)(z)),pa.append(na),a.isThereLeftFixedColumns&&(e=dd("left"),ca=c(e)(z),pa.append(ca),ca.css("z-index","2"),ca.addClass("iui-treegrid-column-header-left")),a.isThereRightFixedColumns&&(e=dd("right"),Y=c(e)(z),pa.append(Y),Y.css("right","0"),Y.css("z-index","1"),Y.addClass("iui-treegrid-column-header-right")));
a.options.showFooter&&(q.append(za),qa&&(Na.css("opacity",fa.opacity),za.css("opacity",fa.opacity)),za.css("left","-9999999px"),e=ed(),Ua=c(e)(z),za.append(Ua),a.isThereLeftFixedColumns&&(e=ed("left"),va=c(e)(z),za.append(va),va.css("z-index","2"),va.addClass("iui-treegrid-column-footer-left")),a.isThereRightFixedColumns&&(e=ed("right"),ba=c(e)(z),za.append(ba),ba.css("right","0"),ba.css("z-index","1"),ba.addClass("iui-treegrid-column-footer-right")));var g;e=-1;for(h=0;h<a.completeColumnList.length;h++)for(d=
0;d<a.completeColumnList[h].length;d++){var k=a.completeColumnList[h][d].column;var n=g=null;k[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(k)?(g=k[a.options.columnFields.templateSettings].header,e=1):k[a.options.columnFields.headerContent]?(g=k[a.options.columnFields.headerContent],e=2):k[a.options.columnFields.headerTemplate]&&(g=k[a.options.columnFields.headerTemplate],e=3);k[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(k,!0)?n=k[a.options.columnFields.templateSettings].footer:
k[a.options.columnFields.footerContent]?n=k[a.options.columnFields.footerContent]:k[a.options.columnFields.footerTemplate]&&(n=k[a.options.columnFields.footerTemplate]);if((g||n)&&(n=a.getElemFromColumnCell(k,k[a.options.columnFields.fixed]))&&g&&g&&(n=a.getChildElement(n,"column-header-cell")))switch(n.empty(),e){case 1:z&&(g='<iui-item-content obj="data['+h+"]["+d+"].column."+a.options.columnFields.templateSettings+'.header.templateObj" template-url="{{data['+h+"]["+d+"].column."+a.options.columnFields.templateSettings+
'.header.url}}" draggable="{{data['+h+"]["+d+'].draggable}}"',g+=' data-element="header-template-content" ng-cloak></iui-item-content>',n.append(c(g)(z)));break;case 2:n.append(c(g)(m.$parent));break;case 3:g='<div ng-include="'+g+'"',k[a.options.columnFields.headerTemplateModel]&&(g+=' onload="'+k[a.options.columnFields.headerTemplateModel]+'"'),g+=' style="margin:0;padding:0"></div>',n.append(c(g)(m.$parent))}}Qa(40);S("rows")}else Qa(70),S("scroll");f.cancel(b)},1)},of=function(){for(var b=0,d=
"",h=Ia=0;h<a.currentTopList.length;h++)d+=ya(h,"none",!1,"top"),b++;if(0<b){var p=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block" style="position:absolute;top:-999999px;"></table>');p.append(c(d)(la));Da.append(p);f(function(){Ia=p[0].offsetHeight;p.remove()},1)}},pf=function(){if(1<a.updateStatus)S("end");else var b=f(function(){var e=0;a.options.paging.enabled&&ea&&(e=ea[0].offsetHeight);if(0<a.columnList.length){var h=0;if(a.options.showHeader&&na){y=na[0].offsetHeight;
a.isThereLeftFixedColumns&&ca&&y<ca[0].offsetHeight&&(y=ca[0].offsetHeight);a.isThereRightFixedColumns&&Y&&y<Y[0].offsetHeight&&(y=Y[0].offsetHeight);y+=1;na.css("height",y+"px");var d=0,g=na.find("td");if(g&&0<g.length)for(var k=0;k<g.length;k++){var n=angular.element(g[k]);d+=n[0].offsetWidth}d>q[0].clientWidth&&(d=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),d.css("bottom","-9999px"),q.append(d),h=d[0].offsetHeight,d.remove());
pa.css("width",q[0].clientWidth+"px");pa.css("height",y+"px");a.isThereLeftFixedColumns&&(J=ca[0].offsetWidth,Mb=q[0].clientHeight-y-H,na.css("left",J+"px"),ca.css("height",y+"px"));a.isThereRightFixedColumns&&(Ma=Y[0].offsetWidth,Nb=q[0].clientHeight-y-H,Y.css("height",y+"px"))}a.options.showFooter&&(H=Ua[0].offsetHeight,a.isThereLeftFixedColumns&&va&&H<va[0].offsetHeight&&(H=va[0].offsetHeight),a.isThereRightFixedColumns&&ba&&H<ba[0].offsetHeight&&(H=ba[0].offsetHeight),za.css("width",q[0].clientWidth+
"px"),za.css("height",H+"px"),a.isThereLeftFixedColumns&&(J=va[0].offsetWidth,Mb=q[0].clientHeight-y-H,Ua.css("left",J+"px"),va.css("height",H+"px")),a.isThereRightFixedColumns&&(Ma=ba[0].offsetWidth,Nb=q[0].clientHeight-y-H,ba.css("height",H+"px")));te();if(0<a.currentList.length){v=m.$new();v.data=hd();la=m.$new();la.data=ue();oa=m.$new();oa.data=ve();a.refreshRows();v.$apply();la.$apply();oa.$apply();lf();of();var r=f(function(){a.updateAutoLayout();Zd();ka&&ka.remove();Z&&Z.remove();X&&X.remove();
Va&&Va.remove();ta&&ta.remove();ua&&ua.remove();Wa&&Wa.remove();ia&&ia.remove();Ga&&Ga.remove();K=0;for(var b="",d=0;d<a.currentTopList.length;d++)b+=ya(d,"none",!1,"top"),K++;0<K&&(Z=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block" style="position:absolute;top:'+y+"px;left:"+J+'px;"></table>'),Z.append(c(b)(la)),Za.append(Z));K=0;b="";for(d=0;d<a.currentBottomList.length;d++)b+=ya(d,"none",!1,"bottom"),K++;0<K&&(X=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block" style="position:absolute;bottom:'+
H+"px;left:"+J+'px;"></table>'),X.append(c(b)(oa)),Za.append(X));a.options.autoSize?B=0<a.options.maxRows?a.options.maxRows:500:(b=q[0].clientHeight-e-(y+H)-h,B=0<R?Math.floor(b/R)+1:0<y?Math.floor(b/y)+1:100);K=0;b="";for(d=0;d<B;d++)b+=ya(d),K++;if(0<K){ka=angular.element('<table cellpadding="0" cellspacing="0" style="position:absolute;top:'+(y+Ia)+"px;left:"+J+'px;"></table>');ka.append(c(b)(v));Za.append(ka);if(a.isThereLeftFixedColumns){b="";for(d=K=0;d<a.currentTopList.length;d++)b+=ya(d,"left",
!1,"top"),K++;0<K&&(ta=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block iui-treegrid-rows-left-top" style="position:absolute;top:0;"></table>'),ta.append(c(b)(la)),Oa.append(ta));b="";for(d=K=0;d<a.currentBottomList.length;d++)b+=ya(d,"left",!1,"bottom"),K++;0<K&&(ua=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block iui-treegrid-rows-left-bottom" style="position:absolute;bottom:0;"></table>'),ua.append(c(b)(oa)),
Oa.append(ua));ka.css("left",J+"px");b="";for(d=K=0;d<B;d++)b+=ya(d,"left"),K++;0<K&&(Va=angular.element('<table class="iui-treegrid-rows-left" cellpadding="0" cellspacing="0" style="position:absolute;top:'+Ia+'px;"></table>'),Va.append(c(b)(v)),Ha.css("top",y+"px"),Oa.append(Va),q.append(Oa),qa&&(Ha.css("opacity",fa.opacity),Oa.css("opacity",fa.opacity)))}if(a.isThereRightFixedColumns){b="";for(d=K=0;d<a.currentTopList.length;d++)b+=ya(d,"right",!1,"top"),K++;0<K&&(ia=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block iui-treegrid-rows-right-top" style="position:absolute;"></table>'),
ia.append(c(b)(la)),Pa.append(ia));b="";for(d=K=0;d<a.currentBottomList.length;d++)b+=ya(d,"right",!1,"bottom"),K++;0<K&&(Ga=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block iui-treegrid-rows-right-bottom" style="position:absolute;bottom:0;"></table>'),Ga.append(c(b)(oa)),Pa.append(Ga));b="";for(d=K=0;d<B;d++)b+=ya(d,"right"),K++;0<K&&(Wa=angular.element('<table class="iui-treegrid-rows-right" cellpadding="0" cellspacing="0" style="position:absolute;top:'+
Ia+'px;"></table>'),Wa.append(c(b)(v)),xa.css("top",y+"px"),Pa.append(Wa),q.append(Pa),qa&&(xa.css("opacity",fa.opacity),Pa.css("opacity",fa.opacity)))}}Qa(70);S("scroll");f.cancel(r)},5)}else Qa(70),S("scroll")}else Qa(70),S("scroll");f.cancel(b)},1)},Qb=function(b){b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");a.dropMark()},qf=function(){1<a.updateStatus?S("end"):(1==a.updateStatus&&($d(),Za&&(Da.empty(),
Da.append(Za.children()),Z&&Z.bind("dragover",function(a){Qb(a);a.stopPropagation()}),X&&X.bind("dragover",function(a){Qb(a);a.stopPropagation()})),pa&&(Xa.empty(),Xa.append(pa.children()),a.options.showHeader&&(Xa.css("width",q[0].clientWidth+"px"),Xa.css("height",y+"px")),q.append(Xa)),za&&(Na.empty(),Na.append(za.children()),a.options.showFooter&&(Na.css("width",q[0].clientWidth+"px"),Na.css("height",H+"px")),q.append(Na)),Oa&&(Ha.empty(),Ha.append(Oa.children()),q.append(Ha),ta&&ta.bind("dragover",
function(a){Qb(a);a.stopPropagation()}),ua&&ua.bind("dragover",function(a){Qb(a);a.stopPropagation()})),Pa&&(xa.empty(),xa.append(Pa.children()),q.append(xa),ia&&ia.bind("dragover",function(a){Qb(a);a.stopPropagation()}),Ga&&Ga.bind("dragover",function(a){Qb(a);a.stopPropagation()})),a.updateViewSize(),a.updateViewSize(),a.updateScrollVisibility(),a.updateScrollView()),Qa(80,"complete"),S("complete"))},rf=function(){switch(fa.type){case "circular":1==a.updateStatus&&(we(),Rb=0,qb=!0,a.callLoadComplete());
break;case "linear":xe(!1);break;default:Rb=0,qb=!0,1==a.updateStatus&&a.callLoadComplete()}a.updateActive=!1;a.updateStatus--;if(0<a.updateStatus)Sb=a.updateActive=!0,1==a.updateStatus?S("start"):S("end");else if(id())var b=f(function(){"optimal"==a.options.displayMode&&a.updateGridElements();a.updateView();a.callUpdateComplete();f.cancel(b)},1);else"optimal"==a.options.displayMode&&(a.updateGridElements(),a.updateView()),a.callUpdateComplete()},gc=[],hc=[],ic=[],Hc=[],Ic=[],Jc=[],Kc=[],Lc=[],Mc=
[],jd=function(b,c,d){if((c=a.getRowElems(c,d))&&0<c.length)for(var e,h=0;h<c.length;h++){e=angular.element(c[h]);d={rowElem:e,cellList:[]};if(h<B){e=e.find("td");for(var l=0;l<e.length;l++){var f=angular.element(e[l]),g=a.getContentElement(f);if(g){var k=l;f[0].attributes&&f[0].attributes["data-index"]&&(k=parseInt(f[0].attributes["data-index"].value,10));f={cell:f,block:g,expandBox:null,icon:null,content:null};k==a.options.expandColIndex&&(f.expandBox=angular.element(a.getContentElement(g,"expandbox")),
f.icon=angular.element(a.getContentElement(g,"icon")));var m="content";switch(a.columnList[k][a.options.columnFields.editorType]){case "checkbox":m="checkbox";break;case "image":m="image";break;default:(k=pb(k))&&""!=k&&(m="template-content")}f.content=angular.element(a.getContentElement(g,m));d.cellList.push(f)}}}b.push(d)}};a.updateGridElements=function(){"optimal"==a.options.displayMode&&(a.updateGridScrollElements(),a.updateGridFixedElementsTop(),a.updateGridFixedElementsBottom())};a.updateGridScrollElements=
function(){var a=0,b="none";gc.length=0;hc.length=0;ic.length=0;for(var c=gc;3>a;)jd(c,b),a++,1==a?(b="left",c=hc):(b="right",c=ic)};a.updateGridFixedElementsTop=function(){var a=0,b="none";Hc.length=0;Ic.length=0;Jc.length=0;for(var c=Hc;3>a;)jd(c,b,"top"),a++,1==a?(b="left",c=Ic):(b="right",c=Jc)};a.updateGridFixedElementsBottom=function(){var a=0,b="none";Kc.length=0;Lc.length=0;Mc.length=0;for(var c=Kc;3>a;)jd(c,b,"bottom"),a++,1==a?(b="left",c=Lc):(b="right",c=Mc)};var S=function(b){if(Sb&&!Ab)switch(b){case "start":1<
a.updateStatus?S("end"):(a.updateColumnList(),a.options.paging.enabled&&a.updatePageList(),a.updateCurrentList(),Qa(10),S("init"));break;case "init":1<a.updateStatus?S("end"):(Fb.length=0,Td(),Cc||ma||bd(),qe(),Ua=na=X=Z=ka=null,Mb=J=0,ua=ta=Va=ca=null,Nb=Ma=0,Ga=ia=Wa=Y=null,z&&z.$destroy(),v&&v.$destroy(),a.options.paging.enabled&&mf(),q.append(Za),Za.css("left","-9999999px"),Oa.css("left","-9999999px"),Pa.css("right","-9999999px"),Qa(20),S("columns"));break;case "columns":nf();break;case "rows":pa?
a.options.showHeader&&pa.find("td").length<a.columnList.length?f(function(){S(b)},1):pf():f(function(){S(b)},1);break;case "scroll":qf();break;case "complete":1<a.updateStatus?S("end"):(qe(),Qa(90),S("events"));break;case "events":1<a.updateStatus||(a.allowEvents=!0,a.options.showHeader&&(na&&Xc(na),a.isThereLeftFixedColumns&&ca&&Xc(ca),a.isThereRightFixedColumns&&Y&&Xc(Y)),0<a.currentList.length&&hf(),Qa(100));S("end");break;case "end":rf()}else f(function(){S(b)},1)},ye=5,Nc=0,Bb=0,Oc=0,ze=0,Ab=
!1,Pc=!1,fa={type:"none",speed:"normal",opacity:0},kd=null,qa=!1,qb=!1,xe=function(b){var e=n(function(){b?Bb++:Bb--;Oc=(q[0].clientHeight-Bb)/2+2;jc.css("height",Bb+"px");gb.css("top",Oc+"px");b&&Bb>=ye?(qa=!0,Qa(0),qb=Ab=!1,n.cancel(e)):!b&&0>=Bb&&(gb&&gb.remove(),Rb=0,qb=!0,a.callLoadComplete(),n.cancel(e))},20)},we=function(){kd&&n.cancel(kd);$a&&$a.remove()};a.beginLoad=function(a){if(!Ab)switch(Ab=!0,fa=a?{type:void 0!=a.type?a.type:"none",speed:void 0!=a.speed?a.speed:"normal",opacity:void 0!=
a.opacity?a.opacity:0}:{type:"none",speed:"normal",opacity:0},ld(fa.opacity),fa.type){case "circular":we();q.append($a);$a.css("top",(q[0].clientHeight-$a[0].offsetHeight)/2+"px");$a.css("left",(q[0].clientWidth-$a[0].offsetWidth)/2+"px");qa=!0;qb=Ab=!1;var b=0,e=3;switch(fa.speed){case "veryfast":e=7;break;case "fast":e=5;break;case "slow":e=2;break;case "veryslow":e=1}kd=n(function(){b+=e;360<b&&(b=0);var a="rotate("+b+"deg)";$a.css("-ms-transform",a);$a.css("-webkit-transform",a);$a.css("transform",
a)},1);break;case "linear":a=angular.element('<div class="iui-load-block-progress" style="position:absolute;left:-9999px"></div>');q.append(a);ye=parseInt(getComputedStyle(a[0]).height,10);a.remove();jc.css("width","0px");jc.css("height","0px");q.append(gb);Rb=0;Nc=Math.floor(.5*q[0].clientWidth);Bb=0;Oc=q[0].clientHeight/2+2;ze=(q[0].clientWidth-Nc)/2;gb.css("width",Nc+"px");gb.css("top",Oc+"px");gb.css("left",ze+"px");gb.css("opacity","1");xe(!0);break;default:qa=!0,qb=Ab=!1}};a.endLoad=function(b){if(!Pc)if(Pc=
!0,b=a.options.loadRows.indexOf(b),0<=b&&a.options.loadRows.splice(b,1),qa){qa=!1;var e=3,c=fa.opacity,d=n(function(){qb&&(10<e||1<=c?(ld(1),Pc=Ab=qb=!1,fa={type:"none",speed:"normal"},n.cancel(d)):(c+=e/10,ld(c),e+=3))},1)}else Pc=!1};var ld=function(a){Xa&&Xa.css("opacity",a);Ha&&Ha.css("opacity",a);Da&&Da.css("opacity",a);xa&&xa.css("opacity",a);Na&&Na.css("opacity",a);C&&C.css("opacity",a);P&&P.css("opacity",a);cb&&cb.css("opacity",a)},jc=angular.element('<div class="iui-load-block-progress"></div>'),
gb=angular.element('<div class="iui-load-block"></div>');gb.append(jc);var Rb=0,Sb=!1,$a=angular.element('<div class="iui-load-circular"></div>'),Qa=function(a){if(qa&&"linear"==fa.type){Sb=!1;var b=Math.floor(Nc*a/100),e=Rb;a=10;switch(fa.speed){case "veryfast":a=2;break;case "fast":a=5;break;case "slow":a=15;break;case "veryslow":a=20}var c=b>e?Math.floor((b-e)/a):1;c=0<c?c:1;var d=n(function(){e+=c;jc.css("width",e+"px");e>=b&&(Rb=b,Sb=!0,n.cancel(d))},1)}else Sb=!0};a.updateStatus=0;a.updateActive=
!1;a.updateAutoLayout=function(){if(a.options.autoSize){var b=a.currentList.length*R+y+H;b+=Ia+Bc;O&&C&&(b+=C[0].offsetHeight);q.css("height",b+"px")}};a.updateLayout=function(b){q.append(M.$tw);M.s1t(M.twp);b=!0;for(var e=q.parent();"body"!=e[0].tagName.toLowerCase();){if("none"==getComputedStyle(e[0]).display){b=!1;break}e=e.parent()}b&&a.allowUpdate&&(a.updateStatus++,a.updateActive||(a.updateActive=!0,a.allowEvents=!1,q.removeClass("iui-treegrid-block-rtl"),a.options.rtl&&q.addClass("iui-treegrid-block-rtl"),
Da.removeClass("iui-treegrid-block-shift-left iui-treegrid-block-rtl"),Da.addClass(Wc()),R=0,B=100,H=y=0,Sb=!0,S("start")))};a.updateCurrentLayout=function(b){if(a.allowUpdate)if(0==a.currentList.length)a.updateLayout();else{a.options.paging.enabled&&(a.updatePageList(),L&&(L.minPages=0<a.pageList.length?1:0,L.numPages=a.pageList.length),a.updatePageNumber());a.updateCurrentList();a.updateView();var e=f(function(){a.updateViewSize();a.updateViewSize();b||a.updateScrollVisibility();a.updateScrollView();
f.cancel(e)},1)}};var Ae=function(b){var e={top:0,right:0,bottom:0,left:0};(b=a.getElemFromColumnCell(b))&&(b=a.getChildElement(b,"column-header-cell"))&&(e=g.getPadding(b[0]));return e},Be=function(b){var e=b[a.options.columnFields.columns];if(!e||0==e.length)return e=a.getColumnWidth(b),e=0<=e?e:0,b=md(b),e<b.min&&(e=b.min),e>b.max&&(e=b.max),e;for(var c,d=0,f=0;f<e.length;f++)a.isColumnWithChildenVisible(e[f])&&(c=Ae(e[f]),d+=Be(e[f])+c.left+c.right);c=Ae(b);return d-=c.left+c.right},se=function(b,
c){var e=b?b.column:c;return{draggable:b?b.isRoot&&a.options.enabled&&a.options.allowColumnReorder&&b.column[a.options.columnFields.allowDrag]:!1,headerAlignment:e[a.options.columnFields.headerAlignment],footerAlignment:e[a.options.columnFields.footerAlignment],index:a.columnList?a.columnList.indexOf(e):-1,indent:0,column:e,showFiltering:a.isFilteringAllowed(e),showSorting:a.isSortingAllowed()&&e==a.sortColumn,style:{header:{},footer:{}},width:Be(e)}},Ce=function(b,c){var e=0;if(c==a.options.expandColIndex){var d=
a.columnList[a.options.expandColIndex];e=a.getColumnWidth(d);var l=e-a.indentList[b];l=0<=l?l:0;var f={top:0,right:0,bottom:0,left:0};(d=a.getElemFromColumn(d,d[a.options.columnFields.fixed]))&&(d=a.getChildElement(d,"column-header-cell"))&&(f=g.getPadding(d[0]));f=f.left+a.indentList[b];0==l&&(f=e);e=f}return e},nd=function(b,c,d){var e=c;d&&(d=a.columnList[c][a.options.columnFields.id])&&(e=a.getCellIndexById(a.currentList[b][a.options.rowFields.cells],c,d));return e},De=function(b){return a.columnList[b][a.options.columnFields.contentAlignment]?
a.columnList[b][a.options.columnFields.contentAlignment]:"left"},Ee=function(b,c){var e=a.columnList[c],d=a.getColumnWidth(e);e=md(e);d<e.min&&(d=e.min);d>e.max&&(d=e.max);c==a.options.expandColIndex&&(d-=a.indentList[b]);return 0<=d?d:0},od=function(b,c){return 1==a.options.allowFocus&&1==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])&&0<=c?a.getTabIndex().toString()+(b+1).toString()+c.toString():""},Fe=function(b){return 1==a.options.allowFocus&&0==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])?
a.getTabIndex().toString()+(b+1).toString():""},Ge=function(b,c,d){if(0<=c){var e=a.currentList[b][a.options.rowFields.cells];switch(d){case "top":e=a.currentTopList[b][a.options.rowFields.cells];break;case "bottom":e=a.currentBottomList[b][a.options.rowFields.cells]}if(c<e.length)return e[c]}return{}},pb=function(b){return a.columnList[b][a.options.columnFields.cellTemplateUrl]?a.columnList[b][a.options.columnFields.cellTemplateUrl]:""},pd=function(b,c,d,f){for(var e=[],h=0;h<a.columnList.length;h++){var l=
nd(c,h,d),g=d?Ge(c,l,f):{},p=De(h),k=a.columnList[h][a.options.columnFields.editorSettings];k=k&&k.style?k.style:null;if(d)a:{if(0<=l){var m=a.currentList[c][a.options.rowFields.cells];if(l<m.length){m=1==a.options.enabled&&m[l][a.options.cellFields.enabled];break a}}m=1==a.options.enabled}else m=!1;var n=d?Ce(c,h):0,q=l,r=d?od(c,h):"",u=pb(h);if(d){var t=c;var w=l;var v=pb(h);t=Ge(t,w);w=0<=w&&v&&""!=v&&t&&void 0!=t[a.options.cellFields.templateObj]&&null!=t[a.options.cellFields.templateObj]?!0:
!1}else w=!1;if(d)a:{if(0<=l&&(v=a.currentList[c][a.options.rowFields.cells],l<v.length)){v=v[l][a.options.cellFields.text];break a}v=""}else v="";if(d)a:{if(0<=l&&(t=a.currentList[c][a.options.rowFields.cells],l<t.length)){t=t[l][a.options.cellFields.value];break a}t=null}else t=null;l={related:g,alignment:p,editorStyle:k,enabled:m,indent:n,index:q,style:{},tabindex:r,templateUrl:u,templateVisible:w,text:v,value:t,visible:d?0<=l?!0:!1:!1,width:d?Ee(c,h):0};e.push(l)}return{cells:e,expandBox:d?Ud(b):
"",expandBoxVisible:d&&!f?0!=a.options.showExpandBoxes:!1,draggable:d&&!f?a.isRowEnabled(b)&&a.isDragAllowed(b):!1,icon:d?me(b):"",iconVisible:d?0!=a.options.showIcons&&ad(b):!1,index:c,row:d?b:{},style:{},tabindex:d&&!f?Fe(c):"",updateContextMenu:d?null!=b[a.options.rowFields.contextMenu]:!1,visible:d}},re=function(){for(var b=[],c=0;c<a.completeColumnList.length;c++){b.push([]);for(var d=0;d<a.completeColumnList[c].length;d++)b[c].push(se(a.completeColumnList[c][d]))}return b},hd=function(){for(var b=
[],c=w;c<w+B;c++)b.push(pd(a.currentList[c],c,c<a.currentList.length));return b},ue=function(){for(var b=[],c=0;c<a.currentTopList.length;c++)b.push(pd(a.currentTopList[c],c,c<a.currentTopList.length,"top"));return b},ve=function(){for(var b=[],c=0;c<a.currentBottomList.length;c++)b.push(pd(a.currentBottomList[c],c,c<a.currentBottomList.length,"bottom"));return b},te=function(){for(var b=0;b<a.columnList.length;b++)if(a.isFilteringAllowed(a.columnList[b])){var c=a.getElemFromColumn(a.columnList[b],
a.columnList[b][a.options.columnFields.fixed]);c&&(c=a.getChildElement(c,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&(c.css("top",(y-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),c.css("right","2px"))}a.isSortingAllowed()&&a.sortColumn&&(b=a.getElemFromColumn(a.sortColumn,a.sortColumn[a.options.columnFields.fixed]))&&(c=a.getChildElement(b,"column-header-cell"))&&(c=a.getContentElement(c,"sort-button"))&&(c.css("top",(y-parseInt(getComputedStyle(c[0]).height,10))/2-
1+"px"),a.isFilteringAllowed(a.sortColumn)?c.css("right","22px"):c.css("right","2px"))};a.getRowScope=function(){return v};var Ie=function(){if(z&&v&&(a.allowEvents=!1,qd(!1),0<a.columnList.length&&(z.data=re(),v.data=hd(),la&&(la.data=ue()),oa&&(oa.data=ve()),a.options.selectedRow&&!a.isRowEnabled(a.options.selectedRow)&&(a.options.selectedRow[a.options.rowFields.selected]=!1,a.options.selectedRow=null,a.updateSelectionList()),a.refresh(null,null,!1),z.$apply(),v.$apply(),la&&la.$apply(),oa&&oa.$apply(),
te(),a.allowEvents=!0,0>=a.options.rowHeight&&id())))for(var b=w;0<=b&&b<w+B&&b<a.currentList.length;b++)He(a.currentList[b])},rd=function(b,c){var e=0;if(b&&v){var d=a.getElemFromRow(b,c);d&&(e=d[0].offsetHeight)}return e},id=function(){for(var b=!1,c=0;c<a.columnList.length;c++){var d=pb(c);if(d&&""!=d){b=!0;break}}return b},sd=function(b,c,d){for(var e=0,h="none";3>e;){if((h=a.getElemFromRow(b,c,h))&&(h=h.find("td"))&&0<h.length)for(var l=0;l<h.length;l++){var f=angular.element(h[l]);f=a.getContentElement(f);
var k=g.getBorderWidth(f[0]),m=g.getPadding(f[0]);f&&f.css("height",d-(k.top+k.bottom)-(m.top+m.bottom)-2.85+"px")}e++;h=1==e?"top":"bottom"}},td=function(b,c){for(var e=0,d="none";3>e;){if((d=a.getElemFromRow(b,c,d))&&(d=d.find("td"))&&0<d.length)for(var l=0;l<d.length;l++){var f=angular.element(d[l]);(f=a.getContentElement(f))&&f.css("height","auto")}e++;d=1==e?"top":"bottom"}},He=function(a){td(a,"none");td(a,"left");td(a,"right");var b=rd(a),c=rd(a,"left"),e=rd(a,"right");b=Math.max(Math.max(b,
c),e);sd(a,"none",b);sd(a,"left",b);sd(a,"right",b)};a.updateView=function(b,c){if(b)Ie(),a.updateCurrentView(c);else var e=f(function(){Ie();a.updateCurrentView(c);f.cancel(e)},1)};a.updateVerticalScrollView=function(){if(v&&(a.allowEvents=!1,qd(!1),v.data=hd(),a.refresh(null,null,!1,!0),v.$apply(),a.updateCurrentView(!0),a.allowEvents=!0,0>=a.options.rowHeight&&id()&&(a.isThereLeftFixedColumns||a.isThereRightFixedColumns)))for(var b=w;0<=b&&b<w+B&&b<a.currentList.length;b++)He(a.currentList[b])};
var ud=function(b,c,d){var e=0,h=a.columnList.length,f=0;if("none"==c&&d)for(e=ec,h=fc,d=0;d<e&&d<a.columnList.length;d++)a.isColumnFixed(a.columnList[d])||f++;if(b&&0<b.length)for(d=0;d<b.length;d++)if(d<B&&d<a.currentList.length&&d+w<a.currentList.length){var l=a.currentList[d+w];b[d].rowElem&&(b[d].rowElem.attr("data-index",d+w),b[d].rowElem.attr("tabindex",Fe(d+w)));for(var g=f,k=e;k<=h&&k<a.columnList.length;k++){var m=a.columnList[k][a.options.columnFields.fixed]?a.columnList[k][a.options.columnFields.fixed]:
"none";if(m==c&&g<b[d].cellList.length){b[d].cellList[g].block.css("width",Ee(d+w,k)+"px");b[d].cellList[g].block.css("text-align",De(k));b[d].cellList[g].block.css("opacity",1);b[d].cellList[g].cell.attr("draggable",a.isRowEnabled(l)&&a.isDragAllowed(l));b[d].cellList[g].cell.attr("tabindex",od(d+w,k));m="";var n=nd(d+w,k,!0);0<=n&&n<a.currentList[d+w][a.options.rowFields.cells].length&&(k==a.options.expandColIndex&&(b[d].cellList[g].block.css("padding-left",Ce(d+w,k)+"px"),b[d].cellList[g].expandBox&&
(b[d].cellList[g].expandBox.removeAttr("class"),b[d].cellList[g].expandBox.addClass(Ud(l))),b[d].cellList[g].icon&&(b[d].cellList[g].icon.removeAttr("class"),b[d].cellList[g].icon.addClass(me(l)))),m=l[a.options.rowFields.cells][n][a.options.cellFields.text],"combobox"==a.columnList[k][a.options.columnFields.editorType]&&(m=l[a.options.rowFields.cells][n][a.options.cellFields.value]?l[a.options.rowFields.cells][n][a.options.cellFields.value].text:""));if(b[d].cellList[g].content)switch(a.columnList[k][a.options.columnFields.editorType]){case "checkbox":break;
case "image":break;default:(n=pb(k))&&""!=n||b[d].cellList[g].content.text(m)}g++}}}else for(b[d].rowElem&&(b[d].rowElem.attr("data-index",d+w),b[d].rowElem.attr("tabindex","")),g=f,k=e;k<=h&&k<a.columnList.length;k++)if(m=a.columnList[k][a.options.columnFields.fixed]?a.columnList[k][a.options.columnFields.fixed]:"none",m==c&&g<b[d].cellList.length){n=k;b[d].cellList[g].block.css("width","0px");b[d].cellList[g].cell.attr("draggable",!1);b[d].cellList[g].cell.attr("tabindex","");n==a.options.expandColIndex&&
(b[d].cellList[g].block.css("padding-left","0px"),b[d].cellList[g].expandBox&&b[d].cellList[g].expandBox.removeAttr("class"),b[d].cellList[g].icon&&b[d].cellList[g].icon.removeAttr("class"));if(b[d].cellList[g].content){switch(a.columnList[n][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(n=pb(k))&&""!=n||b[d].cellList[g].content.html("")}b[d].cellList[g].content.attr("draggable",!1);b[d].cellList[g].content.attr("tabindex",od(d+w,k))}g++}};a.updateCurrentView=
function(b){"optimal"==a.options.displayMode&&(a.updateCurrentGridScrollElements(),a.updateCurrentGridFixedElementsTop(),a.updateCurrentGridFixedElementsBottom())};a.updateCurrentGridScrollElements=function(b){if("optimal"==a.options.displayMode)for(var c=0,e="none",d=gc;3>c;)ud(d,e,b),c++,1==c?(e="left",d=hc):(e="right",d=ic)};a.updateCurrentGridFixedElementsTop=function(b){if("optimal"==a.options.displayMode)for(var c=0,e="none",d=Hc;3>c;)ud(d,e,b,"top"),c++,1==c?(e="left",d=Ic):(e="right",d=Jc)};
a.updateCurrentGridFixedElementsBottom=function(b){if("optimal"==a.options.displayMode)for(var c=0,e="none",d=Kc;3>c;)ud(d,e,b,"bottom"),c++,1==c?(e="left",d=Lc):(e="right",d=Mc)};var Qc=function(b,c,d,f){var e={cell:"",content:"",general:"",label:"",custom:""};switch(d){case "column":f?(d=a.defaultStyle.column.footer.normal,a.options.controlStyle.column.footer.normal!=d&&(d+=" "+a.options.controlStyle.column.footer.normal),e.general=d,e.cell="iui-treegrid-column-footer-cell",d=a.defaultStyle.column.footer.content,
a.options.controlStyle.column.footer.content!=d&&(d+=" "+a.options.controlStyle.column.footer.content)):(d=a.defaultStyle.column.header.normal,a.options.controlStyle.column.header.normal!=d&&(d+=" "+a.options.controlStyle.column.header.normal),e.general=d,e.cell="iui-treegrid-column-header-cell",d=a.defaultStyle.column.header.content,a.options.controlStyle.column.header.content!=d&&(d+=" "+a.options.controlStyle.column.header.content));e.content=d;break;case "row":d=a.defaultStyle.row.general.normal;
a.isRowFixed(b)?(d=a.defaultStyle.row.fixed.normal,a.options.controlStyle.row.fixed.normal!=d&&(d+=" "+a.options.controlStyle.row.fixed.normal)):a.options.controlStyle.row.general.normal!=d&&(d+=" "+a.options.controlStyle.row.general.normal);e.general=d;break;case "cell":d=a.defaultStyle.row.cell.normal;a.options.controlStyle.row.cell.normal!=d&&(d+=" "+a.options.controlStyle.row.cell.normal);switch(a.options.gridLines){case "none":d=c==w+B-1||c==a.currentList.length-1?d+" iui-treegrid-lines-horizontal":
d+" iui-treegrid-lines-none";break;case "horizontal":d+=" iui-treegrid-lines-horizontal";break;case "vertical":d=c==w+B-1||c==a.currentList.length-1?d+" iui-treegrid-lines-both":d+" iui-treegrid-lines-vertical";break;default:d+=" iui-treegrid-lines-both"}e.general=d;d=a.defaultStyle.row.cell.content;a.options.controlStyle.row.cell.content!=d&&(d+=" "+a.options.controlStyle.row.cell.content);e.content=d;e.label=a.getDefaultCellLabelClass()}return e},Je=function(b){var c="";a.isFilteringAllowed(b)&&
(b=a.getObjState(b),c="iui-filtering","selected"==b?c+=" iui-filtering-selected":"hovered"==b&&(c+=" iui-filtering-hovered"));return c},Ke=function(b){var c="";a.isSortingAllowed()&&b==a.sortColumn&&(b=a.getObjState(b),"ascending"==a.options.sorting?(c="iui-sort-ascending","selected"==b?c+=" iui-sort-ascending-selected":"hovered"==b&&(c+=" iui-sort-ascending-hovered")):(c="iui-sort-descending","selected"==b?c+=" iui-sort-descending-selected":"hovered"==b&&(c+=" iui-sort-descending-hovered")));return c},
ab=function(b,c,d,f){var e=a.getObjState(b),h=a.getObjState(c);d=Qc(b,d,b.type,f);switch(b.type){case "column":f?(e=a.getCurrentColumnStyle(b,"footer",e),e!=a.options.controlStyle.column.footer.normal&&(d.general+=" "+e),f=a.getCurrentColumnStyle(b,"footer","content"),f!=a.options.controlStyle.column.footer.content&&(d.content+=" "+f)):(e=a.getCurrentColumnStyle(b,"header",e),e!=a.options.controlStyle.column.header.normal&&(d.general+=" "+e),f=a.getCurrentColumnStyle(b,"header","content"),f!=a.options.controlStyle.column.header.content&&
(d.content+=" "+f));break;case "row":h=a.getCurrentRowStyle(b,e);a.isRowFixed(b)?h!=a.options.controlStyle.row.fixed.normal&&(d.general+=" "+h):h!=a.options.controlStyle.row.general.normal&&(d.general+=" "+h);if((b=a.getCurrentRowStyle(b))&&b.custom)switch(e){case "disabled":d.custom=g.isFieldAvailable(b.custom.disabled,"");break;case "focused":d.custom=g.isFieldAvailable(b.custom.focused,"");break;case "hovered":d.custom=g.isFieldAvailable(b.custom.hovered,"");break;case "selected":d.custom=g.isFieldAvailable(b.custom.selected,
"");break;default:d.custom=g.isFieldAvailable(b.custom.normal,"")}break;case "cell":if(f=a.getCurrentCellStyle(c,b,e),f!=a.options.controlStyle.row.cell.normal&&(d.general+=" "+f),f=a.getCurrentCellStyle(c,b,"content"),f!=a.options.controlStyle.row.cell.content&&(d.content+=" "+f),(b=a.getCurrentCellStyle(c,b))&&b.custom)switch(h){case "disabled":d.custom=g.isFieldAvailable(b.custom.disabled,"");break;case "selected":d.custom=g.isFieldAvailable(b.custom.selected,"");break;default:switch(e){case "disabled":d.custom=
g.isFieldAvailable(b.custom.disabled,"");break;case "focused":d.custom=g.isFieldAvailable(b.custom.focused,"");break;case "hovered":d.custom=g.isFieldAvailable(b.custom.hovered,"");break;case "selected":d.custom=g.isFieldAvailable(b.custom.selected,"");break;default:d.custom=g.isFieldAvailable(b.custom.normal,"")}}}return d},Tb=function(a,b,c,d){var e=v;switch(d){case "top":e=la;break;case "bottom":e=oa}e&&(e.data[a].cells[b].style.cell=c.general,e.data[a].cells[b].style.content=c.content,e.data[a].cells[b].style.label=
c.label,e.data[a].cells[b].style.custom=c.custom)},Le=function(b){if(v&&(b-=w,0<=b&&b<v.data.length&&v.data[b].visible)){v.data[b].style=a.defaultStyle.row.general.normal;for(var c=0;c<a.columnList.length;c++)v.data[b].cells[c].style.cell=a.defaultStyle.row.cell.normal+" iui-treegrid-cell-empty"}};a.refreshColumns=function(){for(var b=0;b<a.completeColumnList.length;b++)for(var c=0;c<a.completeColumnList[b].length;c++)a.refresh(a.completeColumnList[b][c].column,null,!1)};a.refreshRows=function(){for(var b=
w;b<w+B;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Le(b);for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1)};var Me=function(b,c,d,f,g){if(d&&b[a.options.rowFields.fixed]==f&&(c=c.indexOf(b),0<=c&&c<d.data.length&&d.data[c].visible)){d.data[c].style=ab(b);for(var e=Qc(b,c,"cell"),h=0;h<a.columnList.length&&h<d.data[c].cells.length;h++){var l=d.data[c].cells[h].index;if(0<=
l){var p=b[a.options.rowFields.cells];l<p.length?(l=ab(p[l],b,c),Tb(c,h,l,f)):Tb(c,h,e,f)}else Tb(c,h,e,f)}void 0==g&&d&&d.$apply()}};a.refreshHover=function(b){"optimal"==a.options.displayMode?a.refresh(b,null,null,!0):a.refresh(b)};a.refresh=function(b,c,d,f){"optimal"==a.options.displayMode?a.refreshOptimal(b,c,d,f):a.refreshNormal(b,c,d)};var Ne=function(a){for(var b=null,c=0;c<z.data.length;c++){for(var e=0;e<z.data[c].length;e++)if(z.data[c][e].column==a){b=z.data[c][e];break}if(b)break}return b};
a.refreshNormal=function(b,c,d){if(b)switch(b.type){case "column":z&&(1==a.options.showHeader&&(c=Ne(b))&&(c.style.header=ab(b),c.style.filtering=Je(b),c.style.sorting=Ke(b)),1==a.options.showFooter&&(c=a.getColumnCurrentIndex(b),0<=c&&c<z.dataFooter.length&&(z.dataFooter[c].style.footer=ab(b,null,-1,!0))),void 0==d&&z&&z.$apply());break;case "row":if(v&&!a.isRowFixed(b)){var e=a.getRowCurrentIndex(b),f=e-w;if(0<=f&&f<v.data.length&&v.data[f].visible){v.data[f].style=ab(b);var h=Qc(b,e,"cell");for(c=
0;c<a.columnList.length&&c<v.data[f].cells.length;c++){var l=v.data[f].cells[c].index;if(0<=l){var g=b[a.options.rowFields.cells];l<g.length?(l=ab(g[l],b,e),Tb(f,c,l)):Tb(f,c,h)}else Tb(f,c,h)}void 0==d&&v&&v.$apply()}}Me(b,a.currentTopList,la,"top",d);Me(b,a.currentBottomList,oa,"bottom",d)}else{for(b=0;b<a.completeColumnList.length;b++)for(c=0;c<a.completeColumnList[b].length;c++)a.refresh(a.completeColumnList[b][c].column,null,!1);for(b=w;b<w+B;b++)b<a.currentList.length?a.refresh(a.currentList[b],
null,!1):Le(b);1==d&&v&&v.$apply();for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);1==d&&la&&la.$apply();for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1);1==d&&oa&&oa.$apply()}};a.refreshOptimal=function(b,c,d,f){if(b)switch(b.type){case "column":z&&(1==a.options.showHeader&&(c=Ne(b))&&(c.style.header=ab(b),c.style.filtering=Je(b),c.style.sorting=Ke(b)),1==a.options.showFooter&&(c=a.getColumnCurrentIndex(b),0<=c&&c<z.dataFooter.length&&
(z.dataFooter[c].style.footer=ab(b,null,-1,!0))),void 0==d&&z&&z.$apply());break;case "row":a.refreshCurrentView(b,f)}else{for(b=0;b<a.completeColumnList.length;b++)for(d=0;d<a.completeColumnList[b].length;d++)a.refresh(a.completeColumnList[b][d].column,null,!1);for(b=w;b<w+B;b++)b<a.currentList.length?a.refreshCurrentView(a.currentList[b]):Oe(b-w);for(b=0;b<a.currentTopList.length;b++)a.refreshCurrentView(a.currentTopList[b],!0);for(b=0;b<a.currentBottomList.length;b++)a.refreshCurrentView(a.currentBottomList[b],
!0)}};var Oe=function(b,c){for(var e=0,d="none",f=gc;3>e;){var l=b,g=0,k=a.columnList.length,m=0;if("none"==d&&c){g=ec;k=fc;for(var n=0;n<g&&n<a.columnList.length;n++)a.isColumnFixed(a.columnList[n])||m++}if(f&&0<f.length&&0<=l&&l<f.length&&v)for(kc(f[l].rowElem,{general:a.defaultStyle.row.general.normal});g<=k&&g<a.columnList.length;g++)(a.columnList[g][a.options.columnFields.fixed]?a.columnList[g][a.options.columnFields.fixed]:"none")==d&&m<f[l].cellList.length&&(kc(f[l].cellList[m].cell,{general:a.defaultStyle.row.cell.normal+
" iui-treegrid-cell-empty"}),m++);e++;1==e?(d="left",f=hc):(d="right",f=ic)}},kc=function(a,b){a&&(a.removeAttr("class"),a.addClass(b.general),a.removeAttr("style"),""!=b.custom&&a.attr("style",b.custom))};a.refreshCurrentView=function(b,c){if(b)switch(b[a.options.rowFields.fixed]){case "top":a.refreshCurrentFixedViewTop(b,c);break;case "bottom":a.refreshCurrentFixedViewBottom(b,c);break;default:a.refreshCurrentScrollView(b,c)}};a.refreshCurrentScrollView=function(a,b){for(var c=0,e="none",d=gc;3>
c;)vd(a,d,e,b),c++,1==c?(e="left",d=hc):(e="right",d=ic)};a.refreshCurrentFixedViewTop=function(a,b){for(var c=0,e="none",d=Hc;3>c;)vd(a,d,e,b,"top"),c++,1==c?(e="left",d=Ic):(e="right",d=Jc)};a.refreshCurrentFixedViewBottom=function(a,b){for(var c=0,e="none",d=Kc;3>c;)vd(a,d,e,b,"bottom"),c++,1==c?(e="left",d=Lc):(e="right",d=Mc)};var vd=function(b,c,d,f,g){if(b)switch(b.type){case "row":var e=v,h=a.getRowCurrentIndex(b),l=h-w,k=a.currentList;switch(g){case "top":e=la;l=h;k=a.currentTopList;break;
case "bottom":e=oa,l=h,k=a.currentBottomList}if(e&&c&&0<c.length&&0<=l&&l<c.length&&l<e.data.length&&e.data[l].visible){kc(c[l].rowElem,ab(b));e=0;g=a.columnList.length;var p=0;if("none"==d&&f)for(e=ec,g=fc,f=0;f<e&&f<a.columnList.length;f++)a.isColumnFixed(a.columnList[f])||p++;for(f=p;e<=g&&e<a.columnList.length;e++)(a.columnList[e][a.options.columnFields.fixed]?a.columnList[e][a.options.columnFields.fixed]:"none")==d&&f<c[l].cellList.length&&(p=nd(h,e,!0),0<=p&&p<k[h][a.options.rowFields.cells].length?
kc(c[l].cellList[f].cell,ab(k[h][a.options.rowFields.cells][p],b,h)):kc(c[l].cellList[f].cell,Qc(b,h,"cell")),f++)}}else{for(b=w;b<w+B;b++)b<a.currentList.length?a.refreshCurrentView(a.currentList[b],!0):Oe(b,!0);for(b=0;b<a.currentTopList.length;b++)a.refreshCurrentView(a.currentTopList[b],!0);for(b=0;b<a.currentBottomList.length;b++)a.refreshCurrentView(a.currentBottomList[b],!0)}};a.moveColumn=function(b,c){if(b&&0!=a.callColumnPosChanging(b)){var e=a.columnsObj.getParent(b);e=a.columnsObj.getList(e);
var d=e.indexOf(b),f=-1;if(e){switch(c){case "first":f=0;break;case "left":var l=wc(b,b[a.options.columnFields.fixed],!0);l&&(l=e.indexOf(l),0<=l&&(f=l));break;case "right":if(l=xc(b,b[a.options.columnFields.fixed],!0))l=e.indexOf(l),0<=l&&(f=l);break;case "last":f=e.length-1}0<=f&&f<e.length&&(d<f?("first"==c||"left"==c)&&f--:d>f&&("last"==c||"right"==c)&&f++,a.moveObject(d,f,e),a.updateLayout(),a.callColumnPosChanged(I,a.hoverColumn))}}};a.moveRow=function(b,c,d,f){if(b){a.allowUpdate=!1;var e=
-1;switch(d){case "first":e=0;break;case "at":e=f}if(Array.isArray(b)){f=[];for(var h=0;h<b.length;h++){for(var l=!1,g=a.getParent(b[h]);g;){if(0<=b.indexOf(g)){l=!0;break}g=a.getParent(g)}l||f.push(b[h])}if(0<f.length)if(b=a.getObjCurrentIndex(f[0]),h=a.getObjCurrentIndex(f[f.length-1]),b<=h)for(h=0;h<f.length;h++)wd(f[h],c,e,d);else for(h=f.length-1;0<=h;h--)wd(f[h],c,e,d)}else wd(b,c,e,d);a.allowUpdate=!0;a.updateCurrentLayout();a.callChange()}};var wd=function(b,c,d,f){a.rowsObj.removeAt(b,-1,
null,a.objIsRemoved)&&("first"==f||"last"==f||"at"==f?a.rowsObj.insertAt(b,d,c,a.rowIsAdded):"before"==f?a.rowsObj.insertByRef(b,c,!1,a.rowIsAdded):"after"==f&&a.rowsObj.insertByRef(b,c,!0,a.rowIsAdded))},Ta="none",aa=!1,rb=null;Ta="none";var Rc=0,xd=0,db=null;m.$watch(function(){return q[0].offsetWidth},function(b,c){a.options.autoUpdate&&(100==B?a.updateLayout():b!=c&&(db&&(f.cancel(db),db=null),db=f(function(){Xa&&Xa.css("width",q[0].clientWidth+"px");Na&&Na.css("width",q[0].clientWidth+"px");
a.updateCurrentLayout();f.cancel(db);db=null},250)))});var eb=null;m.$watch(function(){return q[0].offsetHeight},function(b,c){a.options.autoUpdate&&b!=c&&(a.options.autoSize?a.updateCurrentLayout():(eb&&(f.cancel(eb),eb=null),eb=f(function(){a.updateLayout();f.cancel(eb);eb=null},250)))});a.isColumnWithFixedWidth=function(b){return b&&b[a.options.columnFields.fixedWidth]?b[a.options.columnFields.fixedWidth]:!1};a.setColumnResizingParams=function(b,c,d){b&&(rb=b,Ta=c,xd=d,Rc=a.getColumnWidthFromData(b))};
a.isColumnFixed=function(b){return!b||"left"!=b[a.options.columnFields.fixed]&&"right"!=b[a.options.columnFields.fixed]?!1:!0};var wc=function(b,c,d){var e=null,f=void 0==c?"none":c,h=a.getColumnCompleteIndex(b);if(0<=h.level){if(0<h.index)for(var l=h.index-1;0<=l;l--){var g=a.completeColumnList[h.level][l].column;if(!d||d&&a.isColumnVisible(g)){var k=a.isColumnFixed(g)?g[a.options.columnFields.fixed]:"none";if(k==f){e=g;break}}}e||(b=a.getParentColumn(b))&&(e=wc(b,c,d))}return e},xc=function(b,c,
d){var e=null,f=void 0==c?"none":c,h=a.getColumnCompleteIndex(b);if(0<=h.level){if(0<=h.index)for(var l=h.index+1;l<a.completeColumnList[h.level].length;l++){var g=a.completeColumnList[h.level][l].column;if(!d||d&&a.isColumnVisible(g)){var k=a.isColumnFixed(g)?g[a.options.columnFields.fixed]:"none";if(k==f){e=g;break}}}e||(b=a.getParentColumn(b))&&(e=xc(b,c,d))}return e},be=function(b,c){if(b)switch(columnFixedType=b[a.options.columnFields.fixed],c){case "left":if("right"!=columnFixedType){var e=
wc(b,b[a.options.columnFields.fixed]);if(!e||a.isColumnWithFixedWidth(e))return!1}else if(!columnFixedType||"none"==columnFixedType)return 0<index;break;case "right":if("right"==columnFixedType&&(e=xc(b,b[a.options.columnFields.fixed]),!e||a.isColumnWithFixedWidth(e)))return!1}return!0},Cb=[],Pe=function(b){if(b&&(b=b[a.options.columnFields.columns]))for(var c=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&(b[c][a.options.columnFields.columns]&&0<b[c][a.options.columnFields.columns].length?
Pe(b[c]):Cb.push(b[c]))};a.resizeColumn=function(b,c,d){var e=b[a.options.columnFields.fixed];0>=c&&(d=c=0);var f;if(f=a.getHeaderElem(e))f=angular.element(f.find("tr")),0!=d&&(a.resizeColumnWithChildren(b,f,c,d),a.resizeParentColumn(b,f,d));if(f=a.getFooterElem(e))for(f=angular.element(f.find("tr")),Cb.length=0,Cb.push(b),Pe(b),b=0;b<Cb.length;b++)c=a.getColumnCurrentIndex(Cb[b]),a.resizeColumnCells(Cb[b],f,c,Cb[b][a.options.columnFields.width],2,e)};a.resizeParentColumn=function(b,c,d){if(b=a.getParentColumn(b)){var e=
b[a.options.columnFields.fixed],f=a.getColumnWidthFromData(b);f="right"==e?f-d:f+d;0>=f&&(d=f=0);0!=d&&(b[a.options.columnFields.width]=f,a.resizeColumnCells(b,c,-1,f,1,e),a.resizeParentColumn(b,c,d))}};a.resizeColumnWithChildren=function(b,c,d,f){var e=b[a.options.columnFields.fixed];0>=d&&(f=d=0);if(0!=f){b[a.options.columnFields.width]=d;a.resizeColumnCells(b,c,-1,d,1,e);var h=b[a.options.columnFields.columns];if(h&&0<h.length){b=0;if(h&&0<h.length)for(d=0;d<h.length;d++)a.isColumnWithFixedWidth(h[d])||
0<a.getColumnWidth(h[d])&&b++;if(0<b){f/=b;for(b=0;b<h.length;b++)a.isColumnWithFixedWidth(h[b])||(d=a.getColumnWidth(h[b]),0>=d&&(f="right"==e?f-a.getColumnWidthFromData(h[b]):f+a.getColumnWidthFromData(h[b])));for(b=0;b<h.length;b++)a.isColumnWithFixedWidth(h[b])||(d=a.getColumnWidth(h[b]),0<=d?(d=a.getColumnWidthFromData(h[b]),d="right"==e?d-f:d+f):d=0,a.resizeColumnWithChildren(h[b],c,d,f))}}else a.resizeRows(b,d,e),a.resizeRows(b,d,e,"top"),a.resizeRows(b,d,e,"bottom")}};a.resizeRows=function(b,
c,d,f){var e=a.getRowElems(d,f);if(e){var h=a.getColumnCurrentIndex(b),l={top:0,right:0,bottom:0,left:0},k=a.getElemFromColumn(b,b[a.options.columnFields.fixed]);k&&(k=a.getChildElement(k,"column-header-cell"))&&(l=g.getPadding(k[0]));for(k=0;k<e.length;k++)currentRowElem=angular.element(e[k]),a.resizeColumnCells(b,angular.element(e[k]),h,c,0,d,!0,l,f)}};a.resizeColumnCells=function(b,c,d,f,g,k,m,n,q){if(c){var e=-1;m&&(e=a.getRowCurrentIndex(a.getRowFromElem(c)));c=0;0<=e&&!q&&(c=a.indentList[e]);
switch(g){case 1:b=a.getElemFromColumnCell(b,k);break;case 2:b=a.getElemFromColumnCell(b,k,!0,"column-footer",d);break;case 3:b=a.getElemFromColumnCell(b,k,!1,"column-expand-cell");break;default:b=a.getElemFromCell(e,d,k,q)}b&&0<b.children().length&&(b=b.children().eq(0))&&(n=n?n.left+c:c,k=f,0<=e&&d==a.options.expandColIndex&&(k-=n),k=0<=k?k:0,3==g&&(k+=2),b.css("width",k+"px"),d==a.options.expandColIndex&&(0==k?b.css("padding-left",f+"px"):b.css("padding-left",n+"px")))}};var Jd=function(b){a.dropMark()},
Kd=function(a){Ib()},Ld=function(b){a.removeDropMark();a.dragIcon&&angular.element(a.dragIcon).remove();a.cancelScrollTimer();a.dragDropStatus(!1)};angular.element(k).bind("dragenter",Jd);angular.element(k).bind("dragover",Kd);angular.element(k).bind("dragend",Ld);var ja=angular.element('<div class="iui-treegrid-column-reorder-mark"><span></span></div>'),Sa=angular.element('<div class="iui-treegrid-column-reorder-tooltip"><span></span></div>'),Vd=function(b){var c="initial";if(wa&&I){var e=!0;if(!a.hoverColumn||
I==a.hoverColumn||a.hoverColumn&&0==a.hoverColumn.allowDrop||a.hoverColumn&&I[a.options.columnFields.fixed]!=a.hoverColumn[a.options.columnFields.fixed])e=!1;else if(a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&I[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]){var d=a.getColumnCompleteIndex(I),f=a.getColumnCompleteIndex(a.hoverColumn);if(I[a.options.columnFields.pid]!=a.hoverColumn[a.options.columnFields.pid]||d.level!=f.level)e=!1}e||(c="no-drop",
b&&Sa&&Sa.css("display","none"))}q.css("cursor",c);document.body.style.cursor=c},md=function(b){return b?{min:g.isFieldAvailable(b[a.options.columnFields.minWidth],0),max:g.isFieldAvailable(b[a.options.columnFields.maxWidth],9999999)}:{min:0,max:9999999}},Nd=function(b){if(0===b.button&&rb&&"none"!=Ta){var c=a.getMousePos(b).x-xd,e=Rc+c;"right"==rb[a.options.columnFields.fixed]&&(e=Rc-c);e=0<=e?e:0;var d=md(rb);e>=d.min&&e<=d.max&&(a.resizeColumn(rb,e,c),a.updateViewSize(),a.updateScrollVisibility(),
bd())}Cc?qa||1!==b.which||(U[0].getBoundingClientRect(),b=a.getMousePos(b),M.scrollMousePos||(M.scrollMousePos=b),c=U[0].offsetLeft+(b.x-M.scrollMousePos.x),c<Ya?c=Ya:c+U[0].offsetWidth>nb&&(c=nb-U[0].offsetWidth),U.css("left",c+"px"),M.scrollMousePos=b,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.x=!1!==a.options.rtl?parseInt((nb-U[0].offsetLeft-U[0].offsetWidth)*zb,10):parseInt((U[0].offsetLeft-Ya)*zb,10),cd(),(yd(a.scrollPos)||a.scrollPos.x!=a.prevScrollPos.x)&&a.callScrollPosChanged()):
ma&&(qa||1!==b.which||(da[0].getBoundingClientRect(),b=a.getMousePos(b),M.scrollMousePos||(M.scrollMousePos=b),c=da[0].offsetTop+(b.y-M.scrollMousePos.y),c<ob?c=ob:c+da[0].offsetHeight>Pb&&(c=Pb-da[0].offsetHeight),da.css("top",c+"px"),M.scrollMousePos=b,Fc=c-ob,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.y=Math.floor(Fc*Gc*R),(yd(a.scrollPos)||a.scrollPos.y!=a.prevScrollPos.y)&&a.callScrollPosChanged(),newIndex=0<R?Math.floor(a.scrollPos.y/R):0,newIndex+B-1>a.currentList.length&&
(newIndex=a.currentList.length-B+1,newIndex+=5),0>newIndex&&(newIndex=0),newIndex!==w&&(w=newIndex,a.updateVerticalScrollView())))},Od=function(b){a.removeDropDownList();a.closeEditor(G);a.closeFilterWindow();d()},Pd=function(b){Vd(!0);Sa&&Sa.remove();wa=!1;rb&&"none"!=Ta&&a.callColumnSizeChanged(rb);rb=null;Ta="none";xd=Rc=0;aa=!1;q.css("cursor","default");a.updateView();a.dropMark();ma&&a.updateView();Ib();M.scrollMousePos=null;ma=Cc=!1;q.css("cursor","default");document.body.style.cursor="default"},
Md=function(b){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}};angular.element(k).bind("mousemove",Nd);angular.element(k).bind("mousedown",Od);angular.element(k).bind("mouseup",Pd);angular.element(k).bind("keyup",Md);var zd=!1,Ub=0,Sc=null,Qe=.5;a.isScrollBarVisible=function(a){switch(a){case "horizontal":return O;case "vertical":return T}return O&&T};a.prevScrollPos={x:0,
y:0};a.scrollPos={x:0,y:0};a.getMaxScrollPos=function(){return Q};a.getScrollPos=function(){return a.scrollPos};a.setScrollPos=function(b,c){if(!qa&&b){var e=!0;0>b.x&&(b.x=0,e=!1);b.x>Q.x&&(b.x=Q.x,e=!1);0>b.y&&(b.y=0,e=!1);b.y>Q.y&&(b.y=Q.y,e=!1);a.scrollPos=b;Fc=Math.floor(a.scrollPos.y/(R*Gc));var d=ob+Fc;var f=!1!==a.options.rtl?Math.floor(a.scrollPos.x/zb)-(nb-U[0].offsetWidth-Ya):Math.floor(a.scrollPos.x/zb)+Ya;O&&U&&U.css("left",f+"px");T&&da&&da.css("top",d+"px");cd();qd(!0,c);e&&a.callScrollPosChanged()}};
var yd=function(a){return 0<a.x&&a.x<Q.x||0<a.y&&a.y<Q.y},yc=function(b,c,d){zd||(a.updateFocus(),Ub=0,zd=!0,Sc=n(function(){var e=c,d=a.getScrollPos();e||(0===Ub&&(Ub=5),Ub+=5+Gc,Qe+=.5,e=Ub+=Math.floor(Qe));d.y=b?d.y+e:d.y-e;a.setScrollPos(d);(0>=d.y||a.getScrollPos().y<d.y)&&Ib()},d?d:100))},Ib=function(){Sc&&(n.cancel(Sc),Sc=null);zd=!1;Ub=0};a.cancelScrollTimer=function(){Ib()};a.scrollTo=function(b,c){if(b){var e=a.getRowCurrentIndex(b);if(a.isRowIndexInRange(e)){var d=e;switch(c){case "center":d=
Math.floor(B/2)-1;d=e>d?e-d:0;break;case "bottom":d=B-2,a.options.showHeader&&d--,a.options.showFooter&&d--,d=e>d?e-d:0}a.setScrollPos({x:a.scrollPos.x,y:d*R})}}};var cd=function(){var b=a.scrollPos.x;0>b&&(b=0);b>Q.x&&(b=Q.x);b*=-1;na&&na.css("left",b+J+"px");Ua&&Ua.css("left",b+J+"px");ka&&ka.css("left",b+J+"px");Z&&Z.css("left",b+J+"px");X&&X.css("left",b+J+"px")},qd=function(b,c){if(!(0==b&&0>=R)){newIndex=0<R?Math.floor(a.scrollPos.y/R):0;a.scrollPos.y==Q.y&&newIndex--;if(a.currentList.length>=
B&&newIndex+B-1>a.currentList.length){newIndex=a.currentList.length-B+1;var e=a.getRowElems();e||(e=a.getRowElems("left"));e||(e=a.getRowElems("right"));e&&0<e.length&&(e=angular.element(e[e.length-1]),e[0].offsetTop+e[0].offsetHeight>q[0].clientHeight-(y+H)&&newIndex++)}0>newIndex&&(newIndex=0);newIndex!=w&&(w=newIndex,0!=b&&a.updateView(c))}};q.bind("scroll",function(a){q[0].scrollTop=0;q[0].scrollLeft=0});var Re=function(b,c){if(T){document.activeElement&&document.activeElement.blur();a.removeDropDownList();
a.closeEditor(G);a.closeFilterWindow();d();var e=a.hoverRow;a.hoverRow=null;a.refresh(e);e=Math.floor(q[0].clientHeight/4);switch(a.options.mouseWheelSpeed){case "veryslow":e=R;break;case "slow":e=2*R;break;case "fast":e=Math.floor(q[0].clientHeight/2)-y-H-R;break;case "veryfast":e=Math.floor(q[0].clientHeight-y-H-R)}a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y};a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e*c*-1},!0);yd(a.scrollPos)||a.scrollPos.y==a.prevScrollPos.y||a.callScrollPosChanged()}};
q.bind("mousewheel",function(b){if(0==a.options.autoSize&&(b.preventDefault(),!qa&&a.options.enabled)){var c=0;b.wheelDelta?c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,b.originalEvent.wheelDelta||-b.originalEvent.detail)));Re(b,c)}});q.bind("DOMMouseScroll",function(b){if(0==a.options.autoSize&&(b.preventDefault(),!qa&&a.options.enabled)){var c=0;b.detail?c=Math.max(-1,Math.min(1,-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,-b.originalEvent.detail)));
Re(b,c)}});var lc={x:0,y:0},sb={x:0,y:0};q.bind("touchstart",function(b){b.preventDefault();a.options.enabled&&(b=a.getTouchData(b))&&0<b.length&&(lc={x:b[0].pageX,y:b[0].pageY})});q.bind("touchend",function(b){if(a.options.enabled){(b=a.getTouchData(b))&&0<b.length&&(sb={x:b[0].pageX,y:b[0].pageY});var c=sb.x-lc.x,e=sb.y-lc.y;(20<Math.abs(c)||20<Math.abs(e))&&document.activeElement&&document.activeElement.blur();var d=!1,f=!1,g=lc,k=a.scrollPos.x,m=a.scrollPos.y,q=n(function(){var b=a.scrollPos;
-20>c?(g.x-=10,g.x>sb.x?b.x+=10:(b.x=k-c,d=!0)):20<c?(g.x+=10,g.x<sb.x?b.x-=10:(b.x=k-c,d=!0)):d=!0;-20>e?(g.y-=10,g.y>sb.y?b.y+=10:(b.y=m-e,f=!0)):20<e?(g.y+=10,g.y<sb.y?b.y-=10:(b.y=m-e,f=!0)):f=!0;a.setScrollPos(b);d&&f&&n.cancel(q)},5);lc=sb}});var La=null,ha=angular.element('<div class="iui-contextmenu" data-element="context-menu" tabindex="999999"></div>'),Aa=angular.element('<ul class="iui-contextmenu-block"></ul>');m.$eval(sc.menuItems);ha.append(Aa);var Se=m.name,mc=null,Db={general:"iui-contextmenu",
block:{general:"iui-contextmenu-block",marker:{top:"iui-contextmenu-marker-top",left:"iui-contextmenu-marker-left",bottom:"iui-contextmenu-marker-bottom",right:"iui-contextmenu-marker-right",rtlTop:"iui-contextmenu-marker-top-rtl",expand:{down:"iui-contextmenu-marker-expand-down",right:"iui-contextmenu-marker-expand-right",rtlDown:"iui-contextmenu-marker-expand-rtl-down",up:"iui-contextmenu-marker-expand-up",left:"iui-contextmenu-marker-expand-left",space:"iui-contextmenu-marker-expand-space"}}},
item:{general:{disabled:"iui-contextmenu-item-disabled",focused:"iui-contextmenu-item-focused",normal:"iui-contextmenu-item",hovered:"iui-contextmenu-item-hovered",selected:"iui-contextmenu-item-selected"},content:"iui-contextmenu-item-content",header:"iui-contextmenu-item-header",loadIcon:{general:"iui-contextmenu-load",icon:"iui-contextmenu-load-icon"},separator:"iui-contextmenu-item-separator"}},u={controlStyle:Db,dataFields:{enabled:"enabled",icon:"icon",id:"id",hasChildren:"hasChildren",pid:"pid",
items:"items",style:"style",text:"text",type:"type"},enabled:!0,itemClick:null,itemIcon:"",items:[],loadItem:null,open:null,openOnHover:!0,position:"mouse",rtl:!1,activate:"rightclick",showIcons:!0},nc=[],Ra=[],Ad=function(a,b,c){a.type||(a.type="item");a[u.dataFields.id]||(a[u.dataFields.id]=g.getUniqueId());b&&(a[u.dataFields.pid]=b);c?Ra.push(a):nc.push(a)},Te=function(a,b,c){if(a[u.dataFields.items]){if(Ad(a,b,c),b=a[u.dataFields.items])for(var e=0;e<b.length;e++)Te(b[e],a[u.dataFields.id],c)}else Ad(a,
b,c)},sf=function(){Ra.length=0;if(La)for(var a=oc(La),b=0;b<a.length;b++)Te(a[b],null,!0);return Ra},tf=function(){nc.length=0;if(La){var a=oc(La);if(a)for(var b=0;b<a.length;b++)Ad(a[b],0,null,!1)}},Tc=function(a){return a&&Ra?Ra.indexOf(a):-1},oc=function(b){return"column"==b.type?b[a.options.columnFields.contextMenu]:b[a.options.rowFields.contextMenu]},ae=function(a,b){if(b){var c=oc(b);if(!c||c&&0==c.length)return!1;a.ctrlKey||a.metaKey||(ha&&(ha.unbind("blur"),ha.remove()),uf(a));return!0}return!1},
Qd=function(a){lb()},Rd=function(a){lb()},Sd=function(a){switch(a.keyCode){case 27:lb()}};angular.element(k).bind("click",Qd);angular.element(k).bind("contextmenu",Rd);angular.element(k).bind("keydown",Sd);var Yb=function(a){(a?a:Aa).unbind("contextmenu");a=a?a.find("li"):Aa.children();if(0<a.length)for(var b=0;b<a.length;b++)currentElem=angular.element(a[b]),currentElem.unbind("click mousedown mouseenter mouseleave touchstart")},Bd=function(a){Yb(a);(a?a:Aa).bind("contextmenu",function(a){a.preventDefault()});
var b=null;a=a?a.find("li"):Aa.children();if(0<a.length)for(var c=null,e=0;e<a.length;e++)c=angular.element(a[e]),(b=pc(c))&&b&&g.isEnabled(b[u.dataFields.enabled])&&b&&"item"==b.type&&vf(c)},Dd=function(){for(var a=0;a<Ba.length;a++)Ba[a][u.dataFields.selected]=!1,Cd(Ba[a]);Ba.splice(0,Ba.length);Ca=null},vf=function(a){a&&(a.bind("mousedown",function(a){var b=pc(this);b&&(b.itemClick&&b.itemClick({parentName:Se,item:b,mousePos:{x:a.pageX,y:a.pageY}}),lb());a.stopPropagation()}),a.bind("mouseenter",
function(a){var b=pc(this);b&&(angular.element(this),mc=b,Vb(null,!0),Ed(b)&&b!=Ca&&Dd(),bb&&f.cancel(bb),bb=f(function(){bb&&wf(b)},500));a.stopPropagation()}),a.bind("mouseleave",function(a){mc=null;var b=pc(this);if(b){Vb(null,!0);Ed(b)&&b==Ca&&Dd();Ca&&(Ca[u.dataFields.selected]=!0,Vb(Ca));var c=f(function(){Cd(b);f.cancel(c)},250)}bb&&f.cancel(bb);bb=null;a.stopPropagation()}),a.bind("touchstart",function(a){a.preventDefault();var b=g.getTouchData(a);if(b&&0<b.length){var c=pc(this);c&&(c.itemClick&&
c.itemClick({parentName:Se,item:c,mousePos:{x:b[0].pageX,y:b[0].pageY}}),lb());a.stopPropagation()}}))},Ca=null,Ba=[],Ue=function(a){return a?(a=a[u.dataFields.items],void 0!=a&&0<a.length):!1},wf=function(a){var b=Fd(a);if(a&&Gd(a)&&W&&b){var c=b.find("ul");if(0<c.length){c=angular.element(c.eq(0));Yb(c);Ue(a)&&(b.removeClass(u.controlStyle.block.marker.expand.down),b.removeClass(u.controlStyle.block.marker.expand.left),b.removeClass(u.controlStyle.block.marker.expand.right),b.removeClass(u.controlStyle.block.marker.expand.rtlDown));
Ca=Ed(a)?a:Ca;Ca[u.dataFields.selected]=!0;0>Ba.indexOf(Ca)&&Ba.unshift(Ca);for(var e=0;e<Ba.length;e++)Ba[e]!=Ca&&(Ba[e][u.dataFields.selected]=!1,Cd(Ba[e]));Ba.splice(1,Ba.length-1);if(Ue(a)){e=Ve(a);if(0<=e){var d=0,k="auto";k=angular.element(b.parent());g.getPadding(b[0]);var m=g.getPadding(k[0]);b=g.getPadding(b[0]);d-=m.top+b.top;k=k[0].offsetWidth-8;0<b.right&&(k+=b.right-4);b="display:block;"+("top:"+d+"px;");"auto"!=k&&(b+="left:"+k+"px;");(a=Uc(qc(a)))&&a.data&&e<a.data.length&&(a.data[e].inlineBlockStyle=
b,W.$apply())}f(function(){Bd(c);We()},1)}}}},Cd=function(a){var b=Fd(a);if(a&&W&&b){var c=b.find("ul");0<c.length&&(c=angular.element(c.eq(0)),Yb(c),Gd(a)&&b.addClass(u.controlStyle.block.marker.expand.right),b=Ve(a),0<=b&&(a=Uc(qc(a)))&&a.data&&b<a.data.length&&(a.data[b].inlineBlockStyle="display:none;",W.$apply()))}},lb=function(){Dd();mc=null;ha&&(ha.unbind("blur"),ha.remove());if(document.body)for(var a=angular.element(document.body).children(),b=0;b<a.length;b++){var c=angular.element(a[b]);
c[0].attributes&&c[0].attributes["data-element"]&&"context-menu"===c[0].attributes["data-element"].value&&c.remove()}La=Ca=null;bb&&f.cancel(bb);bb=null},uf=function(a){if(document.body){ha.css("top","-999px");ha.css("tabindex","999");angular.element(document.body).append(ha);ha.bind("blur",function(a){lb()});tf();sf();xf(void 0);var b=f(function(){ha[0].focus();var c=a.pageY,e=a.pageX,d=g.getPageRect(q[0]);switch(u.position){case "above":c=d.top-2-Aa[0].offsetHeight;e=d.right-Aa[0].offsetWidth+1;
break;case "below":c=d.bottom+2;e=d.right-Aa[0].offsetWidth+1;break;case "left":c=d.top-1;e=d.left-2-Aa[0].offsetWidth;break;case "right":c=d.top-1,e=d.right+2}ha.css("top",c+"px");ha.css("left",e+"px");Bd();u.open&&u.open({mousePos:{x:a.pageX,y:a.pageY}});f.cancel(b)},1)}},Fd=function(a){var b=null;if(a){a=Tc(a);var c=ha.find("li");if(c&&0<c.length)for(var d=0;d<c.length;d++){var e=angular.element(c[d]);if(e[0].attributes["data-index"]&&e[0].attributes["data-index"].value.toString()===a.toString()){b=
e;break}}}return b},yf=function(a){var b=null;a&&(a=Fd(a))&&(a=a.find("ul"),0<a.length&&(b=angular.element(a.eq(0))));return b},pc=function(a){if(a&&(a=angular.element(a))&&a[0].attributes["data-index"]&&(a=a[0].attributes["data-index"].value,0<=a&&a<Ra.length))return Ra[a]},Xe=function(a,b){var c=null;if(a&&b)for(var d=0;!c&&d<b.length;)c=b[d][u.dataFields.id]&&a[u.dataFields.pid]&&b[d][u.dataFields.id].toString()===a[u.dataFields.pid].toString()?b[d]:Xe(a,b[d][u.dataFields.items]),d++;return c},
Ve=function(a){var b=qc(a);b=Ye(b);var c=-1;b||(b=Ye());if(!a[u.dataFields.id]&&b)c=b.indexOf(a);else if(a&&b)for(var d=0;d<b.length;d++)if(b[d][u.dataFields.id]&&a[u.dataFields.id]&&b[d][u.dataFields.id].toString()===a[u.dataFields.id].toString()){c=d;break}return c},qc=function(a){if(La){var b=oc(La);return a&&b?Xe(a,b):null}return null},Ye=function(a){return a?(a[u.dataFields.items]||(a[u.dataFields.items]=[]),a[u.dataFields.items]):La?oc(La):[]},zf=function(a){if(a&&"separator"!=a.type){if(0==
a[u.dataFields.enabled])return"disabled";if(a==mc)return"hovered";if(1==a[u.dataFields.selected])return"selected"}return"normal"},Ed=function(a){return!a||void 0!=a[u.dataFields.pid]&&null!=a[u.dataFields.pid]?!1:!0},bb=null,W=null,Gd=function(a){if(a){var b=a[u.dataFields.items];return a[u.dataFields.hasChildren]||b&&0<b.length}return!1};ad=function(a){return null!=a.icon||null!=u.itemIcon};var Af=function(a,b,c){var d="";a[u.dataFields.icon]||""==a[u.dataFields.icon]?d=a[u.dataFields.icon]:u.itemIcon&&
(d=u.itemIcon);return{icon:d,iconVisible:0!=u.showIcons&&ad(a),index:b,inlineBlockStyle:"display:none",item:a,style:{},visible:c}},Hd=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)b.push(Af(a[c],Tc(a[c])));return b},We=function(){var a=Aa.find("li");if(0<a.length)for(var b=0;b<a.length;b++)for(var c=angular.element(a[b]),d=c.children(),f=0;f<d.length;f++){var g=angular.element(d[f]);g[0].attributes["data-element"]&&"load-icon"==g[0].attributes["data-element"].value.toString()&&g.css("top",
(c[0].clientHeight-g[0].offsetHeight)/2+"px")}},Bf=function(){var a=Aa.find("li");if(0<a.length)for(var b=0;b<a.length;b++){var c=angular.element(a[b]);c&&c.attr("data-index",b)}},Ze=function(a,b){var c=null;if(a&&b)for(var d=0;!c&&d<a.length;)c=a[d].item==b?a[d]:Ze(a[d].data,b),d++;return c},Uc=function(a){return a?Ze(W.data,a):W},xf=function(a){var b=f(function(){Yb();u.rtl?ha.css("direction","rtl"):ha.css("direction","ltr");a||(Aa.empty(),W&&W.$destroy());f.cancel(b)},1),d=f(function(){var b="";
if(a){var e=Uc(a);if(e){var g=a[u.dataFields.items];if(g&&0<g.length){e.data=Hd(g);Vb();W.$apply();for(var h=0;h<g.length;h++)b+=Id(h,g[h],e.scopeRef,e.data);""!=b&&(e=yf(a))&&(e.empty(),e.append(c(b)(W)))}Bf()}}else{W=m.$new();W.data=Hd(nc);Vb();W.$apply();for(e=0;e<nc.length;e++)b+=Id(e,nc[e],"data",W.data);""!=b&&Aa.append(c(b)(W))}Bd();var k=f(function(){We();f.cancel(k)},1);f.cancel(d)},1)},Id=function(a,b,c,d){Tc(b);var e='<li iui-class="{{'+c+"["+a+"].style";e="header"==b.type?e+'.header}}"':
e+'.general}}"';e+=' data-index="'+Tc(b)+'">';switch(b.type){case "header":e=e+'<span data-element="header">'+("{{"+c+"["+a+"].item."+u.dataFields.text+"}}");e+="</span>";break;case "separator":e+='<hr iui-class="{{'+c+"["+a+'].style.separator}}" data-element="separator" />';break;default:e=e+('<span iui-class="{{'+c+"["+a+'].icon}}" data-element="icon" ng-show="'+c+"["+a+'].iconVisible"></span>')+('<span iui-class="{{'+c+"["+a+'].style.content}}"  data-element="content">')+("{{"+c+"["+a+"].item."+
u.dataFields.text+"}}"),e=e+"</span>"+('<span iui-class="{{'+c+"["+a+'].style.loadIcon}}" data-element="load-icon"></span>')}var f=b[u.dataFields.items];if(b[u.dataFields.hasChildren]||f&&0<f.length){e+='<ul iui-class="{{'+c+"["+a+"].style.block";switch(u.displayMode){case "vertical":e=u.rtl?e+'.marker.right}}"':e+'.marker.left}}"';break;default:e=u.rtl?e+'.marker.right}}"':e+'.marker.left}}"'}e+=' iui-style="{{'+c+"["+a+'].inlineBlockStyle}}">';c+="["+a+"].data";d[a].data=Hd(f);d[a].scopeRef=c;if(f&&
0<f.length)for(b=0;b<f.length;b++)e+=Id(b,f[b],d[a].scopeRef,d[a].data);e+="</ul>"}return e+"</li>"},rc=function(a,b){var c=u.controlStyle.item;if(a)switch(a.style){case "initial":break;case "parent":return rc(qc(a),b);default:null!=a.style&&(c=a.style)}if(b){if(g.isString(c.general))return c.general;switch(b){case "disabled":return c.general&&c.general.disabled?c.general.disabled:u.controlStyle.item.general.disabled;case "focused":return c.general&&c.general.focused?c.general.focused:u.controlStyle.item.general.focused;
case "hovered":return c.general&&c.general.hovered?c.general.hovered:u.controlStyle.item.general.hovered;case "selected":return c.general&&c.general.selected?c.general.selected:u.controlStyle.item.general.selected;default:return c.general&&c.general.normal?c.general.normal:u.controlStyle.item.general.normal}}else return c?c:u.controlStyle.item},Vb=function(a,b){if(W)if(a)switch(a.type){default:var c=Uc(a);if(c){var d=Gd(a),e=zf(a),f={block:Db.block,content:"",general:"",header:Db.item.header,label:"",
loadIcon:"",separator:Db.item.separator};var g=Db.item.general.normal;u.controlStyle.item.general.normal!=g&&(g+=" "+u.controlStyle.item.general.normal);f.general=g;g=Db.item.content;u.controlStyle.item.content!=g&&(g+=" "+u.controlStyle.item.content);f.content=g;g=Db.item.loadIcon.general;u.controlStyle.item.loadIcon.general!=g&&(g+=" "+u.controlStyle.item.loadIcon.general);u.rtl&&(g+="-rtl");f.loadIcon=g;switch(a.type){case "header":g=rc(a).header;g!=u.controlStyle.item.header&&(f.header+=" "+g);
break;case "separator":g=rc(a).separator;g!=u.controlStyle.item.separator&&(f.separator+=" "+g);break;default:var k=rc(a);g=rc(a,e);g!=u.controlStyle.item.general.normal&&(f.general+=" "+g);d&&"selected"!=e&&!u.loadItem&&(f.general=u.rtl?f.general+(" "+u.controlStyle.block.marker.expand.left):f.general+(" "+u.controlStyle.block.marker.expand.right));g=k.content;g!=u.controlStyle.item.content&&(f.content+=" "+g);a==u.loadItem&&(g=k.loadIcon.icon,f.loadIcon+=" "+g,g!=u.controlStyle.item.loadIcon.icon&&
(f.loadIcon+=" "+g))}c.style=f;void 0==b&&W.$apply()}}else{for(c=0;c<Ra.length;c++)Ra[c][u.dataFields.selected]=!1;for(c=mc;c;)c[u.dataFields.selected]=!0,c=qc(c);for(c=0;c<Ra.length;c++)Vb(Ra[c],!1);1==b&&W.$apply()}};M=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=
this.crpar();this.$tw=angular.element(this.crtr(M.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",
q[0].scrollLeft+"px"))};this.s1t=function(a){M.s3t();this.trlTime=f(function(){M.trActive||(M.trCount=0,M.trActive=!0,M.trId=n(function(){M.animTr()},1E3))},a)};this.s3t=function(){this.trId&&(n.cancel(this.trId),this.trId=null);this.trlTime&&(f.cancel(this.trlTime),this.trlTime=null);this.trActive=!1};this.s2t=function(){this.s3t();this.trActive=!1;this.$tw.remove()};q.append(this.$tw);this.s1t(this.twp);angular.isDefined(m.options)?a.updateOptions(m.options):(0==m.allowAnimation&&(a.options.allowAnimation=
m.allowAnimation),0==m.allowCellFocus&&(a.options.allowCellFocus=m.allowCellFocus),1==m.allowColumnReorder&&(a.options.allowColumnReorder=m.allowColumnReorder),1==m.allowDrag&&(a.options.allowDrag=m.allowDrag),0==m.allowDrop&&(a.options.allowDrop=m.allowDrop),1==m.allowFilter&&(a.options.allowFilter=m.allowFilter),0==m.allowFocus&&(a.options.allowFocus=m.allowFocus),0==m.autoExpand&&(a.options.autoExpand=m.autoExpand),1==m.autoSize&&(a.options.autoSize=m.autoSize),0==m.autoUpdate&&(a.options.autoUpdate=
m.autoUpdate),angular.isDefined(m.animationSpeed)&&200!==m.animationSpeed&&(a.options.animationSpeed=m.animationSpeed),angular.isDefined(m.controlStyle)&&a.updateControlStyle(m.controlStyle),angular.isDefined(m.displayMode)&&(a.options.displayMode=m.displayMode),angular.isDefined(m.editorSettings)&&a.updateEditorSettings(m.editorSettings),angular.isDefined(m.expandingColumnIndex)&&(a.options.expandColIndex=m.expandingColumnIndex),angular.isDefined(m.fields)&&(a.updateDataFields(m.fields),a.updateData()),
0==m.enabled&&(a.options.enabled=m.enabled),1==m.fillSpace&&(a.options.fillSpace=m.fillSpace),angular.isDefined(m.gridLines)&&(a.options.gridLines=m.gridLines),1==m.hoverSelection&&(a.options.hoverSelection=m.hoverSelection),angular.isDefined(m.indent)&&(a.options.indent=m.indent),angular.isDefined(m.labelEdit)&&(a.options.labelEdit=m.labelEdit),angular.isDefined(m.maxRows)&&(a.options.maxRows=m.maxRows),angular.isDefined(m.mouseWheelSpeed)&&(a.options.mouseWheelSpeed=m.mouseWheelSpeed),angular.isDefined(m.paging)&&
a.updatePaging(m.paging),angular.isDefined(m.rowHeight)&&(a.options.rowHeight=m.rowHeight),angular.isDefined(m.rowIcon)&&(a.options.rowIcon=m.rowIcon),1==m.rtl&&(a.options.rtl=m.rtl),angular.isDefined(m.selectedIndex)&&(a.options.selectedIndex=m.selectedIndex),angular.isDefined(m.selectedRow)&&(a.options.selectedRow=m.selectedRow),angular.isDefined(m.selectionMode)&&(a.options.selectionMode=m.selectionMode),!1===m.showExpandBoxes&&(a.options.showExpandBoxes=m.showExpandBoxes),0==m.showFooter&&(a.options.showFooter=
m.showFooter),0==m.showHeader&&(a.options.showHeader=m.showHeader),0==m.showIcons&&(a.options.showIcons=m.showIcons),angular.isDefined(m.showScroll)&&a.updateShowScroll(m.showScroll),angular.isDefined(m.sorting)&&(a.options.sorting=m.sorting));a.updateLayout()}}}]);