<!DOCTYPE html>
<html ng-app="queryFeeReportApp">
<head>
	<meta name="referrer" content="no-referrer">
<title>个人报表</title>
<meta charset="utf-8">
<script src="../skeleton/includeJs_3rd.js"></script>
<script src="../skeleton/includeCss_3rd.js"></script>
<style>

body {
	padding: 0px 20px 10px 10px;
}
table tr {
    height: 30px;
}

.modal {
	background-color: rgba(102, 102, 102, 0.85);
}

.container {
	margin-top: 5px;
	width: 1000px;
	box-shadow: 0 0 20px #888888;
	z-index: 10;
	background-color: rgba(255, 255, 255, 1);
}

.m-title {
	text-align: center;
	border-bottom: 1px solid #ccc;
	padding: 10px;
}
.ng-isolate-scope {
	margin-top: 10px;
}

</style>
</head>
<body ng-controller="queryFeeReportCtrl as qfr" ng-init="url='../rest/queryFeeList'" ng-cloak>
<div style="display: inline-block; width: 100%; text-align: right;"> 
	单位名称：<div style="display: inline-block; margin-right: 10px; width: 10%;">
		<div class="form-group" style="min-width:160px;">
			<div align="left" ng-dropdown-multiselect="" id="org" options="orgs" ng-model="data.unitName" selected-model="selectedOrg" extra-settings="orgsSettings" translation-texts="orgTexts"></div>
		</div>
	</div>
	notes登录名：<div style="display: inline-block; margin-right: 10px; width: 10%;">
		<input type="text" class="input-text" ng-model="data.notesId">
	</div>
	用户名：<div style="display: inline-block; margin-right: 10px; width: 10%;">
		<input type="text" class="input-text" ng-model="data.userName">
	</div>
	资费类型：<div style="display: inline-block; margin-right: 10px; width: 10%;">
	
		<select class="input-text" style="cursor: pointer;" ng-model="data.feeType">
		
			<option value="" selected="selected">全部</option>
			<option ng-repeat="feeTypeObj in rateRule" value="{{feeTypeObj.rateRuleName}}">{{feeTypeObj.rateRuleName}}</option>
		</select>
		
	</div>
	月份：<div style="display: inline-block; margin-right: 10px; width: 19%;">
		<input type="text" onfocus="WdatePicker({dateFmt:'yyyyMM', maxDate:'#F{$dp.$D(\'endDate\')||\'3000-01-01\'}'})" id="beginDate" class="input-text Wdate" style="width:45%; cursor: pointer;" ng-model="beginDate" onChange=""> 
		-
		<input type="text" onfocus="WdatePicker({dateFmt:'yyyyMM', minDate:'#F{$dp.$D(\'beginDate\')}',maxDate:'3000-01-01'})" id="endDate" class="input-text Wdate" style="width:45%; cursor: pointer;" ng-model="endDate" onChange="">
	</div>
	<div style="display: inline-block;">
		<span><button ng-click="load_page(1)" class="btn btn-primary"><i class="icon Hui-iconfont">&#xe709;</i>&nbsp;查询</button></span>
		<span>&nbsp;<button type="reset" ng-click="resetBtn()" class="btn btn-primary"><i class="icon Hui-iconfont">&#xe68f;</i>&nbsp;重置</button></span>
	</div>
</div>
<div>
</div>
<div style="height: 375px; margin-top:10px" >
<table class="table-condensed table-border table-hover">
<thead>
	<tr>
		<th>用户名</th>
		<th>notes登录名</th>
		<th>单位名称</th>
		<th>资费类型</th>
		<th>话单数</th>
		<th>费用（元）</th>
		<th>归属月份</th>
		<th>详情显示</th>
	</tr>
</thead>
<tbody>
	<tr ng-repeat="o in list track by $index">
		<td ng-cloak>{{o.userName}}</td>
		<td ng-cloak>{{o.notesId}}</td>
		<td ng-cloak>{{o.orgNameFull}}</td>
		<td ng-cloak>{{o.feeTypeName}}</td>
		<td ng-cloak>{{o.callTime}}</td>
		<td ng-cloak>{{o.fee}}</td>
		<td ng-cloak>{{o.month}}</td>
		<td ng-cloak>
			<button class="btn btn-primary size-MINI" ng-click="loadDetail(list, $index)" ng-if="o.feeType == 1 || o.feeType == 2 || o.feeType == 9 ">
				显示详情
			</button>
		</td>
	</tr>
</tbody>
</table>
</div>
<div page-directive style="margin-top: 10px;"></div>
<div style="margin-top: 10px; width: 100%;">
	<button ng-click="downloadTemplate()" class="btn btn-primary" style="margin-left: 5px; float: right;"><i class="icon Hui-iconfont">&#xe641;</i>&nbsp;模版下载</button>
	<span class="btn-upload" style="margin-left: 5px; float: right;">
	  <a style="z-index:2; line-height: 18px;" href="javascript:void();" class="btn btn-primary radius"><i class="icon Hui-iconfont">&#xe709;</i>&nbsp;批量查询<input type="file" multiple name="uploadFile" id="uploadFile" class="input-file" onChange="importBtn(this)" ng-model="uploadFile"></a>
	</span>
	<button ng-click="exportBtn()" class="btn btn-primary" style="margin-left: 5px; float: right;" ng-show="count"><i class="icon Hui-iconfont">&#xe644;</i>&nbsp;导出</button>
	<button ng-click="previewBtn()" class="btn btn-primary" style="float: right;" ng-show="count"><i class="icon Hui-iconfont">&#xe695;</i>&nbsp;预览</button>
</div>
<!--模态导入特殊号码保障费详情窗口-->
<div class="modal fade" id="detailModal" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog container">
		<h3 class="m-title">个人通话详情</h3>
		<div style="width: 100%;">
			<table ng-table="qfr.detailTableParams" class="table-condensed table-border table-hover">
				<tr ng-repeat="detailList in $data" ng-model="detailInfos" name="info">

					<td title="'notes登录名'" >{{detailList.operatorId}}</td>
					<td title="'姓名'" >{{detailList.operatorName}}</td>
					<td title="'单位名称'" >{{detailList.orgName}}</td>
					<td ng-if="numberFlag" title="'主叫号码'" >{{detailList.callNumber}}</td>
					<td ng-if="calledFlag" title="'被叫号码'" >{{detailList.calledNumber}}</td>
					<td ng-if="meetingFlag" title="'会议号'" >{{detailList.conferenceNumber}}</td>
					<td title="'通话起始时间'" >{{detailList.startTime}}</td>
					<td title="'通话结束时间'" >{{detailList.endTime}}</td>
					<td ng-if="minFlag" title="'通话时长（/分钟）'">{{detailList.holdingTime}}</td>
					<td ng-if="hourFlag" title="'通话时长（/小时）'">{{detailList.holdingTime}}</td>
					<td ng-if="fee" title="'费用（/元）'" >{{detailList.fee}}</td>
					<td ng-if="otherFee" title="'设备保障费（/元）'" >{{detailList.otherFee}}</td>
				</tr>
			</table>
		</div>
	</div>
	
</div>
<script type="text/javascript" src="../resources/statement/controller/common.js"></script>
<script type="text/javascript" src="../resources/reports/controller/queryFeeReport.js"></script>
<script type="text/javascript" src="../skeleton/lib/page-bar.js"></script>
</body>
</html>
