<!DOCTYPE html>
<html ng-app="queryDeptFeeReportApp">
<head>
	<meta name="referrer" content="no-referrer">
<title>部门报表</title>
<meta charset="utf-8">
<script src="../skeleton/includeJs_3rd.js"></script>
<script src="../skeleton/includeCss_3rd.js"></script>
<style>

body {
	padding: 0px 20px 10px 10px;
}
table tr {
    height: 30px;
}

.modal {
	background-color: rgba(102, 102, 102, 0.85);
}

.container {
	margin-top: 5px;
	width: 830px;
	box-shadow: 0 0 20px #888888;
	z-index: 10;
	background-color: rgba(255, 255, 255, 1);
}

.m-title {
	text-align: center;
	border-bottom: 1px solid #ccc;
	padding: 10px;
}
.ng-isolate-scope {
	margin-top: 10px;
}

</style>
</head>
<body ng-controller="queryDeptFeeReportCtrl as qdfr" ng-init="url='../rest/queryDeptFeeList'" ng-cloak>
<div style="display: inline-block; width: 100%; text-align: right;"> 
	服务单位：<div style="display: inline-block; margin-right: 10px; width: 10%;">
		<div class="form-group" style="min-width:160px;">
			<div align="left" ng-dropdown-multiselect="" id="org" options="orgs" ng-model="data.unitName" selected-model="selectedOrg" extra-settings="orgsSettings" translation-texts="orgTexts"></div>
		</div>
	</div>
	服务项目：<div style="display: inline-block; margin-right: 10px; width: 10%;">
	
		<select class="input-text" style="cursor: pointer;" ng-model="data.feeType">
			<option value="" selected="selected">全部</option>
			<option ng-repeat="feeTypeObj in rateRule" value="{{feeTypeObj.rateRuleName}}">{{feeTypeObj.rateRuleName}}</option>
		</select>
		
	</div>
	查询月份：<div style="display: inline-block; margin-right: 10px; width: 10%;">
		<input type="text" onfocus="WdatePicker({dateFmt:'yyyyMM', maxDate:'\'3000-01-01\'}'})" id="beginDate" class="input-text Wdate" style="cursor: pointer;" ng-model="beginDate" onChange=""> 
	</div>
	<div style="display: inline-block;">
		<span><button ng-click="load_page(1)" class="btn btn-primary"><i class="icon Hui-iconfont">&#xe709;</i>&nbsp;查询</button></span>
		<span>&nbsp;<button type="reset" ng-click="resetBtn()" class="btn btn-primary"><i class="icon Hui-iconfont">&#xe68f;</i>&nbsp;重置</button></span>
	</div>
</div>
<div>
</div>
<div style="height: 375px; margin-top:10px" >
<table class="table-condensed table-border table-hover">
<thead>
	<tr>
		<th>服务项目</th>
		<th>服务单位</th>
		<th>服务单价</th>
		<th>服务对象</th>
		<th>服务数量</th>
		<th>费用（元）</th>
		<th>服务时长</th>
		<th>归属月份</th>
		<th>详情显示</th>
	</tr>
</thead>
<tbody>
	<tr ng-repeat="o in list track by $index">
		<td ng-cloak>{{o.feeTypeName}}</td>
		<td ng-cloak>{{o.serverUnit}}</td>
		<td ng-cloak>{{o.rateFee}}</td>
		<td ng-cloak>{{o.orgNameFull}}</td>
		<td ng-cloak>{{o.callTime}}</td>
		<td ng-cloak>{{o.fee}}</td>
		<td ng-cloak>{{o.totalMinutes}}</td>
		<td ng-cloak>{{o.month}}</td>
		<td ng-cloak>
			<button class="btn btn-primary size-MINI" ng-click="loadDetail(list, $index)" ng-if="o.cdrType == 1 || o.cdrType == 3">
				显示详情
			</button>
		</td>
	</tr>
</tbody>
</table>
</div>
<div page-directive style="margin-top: 10px;"></div>
<div style="margin-top: 10px; width: 100%;">
	<button ng-click="exportBtn()" class="btn btn-primary" style="margin-left: 5px; float: right;" ng-show="count"><i class="icon Hui-iconfont">&#xe644;</i>&nbsp;导出</button>
	<button ng-click="previewBtn()" class="btn btn-primary" style="float: right;" ng-show="count"><i class="icon Hui-iconfont">&#xe695;</i>&nbsp;预览</button>
</div>
<!--部门通话详情模态窗口-->
<div class="modal fade" id="detailModal" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog container">
		<h3 class="m-title">部门通话详情</h3>
		<div style="width: 100%;">
			<table ng-table="qdfr.detailTableParams" class="table-condensed table-border table-hover">
				<tr ng-repeat="detailList in $data" ng-model="detailInfos" name="info">
					<td title="'单位名称'" >{{detailList.orgName}}</td>
					<td ng-if="operatorName" title="'用户名'" >{{detailList.operatorName}}</td>
					<td ng-if="numberFlag" title="'主叫号码'" >{{detailList.callNumber}}</td>
					<td ng-if="calledFlag" title="'被叫号码'" >{{detailList.calledNumber}}</td>
					<td ng-if="meetingFlag" title="'会议号'" >{{detailList.conferenceNumber}}</td>
					<td ng-if="callBeginTime" title="'通话起始时间'" >{{detailList.startTime}}</td>
					<td ng-if="callEndTime" title="'通话结束时间'" >{{detailList.endTime}}</td>
					<td ng-if="minFlag" title="'通话时长（/分钟）'">{{detailList.holdingTime}}</td>
					<td ng-if="hourFlag" title="'通话时长（/小时）'">{{detailList.holdingTime}}</td>
					<td ng-if="fee" title="'费用（/元）'" >{{detailList.fee}}</td>
					<td ng-if="otherFee" title="'设备保障费（/元）'" >{{detailList.otherFee}}</td>
					<td ng-if="totalFee" title="'费用（/元）'" >{{detailList.totalFee}}</td>
				</tr>
			</table>
		</div>
		<div class="f-l">
		</div>
	</div>
	
</div>
<script type="text/javascript" src="../resources/statement/controller/common.js"></script>
<script type="text/javascript" src="../resources/reports/controller/queryDeptFeeReport.js"></script>
<script type="text/javascript" src="../skeleton/lib/page-bar.js"></script>
</body>
</html>