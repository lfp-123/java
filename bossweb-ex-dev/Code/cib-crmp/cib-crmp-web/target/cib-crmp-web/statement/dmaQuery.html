<!DOCTYPE HTML>
<html>
<meta name="referrer" content="no-referrer">
<head>
<meta charset="utf-8">
<script src="../skeleton/includeJs_3rd.js"></script>
<script src="../skeleton/includeCss_3rd.js"></script>
<style>
body {
	padding: 10px 20px 10px 10px;
}
table tr {
    height: 34px;
}
.nav>li>a {
    padding: 5px 15px;
}
.modal {
	background-color: rgba(102, 102, 102, 0.85);
}
.container {
	padding: 0px 0px 0px 0px;
	margin-top: 30px;
	width: 598px;
	box-shadow: 0 0 20px #888888;
	z-index: 10;
	background-color: rgba(255, 255, 255, 1);
}
</style>

<title>DMA话单查询</title>
</head>
<body ng-app="dmaQueryApp" ng-controller="dmaQueryController" ng-init="url='../rest/queryDmaList';p_pernum=10" ng-cloak>
<div style="display: inline-block; width: 100%; text-align: right;">
	<div style="display: inline-block;" ng-show="operatorLevel != 1">单位名称：</div>
	<div style="display: inline-block; margin-right: 10px; min-width:100px;">
		<!-- <input type="text" class="input-text" ng-model="data.orgName"> -->
		<div style="min-width:100px;" ng-show="operatorLevel != 1">
			<div align="left" ng-dropdown-multiselect="" id="org" options="orgs" ng-model="data.selectedOrgIds" selected-model="selectedOrg" extra-settings="orgsSettings" translation-texts="orgTexts"></div>
		</div>
	</div>
	notes名：<div style="display: inline-block; margin-right: 10px; width: 6%;">
		<input type="text" class="input-text" ng-model="data.loginName">
	</div>
	姓名：<div style="display: inline-block; margin-right: 10px; width: 6%;">
		<input type="text" class="input-text" ng-model="data.operatorName">
	</div>
	方数：<div style="display: inline-block; margin-right: 10px; width: 6%;">
		<!-- <input type="text" class="input-text" ng-model="data.partCount"> -->
		<select type="text" class="input-text" ng-model="selPartCount" ng-options="x.entryName for x in partCounts"></select>
	</div>
	会议号：<div style="display: inline-block; margin-right: 10px; width: 6%;">
		<input type="text number" class="input-text" ng-model="data.roomId" name="userName">
		<span class="warning" ng-show="userName.$error.number">只能输入数字</span>
	</div>
	日期：<div style="display: inline-block; margin-right: 10px; width: 16%;">
		<input type="text" onfocus="WdatePicker({maxDate:'#F{$dp.$D(\'endDate\')||\'%y-%M-%d\'}', readOnly:true})" id="beginDate" class="input-text Wdate" style="width:45%; cursor: pointer;" ng-model="beginDate" onChange="">
			-
		<input type="text" onfocus="WdatePicker({minDate:'#F{$dp.$D(\'beginDate\')}',maxDate:'%y-%M-%d', readOnly:true})" id="endDate" class="input-text Wdate" style="width:45%; cursor: pointer;" ng-model="endDate" onChange="">
	</div>
	<div style="display: inline-block;">
		<span><button ng-click="validateData();load_page(1)" class="btn btn-primary"><i class="icon Hui-iconfont">&#xe709;</i>&nbsp;查询</button>&nbsp;</span>
		<span><button type="reset" ng-click="resetBtn()" class="btn btn-primary"><i class="icon Hui-iconfont">&#xe68f;</i>&nbsp;重置</button></span>
	</div>
</div>
<div >
	<div class="mt-15" style="height: 400px; ">
		<table id="table-dma" class="table-condensed table-border table-hover">
			<thead>
				<tr class="text-c">
					<th width="60">notes名</th>
					<th width="150">姓名</th>
					<th width="150">单位名称</th>
					<th width="30">方数</th>
					<th width="50">会议号</th>
					<th width="120">会议起始时间</th>
					<th width="120">会议结束时间</th>
					<th width="60">时长/(时)</th>
					<th width="60">费用/(元)</th>
					<th width="60">保障费/(元)</th>
					<th width="60">编辑</th>
				</tr>
			</thead>
			<tbody id="main02">
				<tr class="text-c" ng-repeat="x in list">
					<td>{{x.operatorId}}</td>
					<td>{{x.operatorName}}</td>
					<td>{{x.orgName}}</td>
					<td>{{x.partCount}}</td>
					<td>{{x.conferenceNumber}}</td>
					<td>{{x.startTime}}</td>
					<td>{{x.endTime}}</td>
					<td>{{x.holdingTime}}</td>
					<td>{{x.fee}}</td>
					<td>{{x.otherFee}}</td>
					<td ng-cloak>
						<button class="btn btn-primary size-MINI" ng-click="addInsuranceFee(list, $index)" ng-if="x.conferenceNumber">
							编辑
						</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
		<div page-directive style="margin-top: 10px;"></div>
		<div style="margin-top: 10px; width: 100%;">
		<span class="r"><button name="" id="" class="cr btn btn-primary"type="" ng-click="download()" ng-show="count"><i class="Hui-iconfont">&#xe640;</i> 下载</button> &nbsp;&nbsp;</span>
		</div>
</div>
<!--模态增加窗口-->
 	<div class="modal fade" id="addModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true"
		data-backdrop="false">

		<div class="modal-content container" style="width: 648px;">
			<div class="ng-scope">
			<div class="modal-header" style="width:100%">
				<h4 class="modal-title" align="center">增加设备保障费</h4>
			</div>
			<div class="modal-body">
        		<div align="center">
					<div class="form-horizontal">
  					<div class="form-group">
    					<label for="conferenceNumber" class="col-sm-3 control-label">会议号：</label>
    					<div class="col-sm-8">
							<input type="text" class="input-text" ng-model="conferenceNumber" ng-value="{{conferenceNumber}}" readonly>
    					</div>
  					</div>
  					<div class="form-group">
    					<label for="startTime" class="col-sm-3 control-label">起始时间：</label>
    					<div class="col-sm-8">
							<input type="text" class="input-text" ng-model="startTime" ng-value="{{startTime}}" readonly>
    					</div>
  					</div>
  					<div class="form-group">
    					<label for="endTime" class="col-sm-3 control-label">结束时间：</label>
    					<div class="col-sm-8">
							<input type="text" class="input-text" ng-model="endTime" ng-value="{{endTime}}" readonly>
    					</div>
  					</div>
  					
					<div class="form-group">
    					<label for="orgDate" class="col-sm-3 control-label">选择机构：</label>
    					<div class="col-sm-6">
							<div id="orgTreeInput">
      						<input type="text" class="form-control" id="orgNames" ng-model="orgNames" ng-click="showTree()" readonly="readonly">
							<div id="orgTreeDiv" align="left" style="display: none; position: absolute; border: 1px solid #ccc; background-color: white; height: 300px; overflow-y: auto;">
								<input type="text" id="predicate" class="input-text" ng-model="predicate" placeholder="搜索"/>
								<treecontrol class="tree-boot"  
									tree-model="orgData"  
				  					options="treeOptions"  
				  					on-selection="showSelected(node)"  
									selected-node="node"
									filter-expression="predicate" 
									filter-comparator="comparator">  
									<label title="{{node.orgNameFull}}">{{node.orgNameFull}}</label>
								</treecontrol>
							</div>
							</div>
						</div>
						<label for="orgDate" class="col-sm-2 control-label">保障费：<input type="checkbox" ng-model="addFlag"></label>
					</div>
					</div>
        		</div>
    		</div>
			<div class="modal-footer" style="width:100%">
        		<button class="btn btn-primary" ng-click="confirm()"><i class="Hui-iconfont">&#xe6a7;</i> 确定</button>
        		<button class="btn btn-primary" ng-click="cancel()"><i class="Hui-iconfont">&#xe6a6;</i> 关闭</button>
    		</div>
    		</div>
		</div>
	</div>
<script type="text/javascript" src="../resources/statement/controller/common.js"></script>
<script type="text/javascript" src="../resources/statement/controller/dmaQuery.js"></script>
<script type="text/javascript" src="../skeleton/lib/page-bar.js"></script>
</body>
</html>