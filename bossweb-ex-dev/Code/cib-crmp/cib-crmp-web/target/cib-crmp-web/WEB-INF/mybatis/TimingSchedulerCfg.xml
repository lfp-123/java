<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.newland.boss.cib.crmp.web.dao.TimingSchedulerCfgDao">


    <resultMap type="com.newland.boss.cib.crmp.domain.TimingSchedulerCfg" id="configResultMap">
        <id column="SCHEDULER_CFG_ID" property="schedulerCfgId" jdbcType="INTEGER"/>
        <result column="SCHEDULER_TYPE" property="schedulerType" jdbcType="INTEGER"/>
        <result column="CDR_TYPE" property="cdrType" jdbcType="INTEGER"/>
        <result column="START_TIME" property="startTime" jdbcType="VARCHAR"/>
        <result column="SYNC_CYCLE" property="syncCycle" jdbcType="INTEGER"/>
        <result column="CYCLE_VALUE" property="cycleValue" jdbcType="VARCHAR"/>
        <result column="STATUS" property="status" jdbcType="INTEGER"/>
        <result column="OPERATOR_ID" property="operatorId" jdbcType="INTEGER"/>
        <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP"/>
    </resultMap>

    <select id="select" resultMap="configResultMap">
        SELECT * FROM TIMING_SCHEDULER_CFG WHERE STATUS != 2
    </select>

    <insert id="insert" parameterType="com.newland.boss.cib.crmp.domain.TimingSchedulerCfg">
        <selectKey keyProperty="schedulerCfgId" resultType="int" order="BEFORE">
            SELECT SEQ_SUMMING_SETTLE_TASK.nextval FROM dual
        </selectKey>
        INSERT INTO TIMING_SCHEDULER_CFG
        (SCHEDULER_CFG_ID,SCHEDULER_TYPE,CDR_TYPE,START_TIME,SYNC_CYCLE,CYCLE_VALUE,
        STATUS,OPERATOR_ID,CREATE_TIME)VALUES(#{schedulerCfgId},#{schedulerType},
        #{cdrType,jdbcType=INTEGER},#{startTime,jdbcType=VARCHAR},#{syncCycle},#{cycleValue},#{status},#{operatorId},
        sysdate)
    </insert>

    <update id="update" parameterType="com.newland.boss.cib.crmp.domain.TimingSchedulerCfg">
        UPDATE TIMING_SCHEDULER_CFG SET SCHEDULER_TYPE = #{schedulerType},CDR_TYPE = #{cdrType,jdbcType=INTEGER},START_TIME = #{startTime,jdbcType=TIMESTAMP},
        SYNC_CYCLE = #{syncCycle},CYCLE_VALUE = #{cycleValue},STATUS = #{status},OPERATOR_ID = #{operatorId}
        WHERE SCHEDULER_CFG_ID = #{schedulerCfgId}
    </update>

    <!--<delete id="delete" parameterType="com.newland.boss.cib.crmp.domain.TimingSchedulerCfg">-->
        <!--DELETE FROM TIMING_SCHEDULER_CFG WHERE SCHEDULER_CFG_ID = #{schedulerCfgId}-->
    <!--</delete>-->

    <update id="delete" parameterType="com.newland.boss.cib.crmp.domain.TimingSchedulerCfg">
        UPDATE TIMING_SCHEDULER_CFG SET STATUS = #{status} WHERE SCHEDULER_CFG_ID = #{schedulerCfgId}
    </update>

</mapper>