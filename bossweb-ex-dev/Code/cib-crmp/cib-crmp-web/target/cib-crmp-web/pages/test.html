<!doctype html>
<html ng-app="app">
  <head>
    <script src="../skeleton/includeJs_3rd.js"></script>
 <script src="../skeleton/includeCss_3rd.js"></script>
 <script src="../skeleton/include_ui-grid.js"></script>
    <style>
    .grid {
  width: 500px;
  height: 200px;
}
    </style>
  </head>
  <body>
    <div ng-controller="MainCtrl">
      Click on a column header to sort by that column. (The third column has sorting disabled.)
      To demonstrate the live sorting we provide a button that toggles the gender of Alexander Foley.
      Sort by gender (ASC - so click twice) then name (using shift click), so that Alexander is at the top of the grid,
      then click the toggleGender button.

      <br>
      <br>
      <button id='toggleGender' ng-click='toggleGender()' class="btn btn-success" >Toggle Gender</button>
      <div id="grid1" ui-grid="gridOptions1" class="grid"></div>

      <br>
      You can set an initial sort state for the grid by defining the `sort` property on your column definitions.
      The `direction` sub-property says which way to sort, and the `priority` says what order to sort the columns
      in (lower priority gets sorted first).
      <br>
      <br>

      <div id="grid2" ui-grid="gridOptions2" class="grid"></div>
    </div>
     <script type="text/javascript">
     var app = angular.module('app', ['ngAnimate', 'ngTouch', 'ui.grid']);

     app.controller('MainCtrl', ['$scope', '$http', 'uiGridConstants', function ($scope, $http, uiGridConstants) {
       $scope.gridOptions1 = {
         enableSorting: true,
         columnDefs: [
           { field: 'name' },
           { field: 'gender' },
           { field: 'company', enableSorting: false }
         ],
         onRegisterApi: function( gridApi ) {
           $scope.grid1Api = gridApi;
         }
       };

       $scope.toggleGender = function() {
         if( $scope.gridOptions1.data[64].gender === 'male' ) {
           $scope.gridOptions1.data[64].gender = 'female';
         } else {
           $scope.gridOptions1.data[64].gender = 'male';
         };
         $scope.grid1Api.core.notifyDataChange( uiGridConstants.dataChange.EDIT );
       };

        $scope.gridOptions2 = {
         enableSorting: true,
         onRegisterApi: function( gridApi ) {
           $scope.grid2Api = gridApi;
         },
         columnDefs: [
           {
             field: 'name',
             sort: {
               direction: uiGridConstants.DESC,
               priority: 1
             }
           },
           {
             field: 'gender',
             sort: {
               direction: uiGridConstants.ASC,
               priority: 0,
             },
             suppressRemoveSort: true,
             sortingAlgorithm: function(a, b, rowA, rowB, direction) {
               var nulls = $scope.grid2Api.core.sortHandleNulls(a, b);
               if( nulls !== null ) {
                 return nulls;
               } else {
                 if( a === b ) {
                   return 0;
                 }
                 if( a === 'male' ) {
                   return 1;
                 }
                 if( b === 'male' ) {
                   return -1;
                 }
                 if( a == 'female' ) {
                   return 1;
                 }
                 if( b === 'female' ) {
                   return -1;
                 }
                 return 0;
               }
             }
           },
           { field: 'company', enableSorting: false  }
         ]
       };

        var myData = [
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"},
			{ name: "Tiancum", gender: 1, company: "Feb 12, 1985"}
                      ];
       
   
           $scope.gridOptions1.data = myData;
           $scope.gridOptions2.data = myData;
         
     }]);
     </script>
  </body>
</html>