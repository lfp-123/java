<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="operApp">
<head>
	<meta name="referrer" content="no-referrer">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>操作员管理页面</title>
<script src="../skeleton/includeJs_3rd.js"></script>
<script src="../skeleton/includeCss_3rd.js"></script>
<style type="text/css">
.blankDiv {
	margin-right: 20px;
	display: inline;
}
.modal-dialog {
	width: 700px;
}
.null_tr {
	height: 30.2px;
}
</style>
</head>
<body ng-controller="operatorController as oper" style="padding-right: 10px;" ng-cloak>
	<div class="am-form-inline" align="right">
		<label for="dept">notes登录名：</label> 
		<div class="am-form-group">
			<input type="text" class="input-text" ng-model="loginName"/>
		</div>
		<div class="blankDiv"></div>
		<label for="dept">姓名：</label> 
		<div class="am-form-group">
			<input type="text" class="input-text" ng-model="searchName"/>
		</div>
		<div class="blankDiv"></div>
		<div class="am-form-group">
			<button class="btn btn-primary" type="button" ng-click="searchOperator()"><i class="Hui-iconfont">&#xe709;</i> 查询</button>
        	<button class="btn btn-primary" type="button" ng-click="resetSearch()"><i class="Hui-iconfont">&#xe68f;</i> 重置</button>
		</div>
	</div>
	
	<div style="margin-top: 20px;">
		<table ng-table="oper.tableParams" class="table-condensed table-border table-hover" style="margin-bottom: 10px;">
			<tr ng-repeat="oper in $data track by $index" ng-model="operatorInfos" name="info" ng-class="oper.isNull" ng-if="oper.operatorId == 10000000">
				<td data-title="''">  
				</td>
				<td data-title="'操作员工号'">  
					<span ng-bind="oper.operatorId"></span>
				</td>
				<td data-title="'notes登录名'" ng-bind="oper.loginName"></td>
				<td data-title="'姓名'" ng-bind="oper.operatorName"></td>
				<td data-title="'状态'" ng-bind="getOperStatusName(oper.operatorStatus)">
				</td>
				<td data-title="'等级'" ng-bind="getOperLevelName(oper.operatorLevel)">
				</td>
				<td data-title="'直线'" ng-bind="oper.directNumber"></td>
				<td data-title="'座机'" ng-bind="oper.seatNumber"></td>
				<td data-title="'移动电话'" ng-bind="oper.mobileNumber"></td>
				<td data-title="'机构'" ng-bind="getOperOrgName(oper.orgList)"></td>
			</tr>
			<tr ng-repeat="oper in $data track by $index" ng-model="operatorInfos" name="info" ng-click="selectOperator(oper)" ng-class="oper.isNull" ng-if="oper.operatorId != 10000000">
				<td data-title="''">  
					<input type="checkbox" id="{{oper.operatorId}}" ng-checked="isSelected(oper)" ng-if="oper.isNull != 'null_tr'">
				</td>
				<td data-title="'操作员工号'">  
					<span ng-bind="oper.operatorId"></span>
				</td>
				<td data-title="'notes登录名'" ng-bind="oper.loginName"></td>
				<td data-title="'姓名'" ng-bind="oper.operatorName"></td>
				<td data-title="'状态'" ng-bind="getOperStatusName(oper.operatorStatus)">
				</td>
				<td data-title="'等级'" ng-bind="getOperLevelName(oper.operatorLevel)">
				</td>
				<td data-title="'直线'" ng-bind="oper.directNumber"></td>
				<td data-title="'座机'" ng-bind="oper.seatNumber"></td>
				<td data-title="'移动电话'" ng-bind="oper.mobileNumber"></td>
				<td data-title="'机构'" ng-bind="getOperOrgName(oper.orgList)"></td>
			</tr>
		</table>
	</div>	
	<div class="f-l">
		<input type="text" class="input-text" id="pageBinding" style="width: 35px; height: 32px; text-align: center; border-radius: 5px;" ng-model="oper.curPage"/>
		<button class="btn btn-primary" ng-click="oper.changePage(oper.curPage)"><i class="icon Hui-iconfont">&#xe6ab;</i>&nbsp;跳转</button>
	</div>
	<div class="f-r">
		<button class="btn btn-primary" ng-click="openModel('add')"><i class="Hui-iconfont">&#xe604;</i> 添加</button>
       	<button class="btn btn-primary" ng-click="openModel('modify')"><i class="Hui-iconfont">&#xe60c;</i> 修改</button>
       	<button class="btn btn-primary" data-toggle="modal" ng-click="operatorDelete()"><i class="Hui-iconfont">&#xe60b;</i> 删除</button>
       	<button class="btn btn-primary" type="button" ng-click="resetPwd()"><i class="Hui-iconfont">&#xe68f;</i> 重置密码</button>
    </div>
	<!-- 模态编辑窗口 -->
	<script type="text/ng-template" id="modify.html"> 
		<div>
			<div class="modal-header">
				<h4 class="modal-title" align="center">修改操作员</h4>
			</div>
			<div class="form-horizontal" name="addOperatorForm" novalidate>
			<div class="modal-body">
 					<div class="form-group">
    					<label for="opeId" class="col-sm-2 control-label">操作员工号：</label>
    					<div class="col-sm-10">
      						<input type="text" id="opeId" class="form-control" ng-model="operatorInfos[0].operatorId" disabled="disabled">
    					</div>
  					</div>
  					<div class="form-group">
    					<label for="operatorName" class="col-sm-2 control-label">操作员姓名：</label>
    					<div class="col-sm-4">
      						<input type="text" id="operatorName" class="form-control" ng-readonly="operatorInfos[0].loginName != '' && operatorInfos[0].loginName != null" ng-model="operatorInfos[0].operatorName" placeholder="必填" maxlength="64">
    					</div>
						<label for="directNumber" class="col-sm-2 control-label">直线：</label>
    					<div class="col-sm-4">
      						<input type="text" id="directNumber" class="form-control" ng-readonly="operatorInfos[0].loginName != '' && operatorInfos[0].loginName != null" ng-model="operatorInfos[0].directNumber" maxlength="12">
    					</div>
  					</div>
					<div class="form-group">
    					<label for="seatNumber" class="col-sm-2 control-label">座机：</label>
    					<div class="col-sm-4">
      						<input type="text" id="seatNumber" class="form-control" ng-readonly="operatorInfos[0].loginName != '' && operatorInfos[0].loginName != null" ng-model="operatorInfos[0].seatNumber" maxlength="12">
    					</div>
						<label for="mobileNumber" class="col-sm-2 control-label">移动电话：</label>
    					<div class="col-sm-4">
      						<input type="text" id="mobileNumber" class="form-control" ng-readonly="operatorInfos[0].loginName != '' && operatorInfos[0].loginName != null" ng-model="operatorInfos[0].mobileNumber" maxlength="12">
    					</div>
  					</div>
					<div class="form-group">
    					<label for="operatorStatus" class="col-sm-2 control-label">操作员状态：</label>
    					<div class="col-sm-4">
      						<select ng-model="operatorInfos[0].operatorStatus" id="operatorStatus" class="form-control" ng-options='x.entryId as x.entryName for x  in operatorStatusDict'>
							</select>
    					</div>
						<label for="operatorLevel" class="col-sm-2 control-label">操作员等级：</label>
    					<div class="col-sm-4">
      						<select ng-model="operatorInfos[0].operatorLevel" id="operatorLevel" class="form-control" ng-options='x.entryId as x.entryName for x  in operatorLevel'>
							</select>
    					</div>
  					</div>
					<div class="form-group">
    					<label for="orgNames" class="col-sm-2 control-label">选择机构：</label>
    					<div id="orgTreeInput" class="col-sm-10">
      						<input type="text" class="form-control" id="orgNames" ng-model="orgNames" ng-click="showTree()" readonly="readonly">
						<div id="orgTreeDiv" align="left" style="display: none; position: absolute; border: 1px solid #ccc; background-color: white; height: 300px; overflow-y: auto;">
							<input type="text" id="predicate" class="input-text" ng-model="predicate" placeholder="搜索"/>
							<treecontrol class="tree-boot"  
								tree-model="orgData"  
			  					options="treeOptions"  
			  					on-selection="showSelected(node)"  
								selected-node="nodes"
								filter-expression="predicate" 
								filter-comparator="comparator">  
								<label title="{{node.orgNameFull}}">{{node.orgNameFull}}</label>
							</treecontrol>
						</div>
						</div>
  					</div>
    		</div>
			<div class="modal-footer">
        		<button class="btn btn-primary" ng-click="operatorUpdate()"><i class="Hui-iconfont">&#xe6a7;</i> 确定</button>
        		<button class="btn btn-primary" ng-click="cancel()"><i class="Hui-iconfont">&#xe6a6;</i> 关闭</button>
    		</div>
			</div>
		</div>
	</script>
	
	<!--模态增加窗口-->
	<script type="text/ng-template" id="add.html">
		<div>
			<div class="modal-header">
				<h4 class="modal-title" align="center">添加操作员</h4>
			</div>
			<div class="form-horizontal" name="addOperatorForm" novalidate>
			<div class="modal-body">
        		<div class="form-group">
    				<label for="opeName" class="col-md-2 control-label">操作员姓名：</label>
					<div class="col-md-4">
      					<input type="text" id="opeName" class="form-control" ng-model="operatorInfo.operatorName" placeholder="必填" maxlength="64">
					</div>
					<label for="directNumber" class="col-md-2 control-label">直线：</label>
					<div class="col-md-4">
      					<input type="text" id="directNumber" class="form-control" ng-model="operatorInfo.directNumber" maxlength="12">
					</div>
				</div>
				<div class="form-group">
    				<label for="seatNumber" class="col-md-2 control-label">座机：</label>
					<div class="col-md-4">
      					<input type="text" id="seatNumber" class="form-control" ng-model="operatorInfo.seatNumber" maxlength="12">
					</div>
					<label for="mobileNumber" class="col-md-2 control-label">移动电话：</label>
					<div class="col-md-4">
      					<input type="text" id="mobileNumber" class="form-control" ng-model="operatorInfo.mobileNumber" maxlength="12">
					</div>
				</div>
				<div class="form-group">
    				<label for="operatorStatus" class="col-md-2 control-label">操作员状态：</label>
					<div class="col-md-4">
      					<select ng-model="operatorInfo.operatorStatus" id="operatorStatus" class="form-control" ng-options='x.entryId as x.entryName for x  in operatorStatusDict'></select>
					</div>
					<label for="operatorLevel" class="col-md-2 control-label">操作员等级：</label>
					<div class="col-md-4">
      					<select ng-model="operatorInfo.operatorLevel" id="operatorLevel" class="form-control" ng-options='x.entryId as x.entryName for x  in operatorLevel'></select>
					</div>
				</div>
				<div class="form-group">
    				<label for="orgNames" class="col-md-2 control-label">选择机构：</label>
    				<div id="orgTreeInput" class="col-md-10">
      					<input type="text" class="form-control" id="orgNames" ng-model="orgNames" ng-click="showTree()" readonly="readonly">
						<div id="orgTreeDiv" align="left" style="display: none; position: absolute; border: 1px solid #ccc; background-color: white; height: 300px; overflow-y: auto;">
							<input type="text" id="predicate" class="input-text" ng-model="predicate" placeholder="搜索"/>
							<treecontrol class="tree-boot"  
								tree-model="orgData"  
			  					options="treeOptions"  
			  					on-selection="showSelected(node)"  
								selected-node="nodes"
								filter-expression="predicate" 
								filter-comparator="comparator">  
								<label title="{{node.orgNameFull}}">{{node.orgNameFull}}</label>
							</treecontrol>
						</div>
					</div>
        		</div>
    		</div>
			<div class="modal-footer">
        		<button class="btn btn-primary" ng-click="add()"><i class="Hui-iconfont">&#xe6a7;</i> 确定</button>
        		<button class="btn btn-primary" ng-click="cancel()"><i class="Hui-iconfont">&#xe6a6;</i> 关闭</button>
    		</div>
			</div>
		</div>
	</script>
	<script type="text/javascript" src="../resources/admin/controller/showOperator.js"></script>
</body>
</html>