<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!--<script src="https://cn.vuejs.org/js/vue.min.js"></script>-->
    <script type="text/javascript" src="js/vue.min.js"></script>
</head>
<body>
<style>
    body{
        font-size: 14px;
    }
    table{
        margin: auto;
        width: 800px;
        border-collapse: collapse;
        border: 1px solid #ccc;
    }
    table th,table td{
        border: 1px solid #ccc;
        padding: 7px 10px;
        text-align: center;
    }
    th.sort{
        position: relative;
        cursor: pointer;
    }
    th.sort::before,
    th.sort::after{
        display: block;
        position: absolute;
        font-size: 10px;
        transform: scale(.75);
        right: 3px;
    }
    th.sort::before{
        content: "▲";
        top: 3px;
    }
    th.sort.asc::before{
        color: red;
    }
    th.sort::after{
        content: "▼";
        bottom: 3px;
    }
    th.sort.desc::after{
        color: red;
    }

    button,input{
        font-family: inherit;
        font-size: inherit;
        border: 1px solid #ccc;
        padding: 4px 10px;
        cursor: pointer;
        outline: none;
    }
    button.active{
        color: white;
        background-color: red;
        border-color: red;
    }
</style>

<div id="root">

    <h1 align="center">网址导航</h1>
    <div align="center">
        <button @click="add">添加</button>
        <input type="text" placeholder="搜索网站名称" v-model="keyword">
    </div>
    <br>
    <table >
        <tr>
            <th class="sort" :class="flag" @click="orderBy('id','num')">编号</th>
            <th class="sort" :class="flag" @click="orderBy('title','cn')">网站名称</th>
            <th class="sort" :class="flag" @click="orderBy('url')">网址</th>
            <th class="sort" :class="flag" @click="orderBy('star')">评分</th>
            <th>操作</th>
        </tr>
        <tr v-for="item in SITES">
            <td>{{item.id}}</td>
            <td>{{item.title}}</td>
            <td>{{item.url}}</td>
            <td>{{item.star}}</td>
            <td>
                <button @click="edit(item)">修改</button>
                <button @click="del(item.id)">删除</button>
            </td>
        </tr>
    </table>
    <br>
    <div align="center">
        <button
                :disabled="page==1"
                @click="page--"
        >上一页</button>
        <button
                v-for="p in totalpage"
                :class="{active:page==p}"
                @click="goPage(p)"
        >{{p}}</button>


        <button
                :disabled="page==totalpage"
                @click="page++"
        >下一页</button>

    </div>
</div>

<script>
    var _sites = [
        { id: 5, title: '网易', url:'www.163.com', star:'★★★' },
        { id: 1, title: '百度', url:'www.baidu.com', star:'★' },
        { id: 4, title: '淘 宝', url:'www.taobao.com', star:'★' },
        { id: 3, title: '凤凰网', url:'www.ifeng.com', star:'★' },
        { id: 2, title: '爱奇艺', url:'www.aqiyi.com', star:'★★★★' }
    ];
    var root  = new Vue({
        el:'#root',
        data: {
            keyword: '',
            sites: [..._sites],
    page: 1,
        perpage: 2,
        flag: ''
    },
    computed: {
        total(){
            return this.sites.length;
        },
        totalpage(){
            return Math.ceil(this.total/this.perpage);
        },
        search(){
            return this.sites.filter( item => {
                return item.title.indexOf(this.keyword)>-1;
        })
        },
        SITES(){
            var start = (this.page-1)*this.perpage;
            var end  = start + this.perpage;
            return this.search.slice(start,end);
        }
    },
    methods: {
        add(){
            var id = this.sites.length+1;
            var title = prompt('请输入网站名称！');
            var url = prompt('请输入网站网址！');
            var star = prompt('请输入网站评分！') || '★';

            this.sites.push({ id, title, url, star });

        },
        del(id){
            if(confirm('您确定要删除吗？')){
                this.sites = this.sites.filter(function(item){
                    return item.id!=id;
                })
            }
        },
        edit( item ){

            item.title = prompt('请输入网站名称！', item.title);
            item.url = prompt('请输入网站网址！', item.url);
            item.star = prompt('请输入网站评分！', item.star);

        },
        goPage(p){
            this.page = p;
        },
        orderBy( field, type ){

            if(this.flag==''){
                this.flag = 'asc';
                //升序
                this.sites.sort( (a,b) => {
                    if(type=='num'){
                    //数字排序
                    return a[field] - b[field];
                }else if(type=='cn'){
                    //中文排序
                    return a[field].localeCompare(b[field],'zh');
                }else{
                    //字母排序
                    return a[field].localeCompare(b[field]);
                }
            })

            }else if(this.flag=='asc'){
                this.flag = 'desc';
                //降序
                this.sites.sort( (a,b) => {
                    if(type=='num'){
                    //数字排序
                    return (a[field] - b[field]) * -1;
                }else if(type=='cn'){
                    //中文排序
                    return a[field].localeCompare(b[field],'zh') * -1;
                }else{
                    //字母排序
                    return a[field].localeCompare(b[field]) * -1;
                }
            })
            }else{
                this.flag = '';
                //默认

                this.sites = _sites;
            }
        }
    }
    })
</script>

</body>
</html>